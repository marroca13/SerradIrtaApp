<html lang="ru" xml:lang="ru"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="Для защиты сетевого соединения между ArcGIS Web Adaptor и Portal for ArcGIS необходимо использовать HTTPS.   Это поможет предотвратить возможность перехвата, расшифровки или изменения сообщений, которыми обмениваются компоненты."><meta name="content-language" content="ru"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - 
Включение HTTPS на вашем веб-сервере</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-66793700-6334-4C7C-9BA6-5D0058C2F343]--><body><div id="content"><div class="header"><h1>
Включение HTTPS на вашем веб-сервере</h1><div id="breadcrumb"></div></div>
<p id="GUID-2BA75BF9-0150-4074-BB9D-F712637AABFF">Протокол HTTPS представляет собой стандартную технологию безопасности, которая используется для установления шифрованного соединения между веб-сервером и веб-клиентом. HTTPS позволяет безопасно обмениваться данными благодаря идентификации и проверки подлинности сервера, а также обеспечению конфиденциальности и целостности всех передаваемых данных.   Поскольку HTTPS предотвращает перехват или взлом данных, отправляемых по сети, его необходимо использовать со всеми механизмами регистрации или аутентификации, а также во всех сетях, в которых происходит обмен конфиденциальной информацией.</p><p id="GUID-C75DB9CA-EF0E-4071-83A3-998511312AFC">  Чтобы зашифровать сетевое соединение между <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> и <span purpose="ph" translate="no" varid="PortalForArcGIS">Portal for ArcGIS</span> необходимо использовать HTTPS на порту 443.   Другие порты использовать нельзя. HTTPS позволяет защитить имена, пароли и другую важную информацию от дешифровки в канале связи между <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> и порталом. При использовании HTTPS подключение к веб-страницам и ресурсам осуществляется по протоколу HTTPS, а не HTTP.</p><p id="GUID-F679CE35-9EFA-44B1-AA21-1EC48266E69F">Необходимо получить сертификат SSL и связать его с веб-сайтом, на котором установлен <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span>.   Каждый веб-сервер имеет собственную процедуру загрузки сертификата и его привязки к веб-сайту.</p><p id="GUID-8E0CCD76-ABE0-48B8-BBDD-4A996FEE7965"> Убедитесь также, что на вашем веб-сервере включено игнорирование клиентских сертификатов, чтобы доступ к защищенным сервисам через HTTPS осуществлялся корректно.</p><div class="section1" id="GUID-785B4C5F-085D-4297-9AEA-67983BC08354" purpose="section1"><h2>
Создайте сертификат сервера</h2><p id="GUID-9D19EEED-5546-4A34-8529-D79B67B47352">
Для создания HTTPS-соединения между <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> и порталом, веб-серверу требуется сертификат сервера. Сертификат – это цифровой файл, содержащий информацию об удостоверении веб-сервера. Он также содержит метод шифрования, который используется при создании защищенного канала между веб-сервером и порталом. Сертификат должен создаваться владельцем веб-сайта и иметь цифровую подпись.  Существует три типа сертификатов – подписанные центром сертификации (CA), домена и самозаверенный – которые описываются ниже.</p><div class="section2" id="ESRI_SECTION2_B89E43031B974D188D07F92121765C41" purpose="section2"><h3>Сертификаты, подписанные центром сертификации (CA)</h3><p id="GUID-83FE3C84-5F63-4236-A1A7-7E187A4D0998">Сертификаты, подписанные центром сертификации (CA), следует использовать для производственных систем, особенно если к развертыванию Portal for ArcGIS предполагается доступ пользователей извне вашей организации. Например, если портал не защищен файрволом и доступен через Интернет, использование сертификата, подписанного центром сертификации (CA) гарантирует пользователям вне организации, что идентичность веб-сайта подтверждена.</p><p id="GUID-279CB780-6191-4422-8222-DAF7B3EB427E">Помимо подписи владельца сайта сертификат может иметь подпись независимого сертифицирующего органа. Центр сертификации обычно является пользующейся доверием сторонней организацией, которая может подтвердить подлинность веб-сайта. Если веб-сайт является заслуживающим доверия, центр сертификации добавляет собственную цифровую подпись в самозаверенный сертификат сайта.  Это говорит веб-клиентам, что идентичность веб-сайта проверена.</p><p id="GUID-F3F43E4C-31EB-4044-97FA-51C81B87B59D">При использовании сертификата, выданного известным центром защищенное соединение между сервером и веб-клиентом возникает автоматически, и никаких специальных действий пользователю предпринимать не надо. Поскольку веб-сайт проверен CA, вы не увидите предупреждений или неожиданного поведения веб-браузера.</p></div><div class="section2" id="ESRI_SECTION2_687826F11C604E38BAE007786F342346" purpose="section2"><h3>Сертификаты домена</h3><p id="GUID-C915BA02-ED9C-47E0-8DEC-09CC1C746515"> Если портал находится за брандмауэром, и использование подписанного CA сертификата невозможно, воспользуйтесь сертификатом домена. Доменный сертификат – это внутренний сертификат, подписанный CA вашей организации. Использование сертификатов домена помогает снизить стоимость выпуска сертификатов и облегчает их развертывание, поскольку сертификаты быстро генерируются в вашей организации для доверительного внутреннего пользования.</p><p id="GUID-24E5A858-4657-496C-B107-C41DA4AD9042">Пользователи, находящиеся в вашем домене, не увидят предупреждений или неожиданного поведения веб-браузера, обычно связанных с использованием самозаверенных сертификатов, поскольку веб-сайт был проверен сертификатом домена. Однако сертификаты домена не проверяются внешней CA, это означает, что пользователи, заходящие на сайт извне домена, не смогут проверить подлинность вашего сертификата. Внешние пользователи увидят в веб-браузере сообщения об отсутствии доверия к сайту, пользователь может считать, что зашел на вредоносный сайт и уйти с него.</p><div class="section3" id="ESRI_SECTION3_8DB486A77CA74D9CB4E95ECFC646FDBA" purpose="section3"><h4>Создайте доменный сертификат в IIS</h4><p id="GUID-5C923A3E-0893-449B-B313-8423CD683FE4">В Manager IIS выполните следующие шаги, чтобы создать сертификат домена:</p><div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_C7ECAB12725B49E2B285BB2212190EE2"><div class="step_title">Шаги:</div><ol><li purpose="step" id="ESRI_STEP_29A4307BFCF8438D8E09C4F464EDA280"><span purpose="cmd" id="GUID-53C3E3B7-C9F5-4F1F-A37C-4AA18FD794A3">На панели <span class="wintitle">Подключения</span> выберите ваш сервер в дереве каталога и дважды щелкните <span class="uicontrol">Сертификаты сервера</span>.</span><div class="info" purpose="info"><p id="GUID-4911C1FB-1F8D-485B-B4A2-21EB76BA114A">
          <div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-CEB106EE-085F-487D-B723-330BC3388557-web.jpg" purpose="img" alt="Значок Сертификаты сервера в IIS Manager" title="Значок Сертификаты сервера в IIS Manager"></td></tr></table></div></p></div></li><li purpose="step" id="ESRI_STEP_90BD76AC7D8E4190A07DF4A1AB26BFE8"><span purpose="cmd" id="GUID-EDE18D50-44D2-4B1D-B071-7FEB7DEC0DC9">На панели <span class="wintitle">Действия</span> щелкните <span class="uicontrol">Создать сертификат домена</span>.</span><div class="info" purpose="info"><p id="GUID-ABC07EE3-6A1B-45BD-8580-A3118AC1B0DC">
          <div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-531FAB13-86B2-4E47-98B8-5094F47D34FB-web.png" purpose="img" alt="Ссылка Создать сертификат домена в IIS Manager" title="Ссылка Создать сертификат домена в IIS Manager"></td></tr></table></div></p></div></li><li purpose="step" id="ESRI_STEP_57EDFDEFBB6E46278F07C34A989F7B08"><span purpose="cmd" id="GUID-6E13C609-BE9A-446E-B3C6-20F928655191">В диалоговом окне<span class="wintitle">Свойства отличительного имени</span> введите обязательную для сертификата информацию:</span><div class="substeps" id="ESRI_SUBSTEPS_24A37F03FD4447FE82D9013AFE522905" purpose="substeps"><ol><li purpose="substep" id="ESRI_SUBSTEP_40D86F2C95AB4817AAA718319BA80BAA"><span purpose="cmd" id="GUID-12800908-08EB-4F46-AF27-0BB716CAD383">В поле <span class="uicontrol">Общее имя</span> введите полное доменное имя компьютера, например, <span class="usertext">portal.domain.com</span>.</span></li><li purpose="substep" id="ESRI_SUBSTEP_D8719BF9BD474DA3925A96FB6D253AFF"><span purpose="cmd" id="GUID-9F35022E-CC2F-48AA-9BC5-BE5735A2671E">Заполните другие параметры, указав данные вашей организации и расположения.</span><div class="info" purpose="info"><p id="GUID-F8ED79EC-CFB0-4400-BE8F-88967F261677">
          <div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-60E84EFD-E886-4CE9-87BC-B511E9B4900A-web.png" purpose="img" alt="Диалоговое окно Свойства отличительного имени в IIS Manager" title="Диалоговое окно Свойства отличительного имени в IIS Manager"></td></tr></table></div></p></div></li></ol></div></li><li purpose="step" id="ESRI_STEP_CA345F8E72334B7F8A14BF4DF6E9DD55"><span purpose="cmd" id="GUID-731CA486-E2A3-4BDC-90BB-E2DCDF9575FD">Щелкните <span class="uicontrol">Далее</span>.</span></li><li purpose="step" id="ESRI_STEP_7EBB8F0C806F404CAD1C8FBB44A0F17E"><span purpose="cmd" id="GUID-A56E7C49-267C-42B7-92DB-231EA7F0CA00">В диалоговом окне <span class="wintitle">Cертифицирующая организация</span> щелкните <span class="uicontrol">Выбрать</span> и выберите сертифицирующую организацию в пределах домена, которая будет подписывать сертификат.  Если эта опция не доступна, введите сертифицирующую организацию домена в поле <span class="uicontrol">Укажите сертифицирующую организацию</span>, например, <span class="usertext">City Of Redlands Enterprise Root\REDCASRV.empty.local</span>.  Если вам необходима помощь в этом шаге, обратитесь к системному администратору.</span><div class="info" purpose="info"><p id="GUID-6DACCDF3-AD85-48B8-B9F2-2DAE9D57F127">
          <div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-86A49A2E-285F-4D31-9617-091016B3F6F3-web.png" purpose="img" alt="Диалоговое окно Cертифицирующая организация в IIS Manager" title="Диалоговое окно Cертифицирующая организация в IIS Manager"></td></tr></table></div></p></div></li><li purpose="step" id="ESRI_STEP_E53F897B748644B58F3E445DD1CF929E"><span purpose="cmd" id="GUID-21F1EF44-FC5A-4CF1-8F26-A2A762B99BD6">Введите удобное имя сертификата домена и щелкните <span class="uicontrol">Завершить</span>.</span></li></ol></div><div class="result" id="ESRI_RESULT_B14F099C32A04FF28F9BB92F478C84B5" purpose="result"><p id="GUID-F22639B5-6D45-4272-923C-807988F7A751">Последний шаг – связать сертификат домена с HTTPS-портом 443.  Для дополнительных инструкций см. <span class="uicontrol">Связь сертификата с веб-сайтом</span>.</p></div></div></div></div><div class="section2" id="ESRI_SECTION2_EE5D2BB7BDB844EB8B3F15A9774975DB" purpose="section2"><h3>Самозаверенные сертификаты</h3><p id="GUID-971AFDF1-E1E9-4B35-8EDB-B58113DC956A">Создание самозаверенного сертификата не подходит для производственной среды, поскольку приводит к непредсказуемым результатам и неудобствам в работе для всех пользователей портала.</p><p id="GUID-A273BB9B-83F2-49B9-A79A-053BA864C975">Сертификат, подписанный только владельцем веб-сайта, называется самозаверенным сертификатом. Самозаверенные сертификаты обычно используются на веб-сайтах, которые доступны только пользователям внутренней сети организации (LAN). Если веб-сайт, использующий самозаверенный сертификат, находится вне вашей собственной сети, вы не сможете проверить, действительно ли сайт, выпустивший сертификат, представляет указанную в нем организацию. При работе с таким сайтом вы подвергаете риску вашу информацию, поскольку за ним могут стоять злоумышленники.</p><p id="GUID-316C35E4-C753-4E03-8F7C-76685CAA6EA3">При первоначальной настройке портала вы можете использовать самозаверенный сертификат для начального тестирования, чтобы проверить заданную конфигурацию. Однако если вы используете самозаверенный сертификат, во время тестирования вы увидите следующее:</p><ul purpose="ul" id="UL_681CA6D6F5EB4E4686CA2FE06BD0ABEF"><li purpose="li" id="LI_4E4AB5F941DE4CD28831FB16318B7A08">Предупреждения от веб-браузера и <span purpose="ph" translate="no" varid="ArcGISforDesktop">ArcGIS Desktop</span> о сомнительном содержании сайта.   При обнаружении самозаверенного сертификата веб-браузер обычно выдает предупреждение и просит подтвердить переход на сайт. Если вы используете самозаверенный сертификат, многие браузеры предупреждают об этом с помощью значков или красного цвета в адресной строке. Будьте готовы увидеть такие предупреждения, если вы настраиваете ваш портал на использование самозаверенного сертификата.</li><li purpose="li" id="LI_7F50415F12DC48CAB4D92F2E0089005B">Невозможность открыть интегрированный сервис <span purpose="ph" translate="no" varid="AGMapViewer">Map Viewer</span>, добавить элемент защищенного сервиса к порталу, войти в ArcGIS Server Manager на интегрированном сервере и подключиться к порталу из Esri Maps for Office.</li><li purpose="li" id="LI_8E6A08429E51451CBD6C6BAD51709E7F">Непредвиденное поведение при печати размещенных сервисов и доступе к порталу из клиентских приложений.</li><li purpose="li" id="LI_580482AE778F44FCAD930B398049AA30"> Невозможно войти в портал из Esri Maps for Office, если только самозаверенный сертификат не установлен в хранилище сертификатов <span class="uicontrol">Доверенные корневые центры сертификации</span> на компьютере с Esri Maps for Office.</li></ul><div class="notes" id="GUID-5776C480-8E2E-429B-B827-2CF35926329B"><div class="caution"><img class="note_img" src="rsrc/caution.png" alt="Внимание" title="Внимание"><span>Внимание:</span></div><div class="tipbody"><p id="GUID-6FA072A8-20C2-4313-991F-7F290D559D38">Выше приведен частичный список проблем, которые могут возникнуть при использовании самозаверенного сертификата. Рекомендуется использовать доменный сертификат или сертификат, подписанный центром сертификации (CA) для полного тестирования и развертывания вашего портала.</p></div></div><div class="section3" id="ESRI_SECTION3_54C55BB5349146C28CBFA09AC0191C89" purpose="section3"><h4>Создание самозаверенного сертификата в IIS</h4><p id="GUID-F3002672-B32C-4BCA-9427-D8F0A458A182">В Manager IIS выполните следующие шаги, чтобы создать самозаверенный сертификат:</p><div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_C4E47853EFB54B3EBF307CBEA713CE01"><div class="step_title">Шаги:</div><ol><li purpose="step" id="ESRI_STEP_78502F379BB14228918C11CA7FB2A7FF"><span purpose="cmd" id="GUID-056F26E2-9B5E-4921-802F-458161622AD7">На панели <span class="wintitle">Подключения</span> выберите ваш сервер в дереве каталога и дважды щелкните <span class="uicontrol">Сертификаты сервера</span>.</span><div class="info" purpose="info"><p id="GUID-81A19C26-0BCE-4D91-B8F9-F7D0F26D384F">
          <div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-CEB106EE-085F-487D-B723-330BC3388557-web.jpg" purpose="img" alt="Значок Сертификаты сервера в IIS Manager" title="Значок Сертификаты сервера в IIS Manager"></td></tr></table></div></p></div></li><li purpose="step" id="ESRI_STEP_91FDECCA3A5C4763909CEA682851854B"><span purpose="cmd" id="GUID-3CFF9A30-6C7E-49CF-86B4-CE2DA194235D">На панели <span class="wintitle">Действия</span> щелкните <span class="uicontrol">Создать самозаверенный сертификат</span>.</span><div class="info" purpose="info"><p id="GUID-CD1BED4A-F800-43F0-BAEC-E197504B03BC">
          <div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-E6517557-3953-408A-948C-56C223DF774F-web.jpg" purpose="img" alt="Ссылка Создать самозаверенный сертификат в IIS Manager" title="Ссылка Создать самозаверенный сертификат в IIS Manager"></td></tr></table></div></p></div></li><li purpose="step" id="ESRI_STEP_782899B3E3CC487A96E4F7D6A491EA16"><span purpose="cmd" id="GUID-ECFC2085-5DBF-4353-A85A-82A56C68B4DC">Введите удобное имя для нового сертификата и нажмите <span class="uicontrol">OK</span>.</span></li></ol></div><div class="result" id="ESRI_RESULT_0A71E9F1487F40E381A9DA3E8CA4A295" purpose="result"><p id="GUID-A3E04ABF-0953-4897-9C10-3BEED876FAFD">Последний шаг – связать самозаверенный сертификат с HTTPS-портом 443.  Для дополнительных инструкций см. <span class="uicontrol">Связь сертификата с веб-сайтом</span>.</p></div></div></div></div></div>
<div class="section1" id="ESRI_SECTION1_BE7A330F475C4A38B5A54902F2302EE8" purpose="section1"><h2>Привязка сертификата к веб-сайту</h2><p id="GUID-E452DB07-F04B-40AD-931F-D8A1689762E2">После создания сертификата SSL необходимо привязать его к веб-сайту, на котором установлен <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span>.  Привязка означает процесс настройки сертификата для использования порта 443 на веб-сайте.  Инструкции по привязке сертификата к веб-сайту отличаются в зависимости от платформы и версии веб-сервера. Если вам необходимы инструкции, обратитесь к системному администратору или изучите документацию веб-сервера. 
          <span purpose="ph" ishcondition="(srv_os=windows) or (srv_platform=dotnet)">Пример шагов для привязки сертификата в IIS см. ниже.</span></p><div class="section2" id="ESRI_SECTION2_95194E03F9484B4BA2B8A88DA26E88AA" purpose="section2"><h3>Привязка сертификата к порту 443 в IIS</h3><p id="GUID-FBEB7327-042A-435F-A520-1DD08B1EEF14">В Manager IIS выполните следующие шаги, чтобы связать сертификат с HTTPS-портом 443:</p><div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_7A6F9ED814DD45B09FEC1A2A52788497"><div class="step_title">Шаги:</div><ol><li purpose="step" id="ESRI_STEP_4750AC84882D499EB71144827F731488"><span purpose="cmd" id="GUID-19FD7BF0-15CF-4200-83AC-776B0933D658">Выберите ваш сайт в дереве каталога и на панели <span class="wintitle">Действия</span> щелкните <span class="uicontrol">Связи</span>.</span><ul purpose="choices" id="ESRI_CHOICES_0F4ADDB79E594BF4A97600DCBE1DFB97"><li purpose="choice" id="ESRI_CHOICE_434E7F4762EA4D219AA63796CD73538E">Если порт 443 отсутствует в списке Связи, щелкните <span class="uicontrol">Добавить</span>.  В ниспадающем списке <span class="uicontrol">Тип</span> выберите <span class="uicontrol">https</span>. Оставьте порт 443.<p id="GUID-66E4E4D8-F292-4441-98DF-B02DF02F6ED8">
          <div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-D962B15F-5F12-4170-88BD-BBBDEBD36C87-web.jpg" purpose="img" alt="Список Связи сайта в IIS Manager" title="Список Связи сайта в IIS Manager"></td></tr></table></div></p></li><li purpose="choice" id="ESRI_CHOICE_0F336D7EB4364677B9CED96D0CE57A81">Если порт 443 имеется в списке, выберите его и щелкните <span class="uicontrol">Редактировать</span>.</li></ul></li><li purpose="step" id="ESRI_STEP_8C08EADA415E48D1B2A1928DB657F0C3"><span purpose="cmd" id="GUID-96540C5F-EA39-4297-A630-F18A522B60F5">В ниспадающем списке сертификата выберите имя вашего сертификата и щелкните  <span class="uicontrol">OK</span>.</span><div class="info" purpose="info"><p id="GUID-18C60A7E-BFDD-4D29-84CA-2B6F03CEB214">
          <div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-ACD6B980-2002-4708-8781-7F58B8E82CC7-web.jpg" purpose="img" alt="Новая связь в IIS Manager" title="Новая связь в IIS Manager"></td></tr></table></div></p></div></li></ol></div></div></div></div>
<div class="section1" id="ESRI_SECTION1_B238988DBBB14772B62FE651B2568ADE" purpose="section1"><h2>Проверка вашего сайта</h2><p id="GUID-7CA72D24-1215-4817-9E2D-AF1B2701D0F5">После привязки сертификата и веб-сайта, вы можете настроить Web Adaptor на работу с порталом. Вам понадобится открыть страницу настройки <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> с использованием URL по протоколу HTTPS, например, <span class="usertext">https://webadaptorhost.domain.com/webadaptorname/webadaptor</span>.</p><p id="GUID-9CF112D4-885C-44F0-AFC5-7A1568F6FD87">После настройки Web Adaptor следует проверить, что HTTPS работает правильно, сделав HTTPS-запрос к веб-сайту портала, например, <span class="usertext">https://webadaptorhost.domain.com/webadaptorname/home</span>.    Если вы проводите тестирование с самозаверенным сертификатом, отключите предупреждения браузера о небезопасном подключении. Обычно это делается путем добавления в браузер исключения, разрешающего работать с сайтом, имеющим самозаверенный сертификат.</p><p id="GUID-5F4D505C-FB09-4D8A-98AB-A0BC7C4A1D93">Дополнительные сведения об использовании SSL в развертывании портала см. в разделе <a class="xref" target="_blank" rel="http://server.arcgis.com/ru/portal/latest/administer/windows/security-best-practices.htm" href="http://server.arcgis.com/ru/portal/latest/administer/windows/security-best-practices.htm">Оптимальные методы защиты</a>.</p></div><div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>