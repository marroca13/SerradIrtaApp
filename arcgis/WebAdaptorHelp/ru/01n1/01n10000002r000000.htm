<html lang="ru" xml:lang="ru"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="Простейшая подходящая конфигурация для рабочего сайта – настроить один компьютер ArcGIS Server через обратный прокси-сервер, например, обратный прокси-сервер стороннего разработчика или ArcGIS Web Adaptor."><meta name="content-language" content="ru"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - 
Развертывание на одном компьютере с использованием обратного прокси-сервера</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-D32FA68C-96A1-47D7-BC5D-1812D88B121A]--><body><div id="content"><div class="header"><h1>
Развертывание на одном компьютере с использованием обратного прокси-сервера</h1><div id="breadcrumb"></div></div>
<p id="GUID-212D5C48-1B85-45B9-8749-AB2B8C3D9139">Такое развертывание – вариант <a class="xref" rel="01n1/01n10000002w000000.htm" href="01n1/01n10000002w000000.htm">развертывания сайта с одним компьютером</a> с добавленным на сайт <a class="xref" target="_blank" rel="http://server.arcgis.com/ru/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm" href="http://server.arcgis.com/ru/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm">обратного прокси-сервера</a>. Обратный прокси-сервер выступает в качестве посредника для запросов клиентов, ищущих ресурсы на вашем сайте <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, добавляя дополнительные функции безопасности для развертывания сайта.</p><p id="GUID-9711BB40-A27F-42D2-80D9-180E626B5928"> ArcGIS Web Adaptor – реализация Esri обратного прокси-сервера, настраиваемая <a class="xref" rel="01n1/01n100000034000000.htm" href="01n1/01n100000034000000.htm">большинством известных серверов приложений</a>.  Либо вы можете выбрать использование обратных прокси веб-серверов сторонних разработчиков.</p><p id="GUID-AC4D049B-1DD3-4257-9736-771062A802BF">Как показано на приведенном ниже рисунке, ArcGIS Web Adaptor или обратный прокси-сервер другого разработчика, как правило, настраиваются на отдельном веб-сервере, хотя настройки можно выполнить и на вашем <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>.</p><p id="GUID-CC17478D-83F4-4241-81EC-F204FC1AD30C"> Для клиентских приложений нет разницы между прямым доступом к ГИС-серверам и работой через прокси. В качестве администратора <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, вы можете выбрать использование обратного прокси-сервера по следующим причинам:</p><p id="GUID-D9F6D7D8-602E-46FD-991F-56DEEAD7EEDD"><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-B0DCED81-BA6B-4103-AB6D-521F1939A100-web.png" purpose="img" alt="Сайт с одним компьютером и обратным прокси-сервером на отдельном веб-сервере" title="Сайт с одним компьютером и обратным прокси-сервером на отдельном веб-сервере"></td></tr><tr><td><div class="caption" purpose="caption">Сайт с одним компьютером и обратным прокси-сервером стороннего разработчика на отдельном веб-сервере</div></td></tr></table></div></p>
<div class="section1" id="ESRI_SECTION1_5365D260725C42CDB33EDCBA245ADA65" purpose="section1"><h2>Доступ к ГИС-сервисами через стандартные порты</h2><p id="GUID-4B4B437F-DC4B-4CC8-BCA3-C7909471C220">Если вы не используете обратный прокси-сервер, клиенты будут напрямую подключаться к <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> через <span class="usertext">http://gisserver.domain.com:6080</span> или <span class="usertext">https://gisserver.domain.com:6443</span>, если вы настроили HTTPS. Вы не можете поменять <a class="xref" target="_blank" rel="http://server.arcgis.com/ru/server/latest/administer/windows/ports-used-by-arcgis-server.htm" href="http://server.arcgis.com/ru/server/latest/administer/windows/ports-used-by-arcgis-server.htm">порты, используемые по умолчанию</a> в <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>. Если вы хотите, чтобы клиентские приложения использовали стандартные порты, например, 80 и 443 через HTTP и HTTPS, соответственно, требуется настроить доступ с обратным прокси и прямых клиентов через них. К примеру, можно настроить обратный прокси на <span class="usertext">http://proxy.domain.com/arcgis</span> или на <span class="usertext">http://proxy.domain.com/myGIS</span>.</p></div><div class="section1" id="ESRI_SECTION1_017A251D747244C9B665F99FFC6258F5" purpose="section1"><h2>Вынесение <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> за брандмауэр организации</h2><p id="GUID-89B1F282-13EC-49A9-AF1E-E0AFA6C989A0">Если вы собираетесь делать общедоступными свои сервисы и приложения в Интернете, рекомендуется использовать настройку обратного прокси-сервера для выноса <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> за брандмауэр организации. В такой конфигурации входящие запросы из Интернета проходят через брандмауэр, который блокирует все порты, кроме 80 и 443 (HTTP и HTTPS, соответственно). Ваш обратный прокси веб-сервер получает входящий запрос, передает его в <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> через другой брандмауэр по порту 6080 или 6443 (HTTP и HTTPS), и посылает ответ обратно клиенту.     На следующей диаграмме показано, как обратный прокси-сервер будет работать во внешней сети, помогая вам взаимодействовать со своей безопасной сетью.</p><p id="GUID-04B40C7C-AFA1-4AF8-AC23-4CE146F8DA79"><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-DBC9A501-BD3B-4E76-B8A2-BCB29535D578-web.png" purpose="img" alt="Подключение существующего обратного прокси к" title="Подключение существующего обратного прокси к"></td></tr></table></div></p><p id="GUID-0DA19151-9A7D-4108-959A-A70DDB40BEF1">Для изучения вопросов интеграции обратного прокси-сервера с <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> см. раздел <a class="xref" target="_blank" rel="http://server.arcgis.com/ru/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm" href="http://server.arcgis.com/ru/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm">Использование обратного прокси-сервера с ArcGIS Server</a>.</p></div><div class="section1" id="ESRI_SECTION1_B47C8B7AFC7449CE8E0CC52A2F06C39D" purpose="section1"><h2>Блокировка административного доступа к своему сайту</h2><p id="GUID-06620085-D4F3-415A-9CEB-13B3167A544F">Для блокировки определенных ресурсов вашего сайта вы можете воспользоваться обратным прокси-сервером. Например, можно настроить прокси на блокировку доступа к <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> Manager и <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> Administrator Directory. Это может быть полезным, в частности, при размещении сервисов <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> в Интернете.</p><p id="GUID-10EA474B-87D5-441E-95BF-2F26AFA42BA5"> При работе с ArcGIS Web Adaptor отключите административный доступ к своему сайту, воспользовавшись указаниями раздела <a class="xref" target="_blank" rel="http://server.arcgis.com/ru/server/latest/administer/windows/configure-arcgis-web-adaptor-after-installation.htm" href="http://server.arcgis.com/ru/server/latest/administer/windows/configure-arcgis-web-adaptor-after-installation.htm">Настройка Web Adaptor после установки</a>.   При использовании обратного прокси-сервера стороннего разработчика, обратитесь к его документации, чтобы блокировать доступ для всех запросов, которые пытаются подключиться к <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> Manager (<span class="usertext">proxy.domain.com/arcgis/manager/</span>) или <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> Administrator Directory (<span class="usertext">proxy.domain.com/arcgis/admin/</span>).</p><p id="GUID-6B020F3C-E34A-4DB4-B713-92B31168ABF3"> В то время как административный доступ через обратный прокси будет блокирован, он будет по-прежнему работать в случае прямого подключения к
<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> через используемые по умолчанию порты (6080 или 6443). Для контроля доступа к портам следует использовать брандмауэры.</p></div><div class="section1" id="ESRI_SECTION1_6B937290F52246A7B49DC5FF5E286234" purpose="section1"><h2>Использование возможностей собственного веб-сервера</h2><p id="GUID-DEF4E7ED-B69C-4622-B638-D19C211C7E54">Веб-серверы поддерживают много возможностей, которые вы сможете выгодно использовать при развертывании <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>.  Публикуя свои ГИС-сервисы через ваш обратный прокси-сервер, вы можете воспользоваться ведением журнала, кэшированием и настройками безопасности своего веб-сервера.</p><ul purpose="ul" id="UL_430746EA18DB422A9648B28D66CE4FF3"><li purpose="li" id="LI_F1F3D98C03C148C9B04A4D8162B27B46">Аутентификация веб-уровня: По умолчанию, <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> использует <a class="xref" target="_blank" rel="http://server.arcgis.com/ru/server/latest/administer/windows/about-arcgis-tokens.htm" href="http://server.arcgis.com/ru/server/latest/administer/windows/about-arcgis-tokens.htm">аутентификацию на основе токенов</a> (часто называемую аутентификацией на основе токенов ArcGIS или аутентификацией ГИС-уровня). Либо вы можете настроить аутентификацию веб-уровня в <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>. Этот способ позволит <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> передать аутентификацию вашему веб-серверу.  Если вам требуется аутентификация веб-уровня, используйте ArcGIS Web Adaptor. Аутентификация веб-уровня недоступна при работе через обратный прокси-сервер стороннего разработчика.</li><li purpose="li" id="LI_33B4C34B5ACA4314BE2E611EB7731897">Ведение журнала: журналы <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> содержат информацию о сервисах <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, например, сведения о вызванной операции, о времени выполнения запросов <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, а также о предупреждениях и ошибках вашего <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>. Вы можете дополнить эту информацию данными журналов веб-сервера, содержащими детали, которые могут отсутствовать в журналах <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, например, IP-адрес, с которого были сделаны запросы, агент пользователя, источник ссылки и т.д.</li><li purpose="li" id="LI_8C344324013E47E39DA236FC3623A0DD">Другие возможности: большинство веб-серверов позволяют управлять запросами и ответами на них. Например, вы можете активировать правила фильтрации входящих запросов, блокировать доступ с конкретных IP-адресов или доменных имен и т.д.</li></ul></div><div class="section1" id="ESRI_SECTION1_5399D2DD35D44DB99F451A0F3461CA30" purpose="section1"><h2>Краткая информация</h2><p id="GUID-F521195F-BD24-43A2-BA5C-D629E74C568D">ArcGIS Web Adaptor или обратный прокси-сервер стороннего разработчика – отличное дополнение к развертываниям <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> на одном компьютере. Оба обеспечивают дополнительные возможности обеспечения безопасности. Настоятельно рекомендуем вам использовать один из указанных выше вариантов для работы с ГИС-сервисами в Интернете, а также, в ряде случаев, и для развертываний в интранете – в зависимости от требований безопасности.</p><div class="section2" id="ESRI_SECTION2_695C10EAEC2D4353ACABE9696729B025" purpose="section2"><h3>Достоинства</h3><ul purpose="ul" id="UL_CA5E2EE4C2974ADAB89F432BA07AC466"><li purpose="li" id="LI_9CA6DA2321EB493ABC9EF36821FD6422">Применение для <a class="xref" rel="01n1/01n10000002w000000.htm" href="01n1/01n10000002w000000.htm">развертывания на одном компьютере</a> повышенного уровня безопасности.</li></ul></div><div class="section2" id="ESRI_SECTION2_09FC933129414631A3B1CE0DE247FC72" purpose="section2"><h3>Недостатки</h3><ul purpose="ul" id="UL_B6E043DE0B6543EA98F315A66435F59A"><li purpose="li" id="LI_135DE9A1D0794D329FB78EE89DED36B5">Использование обратного прокси-сервера может усложнить запросы к сервисам вашего <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>. Особенно это проявляется при использовании аутентификации веб-уровня для больших и сложных корпоративных хранилищ идентификации.</li><li purpose="li" id="LI_26C494BD8FF94668A36D8C513C66A2CD">Не слишком доступны. Компьютер <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> и обратный прокси-сервер будут источниками отказа, если хотя бы один из них перейдет в автономный режим.    Для получения подробной информации см. раздел об <a class="xref" rel="01n1/01n10000002s000000.htm" href="01n1/01n10000002s000000.htm">Развертывании высокой доступности с одним компьютером (active-passive)</a>.</li></ul></div></div>
<div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>