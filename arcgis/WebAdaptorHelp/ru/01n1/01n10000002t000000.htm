<html lang="ru" xml:lang="ru"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="Сайт может содержать несколько компьютеров ArcGIS Server для обработки большого объема трафика или обеспечения резервной копии, если один из серверов ArcGIS Server становится недоступным."><meta name="content-language" content="ru"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - 
Развертывание на нескольких компьютерах ArcGIS Web Adaptor</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-24EB1171-8DBB-4B71-8EB9-24D0AAE8D488]--><body><div id="content"><div class="header"><h1>
Развертывание на нескольких компьютерах ArcGIS Web Adaptor</h1><div id="breadcrumb"></div></div>
<p id="GUID-5D4A77B3-8AB4-4C98-8563-2E46CDBAA8BB"> 
          
          <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> поддерживает настройку сайтов на нескольких компьютерах. На сайте из нескольких компьютеров, два или более компьютеров <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> могут администрироваться и использоваться как одна логическая единица, что позволяет администраторам <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> гибко и с легкостью регулировать вычислительные возможности сайта посредством добавления или удаления компьютеров <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>. Сайты на нескольких компьютерах также упрощают процесс публикации и обновления сервисов между несколькими серверами <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>.</p><p id="GUID-9BFAE792-E43E-421A-AE5A-359025AFC736">При развертывании на нескольких компьютерах, каждый <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> должен иметь один и тот же номер версии для корректной работы сайта.  Дополнительно, точно такая же лицензия должна применяться к каждому <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, который участвует в сайте.</p><p id="GUID-657D9CD2-9021-46BC-B0E0-5034765ACC43"> В самой простой конфигурации сайт с несколькими компьютерами представляет собой объединение двух или более серверов <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> под управлением <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span>, которые работают на вашем собственном сервере веб-приложений.</p><p id="GUID-57F2C88A-E2E2-49E2-BD5E-67A66789C50A">
          <div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-79F9644A-D779-409B-9E1B-AF6CD5F50C4F-web.png" purpose="img" alt="Сайт с несколькими" title="Сайт с несколькими"></td></tr><tr><td><div class="caption" purpose="caption">Сайт с несколькими <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, в котором данные хранятся на сервере данных с высокой доступностью</div></td></tr></table></div></p><p id="GUID-67A0E652-13DF-47DE-88A9-6FE0F1F893DA">
           Ключевым аспектом конфигураций с несколькими компьютерами является то, что все <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> имеют общий доступ к хранилищу конфигурации и директориям сервера. Таким образом, с помощью ArcGIS Server Manager администратор может подключиться к любому <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> и применить изменения, которые будут применены ко всем компьютерам сайта. Эта схема также идеальна для случаев, когда вам необходимо интегрировать свой сайт в систему аутентификации вашей организации на веб-уровне.</p><div class="section1" id="ESRI_SECTION1_02F47167CE3A4E078D4BDC4E4C638C9B" purpose="section1"><h2>
          Серверы <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, директории сервера и хранилище конфигураций</h2><p id="GUID-0971E9A0-F3F1-46CB-8C9F-8605D4994F38">Поскольку все <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> в конфигурациях с несколькими компьютерами имеют общее хранилище конфигураций и директории сервера, вам необходимо выбрать местоположение в сети для ваших директорий сервера и хранилища конфигураций.</p><p id="GUID-4DB61302-D4E6-46E6-808E-7164B2F4F834">Как правило, для учетной записи <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> выбирается доменная учетная запись, так как это упрощает управление правами доступа к данным сетевых ресурсов. Но в зависимости от вашей политики безопасности, вы можете использовать локальные учетные записи. Учетная запись <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> (локальная или доменная) должна иметь права доступа к сетевой папке, где находятся хранилище конфигураций и директории сервера. Более подробно см. в <a class="xref" target="_blank" rel="http://server.arcgis.com/ru/server/latest/administer/windows/accounts-used-by-arcgis-server.htm" href="http://server.arcgis.com/ru/server/latest/administer/windows/accounts-used-by-arcgis-server.htm">Учетные записи, используемые в ArcGIS Server</a>.</p><p id="GUID-93BA97C6-C3B8-40B1-B630-D7515B596705">Для сайта из нескольких компьютеров, все
компьютеры <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> изначально принадлежат к одному <a class="xref" target="_blank" rel="http://server.arcgis.com/ru/server/latest/administer/windows/about-gis-server-clusters.htm" href="http://server.arcgis.com/ru/server/latest/administer/windows/about-gis-server-clusters.htm">кластеру</a> с использованием порта 4004 и выше. В версии 10.4 новые установки <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> по умолчанию используют <a class="xref" target="_blank" rel="http://server.arcgis.com/ru/server/latest/administer/windows/about-single-cluster-mode.htm" href="http://server.arcgis.com/ru/server/latest/administer/windows/about-single-cluster-mode.htm">режим одного кластера</a>. Этот режим не включает функции балансировки нагрузки между компьютерами кластера. Это сокращает сетевой трафик между компьютерами сайта, уменьшает нагрузку на сеть и способствует улучшению мониторинга серверов <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> на вашем сайте. При обновлении до версии 10.4 этот режим включается для сайтов с одним кластером, которые в данный момент не используют режим одного кластера. Все настройки тех сайтов с одним кластером, которые используют режим одного кластера, и сайтов из нескольких кластеров более старых версий будут защищены от обновления.</p><p id="GUID-C73E2845-3685-476F-89D4-ECAF4CD564BF"> Если на сайте используется несколько кластеров, балансировка нагрузки происходит среди всех <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> внутри каждого кластера. По существу, кластеры – это независимые группы серверов <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, на которых обрабатываются свои выделенные наборы сервисов.</p><p id="GUID-34659E5E-FAAD-4401-9537-A5F1AC6E06A5">Например, входящий запрос назначается доступному <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> кластера, даже если запрос был направлен к определенному компьютеру внутри или вне кластера. Этот <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> затем выполняет отрисовку карты, поиск адреса, запускает инструмент геообработки и т. д., а затем возвращает результаты клиенту. Если компьютер отключен или запрашиваемый сервис работает на другом кластере, запрос перенаправляется на кластер, где находится сервис. Компьютеры <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> в этом кластере распределяют нагрузку и соответственно обрабатывают запросы.</p></div><div class="section1" id="ESRI_SECTION1_C7F80C1007D54987BF3840B98E882D73" purpose="section1"><h2>Данные</h2><p id="GUID-94BC57DE-FF98-4D4A-9413-76864F40BAF0"> Как уже было показано в других сценариях развертывания, при использовании файловых данных настоятельно рекомендуется использовать локальные ресурсы для компьютера <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>. Несмотря на неудобство, заключающееся в том, что вы вынуждены копировать свои данные по всем <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, это уменьшает сетевой трафик и способствует увеличению производительности ваших сервисов. Необходимо иметь ввиду этот вариант и использовать его, когда это возможно. Использование локальных данных на всех компьютерах зачастую диктуется размером ваших данных и частотой их обновления.</p><p id="GUID-9A8C2A8C-9556-418C-82CF-50DE0DA17ABA"> При такой схеме развертывания для пользования базами данных важно, чтобы у вас всегда было соответствующее аппаратное обеспечение. Держите уровень баз данных отдельно от уровня <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>.</p></div><div class="section1" id="ESRI_SECTION1_A17AE34D1AE247CBA500E675632500D9" purpose="section1"><h2>Web Adaptor</h2><p id="GUID-7B8EADD6-0069-4F41-8C1A-D6C307FADF84"> В этой конфигурации клиенты <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> никогда не подключаются к вашим серверам <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> напрямую. Вместо этого они подключаются через Web Adaptor, который обеспечивает функции безопасности и делает весь ваш сайт более устойчивым к сбоям.</p><p id="GUID-0CAB3CA5-A75E-46C9-A5A1-CB507DD730D9">
          С точки зрения безопасности не рекомендуется использовать один и тот же канал и для использования, и для администрирования сайта. Как правило, административные задачи работают только в частях вашей сети или на отдельных компьютерах, непосредственно обращающихся к вашим
<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, например, через порт 6080 или 6443. Это можно обойти, задав доступ к Administrator Directory сервера только с определенных IP-адресов. За это отвечает свойство <span class="usertext">allowedAdminAccessIPs</span> в <a class="xref" target="_blank" rel="http://resources.arcgis.com/ru/help/arcgis-rest-api/02r3/02r3000001t9000000.htm" href="http://resources.arcgis.com/ru/help/arcgis-rest-api/02r3/02r3000001t9000000.htm">параметрах безопасности сервера</a>.  О настройке этого параметра для ограничения доступа к серверу см. пример в разделе <a class="xref" target="_blank" rel="http://resources.arcgis.com/ru/help/arcgis-rest-api/02r3/02r3000001rw000000.htm" href="http://resources.arcgis.com/ru/help/arcgis-rest-api/02r3/02r3000001rw000000.htm">Обновление конфигурации безопасности</a>.</p><p id="GUID-601E6805-D64B-49FD-B341-95C745E65B85">Запросы от клиентских приложений всегда направляются через <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span>, который можно настроить так, чтобы он блокировал использование любых конечных точек администратора.  О том, как это сделать, см. в разделе <a class="xref" target="_blank" rel="http://server.arcgis.com/ru/server/latest/administer/windows/configure-arcgis-web-adaptor-after-installation.htm" href="http://server.arcgis.com/ru/server/latest/administer/windows/configure-arcgis-web-adaptor-after-installation.htm">Настройка ArcGIS Web Adaptor после установки</a>.</p><p id="GUID-496C6DF8-01F3-4F5A-AD5E-E5738E2EC12A">
          <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> также располагает средствами для того, чтобы интегрировать <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> со стандартными методами аутентификации, используемыми в вашей организации. Это небольшой компонент, который устанавливается на вашем собственном веб-сервере и работает как обратный прокси к вашим серверам <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>. Список поддерживаемых веб-серверов имеется в разделе <a class="xref" rel="01n1/01n100000034000000.htm" href="01n1/01n100000034000000.htm">Системные требования ArcGIS Web Adaptor</a>.   Если в настройках безопасности <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> будет выбрана аутентификация на веб-уровне (в противоположность аутентификации на уровне ГИС), то <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> будет делегировать функции аутентификации вашему веб-серверу.</p><p id="GUID-9644EFAC-A720-430A-8030-A706250F81D9">Несколько экземпляров Web Adaptor можно настроить с вашим сайтом так, чтобы на нем поддерживалось несколько разных методов аутентификации. Дополнительные сведения см. в разделе <a class="xref" target="_blank" rel="http://server.arcgis.com/ru/server/latest/administer/windows/supporting-a-mix-of-public-and-private-services.htm" href="http://server.arcgis.com/ru/server/latest/administer/windows/supporting-a-mix-of-public-and-private-services.htm">Поддержка смешанных публичных и частных сервисов</a>.</p><p id="GUID-F33529F9-1C9D-44E5-A321-6B25D384E8BC">
          <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> также служит балансировщиком нагрузки сайта. <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> будет перенаправять запросы к объединенным <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, следуя алгоритму балансировки нагрузки "опрос по кругу". <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> будет также автоматически обнаруживать и направлять запросы на любой новый <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, который будет добавлен на сайт, или приостановит отправку запросов на компьютеры, которые недоступны или удалены с сайта.</p></div><div class="section1" id="ESRI_SECTION1_343DCCE07E654E70A6E008C7ED2A06B9" purpose="section1"><h2>Соображения высокой доступности</h2><p id="GUID-998AC748-0092-4EEE-B685-03413A6E1872"> С высокой степенью вероятности такой сценарий развертывания увеличит избыточность на уровне Web Adaptor, как показано на следующем рисунке. При настройке нескольких экземпляров Web Adaptor с сайтом каждый из них будет направлять запросы по кругу на все компьютеры <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> вашего сайта.</p><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-EC903B01-4355-4D5E-B61E-A3E9F8C4680F-web.png" purpose="img" alt="Сайт с несколькими компьютерами с избыточностью на уровне Web Adaptor" title="Сайт с несколькими компьютерами с избыточностью на уровне Web Adaptor"></td></tr><tr><td><div class="caption" purpose="caption">Сайт с несколькими компьютерами с избыточностью на уровне Web Adaptor.  Каждый Web Adaptor будет по кругу выполнять рассылку запросов на компьютеры сайта.</div></td></tr></table></div><p id="GUID-3C9C0129-546C-4DFF-9E69-75768E29042B"> Необходимо учитывать необходимость устранения отдельных точек сбоев в данных, хранилище конфигураций и в директориях сервера.</p><p id="GUID-6E4A965E-EDA1-42FC-BE08-8072B3707092"> Проблему можно решить посредством копирования файловых наборов данных на всех серверах <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, хотя это и не всегда будет возможно из-за того, что файлы или их размеры могут часто изменяться. Если вы будете использовать общие сетевые папки для файловых наборов данных, убедитесь, что настройки вашего хранилища имеют параметр "высокая доступность".</p><p id="GUID-FBF7DE41-1102-4295-97A3-37E561C2979E"> Базы данных, которые поддерживаются ArcGIS, также поддерживают разные уровни конфигурации высокой доступности. Обратитесь к конфигурации базы данных для кластеризации уровня базы данных.</p><p id="GUID-1E454F1D-E20C-4422-9389-8E52D4856C6A"> В данном сценарии развертывания хранилище конфигурации и директории сервера должны всегда храниться в сетевой папке. Если необходима конфигурация высокой доступности, убедитесь в соответствующей настройке этого уровня.</p></div><div class="section1" id="ESRI_SECTION1_7D80FDD6984A4CB89673169EC202AE9B" purpose="section1"><h2>Достоинства</h2><ul purpose="ul" id="UL_95A679B9F76D4BF689C7D662788FF04D"><li purpose="li" id="LI_282DE4C9AD6B4A4988654E435162F3EB">Один отдельный сайт <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> располагает средствами, которые позволяют с легкостью администрировать <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> и его сервисы на множестве компьютеров.</li><li purpose="li" id="LI_27251CF49540483AB4F13EA8C01AE620"> Производительность сайта легко регулируется добавлением или удалением компьютеров <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>.</li><li purpose="li" id="LI_771CF22F97D84BABBF6A2695DEBED2F2">Выполняется балансировка нагрузки между серверами <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>.</li><li purpose="li" id="LI_B221E6281A344C07B9F5EB30C145FBA4">Интегрирование стандартного метода аутентификации организации с помощью аутентификации веб-уровня через <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span>.</li></ul></div>
<div class="section1" id="ESRI_SECTION1_41EFAD1B165B4AD7BB2360CACBFE3F46" purpose="section1"><h2>Недостатки</h2><ul purpose="ul" id="UL_374A7525DA254583BD93C34CA24E3731"><li purpose="li" id="LI_D61CAD7C8A24463CAD02FB86848594B9">Использование директорий и данных сервера в общедоступных местоположениях в сети может оказать негативное влияние на производительность сервисов с высокой нагрузкой.</li></ul></div>
<div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>