<html lang="zh-cn" xml:lang="zh-cn"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="在使用 Web 层身份验证时需配置 ArcGIS Web Adaptor 系统内存缓存。"><meta name="content-language" content="zh-cn"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - 
配置 ArcGIS Web Adaptor 内存缓存选项
</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-070AFEC5-DE9F-49D1-9019-C5350B73D24F]--><body><div id="content"><div class="header"><h1>
配置 ArcGIS Web Adaptor 内存缓存选项
</h1><div id="breadcrumb"></div></div>
<p id="GUID-B6D4217C-6336-442A-B229-7FA63AE8931E">经验证的用户访问 ArcGIS Server 资源且已通过 <span purpose="ph" translate="no" varid="WebAdaptforArcGISIIS">ArcGIS Web Adaptor (IIS)</span> 启用了 Web 层身份验证时，Web Adaptor 会从活动目录检索用户的角色成员列表。反复调用活动目录来获取用户的角色列表会对活动目录和 ArcGIS Server 的性能产生负面影响。为优化性能，Web Adaptor 会缓存用户所属角色的列表。</p><p id="GUID-1CDC5BEE-8AAD-41B2-94FD-49D5E74EBF3E">  对于 <span purpose="ph" translate="no" varid="WebAdaptforArcGISIIS">ArcGIS Web Adaptor (IIS)</span> 的开箱即用安装，用户的角色将缓存在 web 浏览器管理的 cookie 中或托管 Web Adaptor 的 Web 服务器主系统内存 (RAM) 中。如果用户角色列表的大小小于 4KB，列表将保存在 web 浏览器的 cookie 中。如果列表大于等于 4KB，则将在系统内存中管理。</p><p id="GUID-EA9D29F6-6927-4812-814E-C85A6257BE3A"> 如果用户的角色列表存储在 web 浏览器的 cookie 缓存中，将在一分钟后过期。有关用户角色列表的 <span purpose="ph" translate="no" varid="WebAdaptforArcGISIIS">ArcGIS Web Adaptor (IIS)</span> 系统内存缓存内容可以进行配置，其属性可在 <span class="usertext">C:\inetpub\wwwroot\{Web Adaptor name}\WebAdaptor.config</span> 文件定义的 <span class="usertext">RoleCache</span> 元素中管理。以下部分将介绍 <span class="usertext">RoleCache</span> 元素及其属性。</p><div class="codeblock" purpose="codeblock"><div class="codeblockdesc" purpose="codeblockdesc"></div><div class="highlight"><pre><code>&lt;RoleCache&gt;
    &lt;NumberOfUsers&gt;100&lt;/NumberOfUsers&gt;
    &lt;Expiration&gt;5&lt;/Expiration&gt;
    &lt;Enabled&gt;true&lt;/Enabled&gt;
    &lt;CacheAllRolesInMemory&gt;false&lt;/CacheAllRolesInMemory&gt;
&lt;/RoleCache&gt;
</code></pre></div>
</div>
<div class="block_table" id="TABLE_EF8BAAF0FDF64239B08FED5D5B915E86" purpose="block_table"><span class="table_title"></span><table class="table"><colgroup width="*"></colgroup><colgroup width="*"></colgroup><tbody><tr><td purpose="entry" rowspan="1" colspan="1"><p id="GUID-D8F520D0-4B12-441C-8F71-C596237D681B"><b>属性</b></p></td><td purpose="entry" rowspan="1" colspan="1"><p id="GUID-DC30A72B-4E44-4F87-9C2B-1216823822B9"><b>说明</b></p></td></tr><tr><td purpose="entry" rowspan="1" colspan="1"><span class="usertext">NumberOfUsers</span></td><td purpose="entry" rowspan="1" colspan="1"><p id="GUID-2BC513E0-7140-441A-B05A-31195274C561">对于能够将其角色成员列表存储在系统内存中的用户，本属性将限制其数量。</p></td></tr><tr><td purpose="entry" rowspan="1" colspan="1"><span class="usertext">Expiration</span></td><td purpose="entry" rowspan="1" colspan="1"><p id="GUID-E5179A5F-CBC2-4246-B7F7-185B07C05539">该属性将定义用户列表可在系统内存中存储的时间（分钟）。建议最长不要超过一天（或 1440 分钟）。</p></td></tr><tr><td purpose="entry" rowspan="1" colspan="1"><span class="usertext">Enabled</span></td><td purpose="entry" rowspan="1" colspan="1"><p id="GUID-F8500AB5-C7AE-427A-973C-ABEF5F309003">该属性用于禁用系统内存缓存。建议不要禁用系统缓存。</p></td></tr><tr><td purpose="entry" rowspan="1" colspan="1"><span class="usertext">CacheAllRolesInMemory</span></td><td purpose="entry" rowspan="1" colspan="1"><p id="GUID-C237AC7D-3C6E-4E28-9B4E-A8B76EA87F42">如果该属性设置为 <span class="usertext">true</span>，将禁用 cookie 缓存，则只能使用系统内存来缓存所有用户的角色成员列表。</p></td></tr></tbody><caption class="table_desc"></caption></table></div><div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>