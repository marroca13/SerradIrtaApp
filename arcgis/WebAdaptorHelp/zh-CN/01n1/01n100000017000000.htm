<html lang="zh-cn" xml:lang="zh-cn"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="安装 ArcGIS Web Adaptor 后，必须对其进行配置以使用 ArcGIS Server 站点。"><meta name="content-language" content="zh-cn"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - 
配置 ArcGIS Web Adaptor</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-C0DDCC11-5FFE-48BD-BFB8-C954161098D2]--><body><div id="content"><div class="header"><h1>
配置 ArcGIS Web Adaptor</h1><div id="breadcrumb"></div></div>
<p id="GUID-213F47AB-43E1-4749-A84C-D394A1C46C52">安装 <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> 后，必须对其进行配置，以便与 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 站点配合使用。您可以从随 Web Adaptor 一起安装的配置网页或命令行实用程序来执行相关操作。作为一项安全性措施，您只能通过托管 Web Adaptor 的计算机访问配置页面和命令行实用程序。</p><p id="GUID-BE95A860-90B5-4C31-A132-444656BDEE80">打开配置页面时，会显示 Web Adaptor 的当前状态。这将指示之前是否已对 Web Adaptor 进行配置。要查看 Web Adaptor 的平台类型和版本号，请在配置页面上单击<span class="uicontrol">关于</span>。</p><p id="GUID-F2786ECC-D94D-4D29-B686-57325D977ACD">有关如何配置 Web Adaptor 的详细说明，请参阅以下部分之一。</p><div class="section1" id="GUID-25C6CEF4-8DC1-423C-8AFA-8A747014411B" purpose="section1"><h2>
从配置网页配置 Web Adaptor</h2><p id="GUID-789F5DA1-7630-48F1-83C6-B55E91305BBC">
  要从随软件安装的配置网页配置 Web Adaptor，请执行以下步骤。</p><div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="GUID-66166239-C259-4CE1-A18B-C9D9D6B36F3D"><div class="step_title">步骤：</div><ol>
<li purpose="step" id="GUID-CE7DFB6B-41E2-4207-9D2C-924A7CF7428D">
<span purpose="cmd" id="GUID-EDC8DC30-E458-4D88-AC36-3BBBC45C3B59">
在 web 浏览器中打开 Web Adaptor 配置页面。URL 为以下格式：<span class="usertext">http://webadaptorhost.domain.com/webadaptorname/webadaptor</span>。</span>
</li>
<li purpose="step" id="ESRI_STEP_1DA8586AA6914CEF8CE92CC838210945"><span purpose="cmd" id="GUID-CBF6FF3B-90C9-4783-96C0-2601EBFC511D">选择 <span class="uicontrol">ArcGIS Server</span>，然后单击<span class="uicontrol">下一步</span>。</span></li><li purpose="step" id="ESRI_STEP_B069515395EC407F91221F7F46CFC73D"><span purpose="cmd" id="GUID-0D11FD08-01DB-4A0D-83DB-D9F9CCA61E36">对于 <span class="uicontrol">ArcGIS Server URL</span>，请输入 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 站点中某一 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 计算机的 URL。该 URL 将用于查找参与到您站点中的所有计算机，并将 Web Adaptor 注册到这些计算机中。例如，URL 地址的格式应为 <span class="usertext">http://gisserver.domain.com:6080</span>。</span></li><li purpose="step" id="ESRI_STEP_B5B249B1FB114289BC6D7AF3FFF6ADAE"><span purpose="cmd" id="GUID-05A829D2-D8C4-4CF1-A6DE-649D323E65F2">为具有 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 站点管理权限的帐户提供用户名和密码。通常，您需使用主站点管理员帐户的用户名和您创建站点时定义的密码。如果您禁用了主站点管理员帐户，则需要指定具有站点管理权限的帐户。</span></li><li purpose="step" id="ESRI_STEP_413FB9FC65D944349A06D5C64B48B82D"><span purpose="cmd" id="GUID-94B97FE6-70A8-483C-8E8E-A29149C258FF">选择用户是否可以通过 Web Adaptor 管理站点。默认情况下，禁用通过 Web Adaptor 管理站点的功能。这是推荐选项。下面是此选项的一些注意事项:</span><ul purpose="choices" id="ESRI_CHOICES_929CD8B4C39749FE9EF753A6124B8515"><li purpose="choice" id="ESRI_CHOICE_7F2A1551D9724AB598205D6B7B285274">如果禁用管理，则会阻止外部用户通过 Web Adaptor 访问 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 管理器和 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 管理员目录。同时，也会阻止 <span purpose="ph" translate="no" varid="ArcGISforDesktop">ArcGIS Desktop</span> 用户与 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 建立管理连接或发布者连接。请注意，无论此选项是否禁用，您都仍可以建立从 <span purpose="ph" translate="no" varid="ArcGISforDesktop">ArcGIS Desktop</span> 到 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 的用户连接。</li><li purpose="choice" id="ESRI_CHOICE_0A87B409E97D4B0686826D269FA5E93C">如果禁用通过 Web Adaptor 的管理访问，您可以访问 Manager 和管理员目录，然后通过使用站点中某个 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 的直接 URL 在 <span purpose="ph" translate="no" varid="ArcGISforDesktop">ArcGIS Desktop</span> 中连接到服务器。例如<ul purpose="ul" id="UL_7D907DF6E13B4196BBE117EE00FC9C58"><li purpose="li" id="LI_63BFE045478D4C27B9704E2EE1ED0157">要访问 Manager，请使用以下 URL 格式 <span class="usertext">http://gisserver.domain.com:6080/arcgis/manager</span>。</li><li purpose="li" id="LI_70BD4E1CA1284AA49079A3BE379781E7">要访问 Administrator Directory，请使用以下 URL 格式 <span class="usertext">http://gisserver.domain.com:6080/arcgis/admin</span>。</li><li purpose="li" id="LI_8ECAFAB9B7BE4898AA6CDE996047B87C">要在 <span purpose="ph" translate="no" varid="ArcGISforDesktop">ArcGIS Desktop</span> 中创建服务器连接，请使用以下 URL 格式 <span class="usertext">http://gisserver.domain.com:6080/arcgis</span>。</li></ul></li><li purpose="choice" id="ESRI_CHOICE_B43AE3DE47D74BE09D68172FE02D6084">如果 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 配置了 Web 层身份验证，则必须通过 Web Adaptor 启用管理。这可使企业标识存储中具有发布者和管理员权限的用户通过 <span purpose="ph" translate="no" varid="ArcGISforDesktop">ArcGIS Desktop</span> 来发布服务。具有这些角色的用户连接到 <span purpose="ph" translate="no" varid="ArcGISforDesktop">ArcGIS Desktop</span> 中的服务器时，必须指定 Web Adaptor URL。</li></ul></li><li purpose="step" id="ESRI_STEP_2C63B6B0E239423AABB1203B373EE11D"><span purpose="cmd" id="GUID-5086FD60-C95C-4709-AB2E-B9897F9D45D8">单击<span class="uicontrol">配置</span>，将您的设置应用于 Web Adaptor。</span></li></ol></div></div><p id="GUID-2AAD61C4-CE80-4EC3-A073-0AD76F3D43CF">如果配置成功，则将在配置页面的底部显示一列由 Web Adaptor 识别的 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 计算机（以绿色高亮显示）。您可随时返回到此页面来查看已识别的计算机列表并调整 Web Adaptor 的设置。</p></div><div class="section1" id="GUID-0C0A752F-94C1-41C9-8909-B77A567C360F" purpose="section1"><h2><span purpose="ph">从命令行配置 Web Adaptor</span></h2><p id="GUID-78582F50-0436-4583-8C93-DB578512E629">您可以使用 <span class="usertext">C:\Program Files (x86)\Common Files\ArcGIS\WebAdaptor\IIS\Tools</span> 中的命令行实用程序 (<span class="usertext">ConfigureWebAdaptor.exe</span>) 配置 Web Adaptor。</p><p id="GUID-37E75F7B-B86D-4BC1-8E15-3FCBD4B95291">可用参数包括：</p><p id="GUID-AB9651F2-FDFD-4331-974C-F91B35D64622"><span class="usertext">ConfigureWebAdaptor.exe</span>  <span class="usertext">/m &lt;Mode&gt;</span> <span class="usertext">/w &lt;WebAdaptorURL&gt;</span> <span class="usertext">/g &lt;URL&gt;</span>   <span class="usertext">/u &lt;Username&gt;</span> <span class="usertext">/p &lt;Password&gt;</span> <span class="usertext">/a &lt;AdminAccessEnabled&gt;</span></p><ul purpose="ul" id="UL_CF9E020C92454670B241A29045AC1A0E"><li purpose="li" id="LI_CAEFA6C8D7D3455E927CA27DDBB2583C"><p id="GUID-85AAB02F-AAD2-432E-BFBC-C60C8275EF40"><span class="usertext">&lt;Mode&gt;</span> - 配置 Web Adaptor 时所使用的产品模式。默认情况下，此参数设置为 <span class="usertext">server</span>，表示将 Web Adaptor 配置为与 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 配合使用。如果您要将 Web Adaptor 配置为与 <span purpose="ph" translate="no" varid="PortalForArcGIS">Portal for ArcGIS</span> 配合使用，请将此参数指定为 <span class="usertext">portal</span>。</p></li><li purpose="li" id="LI_B47FD1C18212459F89CF3DB3121EED32"><p id="GUID-A8EB9738-FC4E-4E20-9195-3D431AE74AD7"><span class="usertext">&lt;WebAdaptorURL&gt;</span> - 您想从命令行配置的 Web Adaptor 的 URL。如果您要在 Web 浏览器中访问 Web Adaptor 配置页面，则使用此 URL。如果 Web Adaptor 安装在默认 80 之外的其他端口上，则需要在 URL 中指定端口。</p></li><li purpose="li" id="LI_0BABFC6F454541F796D77D42C01FD339"><p id="GUID-9C040A84-A2AE-4B5D-89F3-EFB1F62883A8"><span class="usertext">&lt;URL&gt;</span> - <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 站点中某一 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 计算机的 URL。该 URL 将用于查找参与到您站点中的所有计算机，并将 Web Adaptor 注册到这些计算机中。</p></li><li purpose="li" id="LI_0FD4616B719B49659051EDD859287646"><p id="GUID-590AFFC3-B603-48D8-A59D-54B985B2CE30"><span class="usertext">&lt;Username&gt;</span> - 拥有 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 站点管理权限的帐户的用户名。通常，您需使用创建站点时定义的主站点管理员的帐户。</p></li><li purpose="li" id="LI_0A11FA694EF348829443F97C62B0F6F0"><p id="GUID-9E7DE81E-08A8-47FE-8E98-92614B1CE87B"><span class="usertext">&lt;Password&gt;</span> - 拥有 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 站点管理权限的帐户的密码。通常，您需使用创建站点时定义的主站点管理员的帐户。</p></li><li purpose="li" id="LI_A62FA91E33024BB588C079E22496F677"><p id="GUID-079D447F-9FDD-409F-9A72-11A6227E83B4"><span class="usertext">&lt;AdminAccessEnabled&gt;</span> - 指示是否可以通过 Web Adaptor 使用 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 管理器和 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 管理员目录。作为一项安全性措施，默认情况下此参数设置为 <span class="usertext">false</span>。要启用管理访问权限，可将此参数设置为 <span class="usertext">true</span>。</p></li></ul><p id="GUID-A23D4A3A-69E0-41EA-B4FC-16190ED8816B">例如：<span class="usertext">ConfigureWebAdaptor.exe /m server /w http://webadaptorhost.domain.com/webadaptorname/webadaptor /g http://gisserver.domain.com:6080 /u siteadmin /p secret /a false</span></p><div class="notes" id="GUID-399CABCC-E244-4098-82B9-DDE94E26E0B8"><div class="legacy"><img class="note_img" src="rsrc/legacy.png" alt="旧版本" title="旧版本"><span>旧版本：</span></div><div class="tipbody"><p id="GUID-CF0F0502-C691-49FE-A756-3A0AB63A2C7B">在 10.2 和更低版本中，需将 <span class="usertext">/server</span> 追加到 Web Adaptor URL 参数的末尾，例如 <span class="usertext">/w http://webadaptorhost.domain.com/webadaptorname/webadaptor/server</span>。在 10.2.1 和更高版本中，不再需要执行此操作。</p></div></div></div><div class="section1" id="GUID-37C99484-8292-4E4B-8D7A-C3741F83592E" purpose="section1"><h2>配置 Web Adaptor 之后</h2><p id="GUID-E7A2D578-75AC-4B04-BA3A-BBC1B90883DC">现在，Web Adaptor 已经配置可供使用，接下来，您需要考虑以下一些重要事项：</p><div class="section2" id="ESRI_SECTION2_4612086520DF47C6819B3ED330E9C65C" purpose="section2"><h3>添加或移除 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 计算机</h3><p id="GUID-3AA0A2B3-DF17-4399-85BE-6DE074443183">如果从站点中添加或移除 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 计算机，Web Adaptor 需要花费一分钟的时间来识别站点的更改。如果希望 Web Adaptor 立即识别已添加或移除的计算机，可以按照上述说明重新进行配置。</p></div><div class="section2" id="ESRI_SECTION2_3F7D0FB4F9E643E1A27485F1F0BD1543" purpose="section2"><h3>安装多个 Web Adaptor</h3><p id="GUID-C3C4E785-8F8F-45CE-9298-4E26EC6ABA9D"> 您可以通过安装多个 Web Adaptor 来提供 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 站点的不同 web 入口点。这样做可以使站点对客户端具有更高的可用性，为传统应用程序提供支持，或者允许在高度安全的环境中向特定用户授予发布及管理权限。有关详细信息，请参阅<a class="xref" rel="01n1/01n10000000m000000.htm#ESRI_SECTION2_B92A04F854F147EFABEA3AF96A78C4D3" href="01n1/01n10000000m000000.htm#ESRI_SECTION2_B92A04F854F147EFABEA3AF96A78C4D3">部署方案</a>。</p><p id="GUID-A7C14E7E-DCB0-4A94-8A57-45EC38B90652"> 可以同时在同一台计算机上安装多个 Web Adaptor，或在多个单独的计算机上执行此安装。如果要在同一个站点（端口）安装多个 Web Adaptor，它们需要使用不同的名称。例如，名为 <span class="usertext">arcgis</span> 的两个 Web Adaptor 不能存在于同一个网站中。如果需要多个同名 Web Adaptor，则需在不同的站点（端口）安装它们。</p></div><div class="section2" id="ESRI_SECTION2_F7117AF9CB8B47DFA41D7E994E08D1FF" purpose="section2"><h3>在 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 上启用 HTTPS</h3><p id="GUID-E3A5A6C8-9346-4AC8-BD75-6A9026FF73D8"> 默认情况下，<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 使用 HTTP 和 HTTPS 协议进行通信。如果将 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 的通信协议更新到仅 HTTP 或仅 HTTPS，则 Web Adaptor 需要一分钟的时间来识别对站点所做的更改。</p><div class="notes" id="GUID-34B136ED-D539-448F-A8EC-F44DC8925B64"><div class="legacy"><img class="note_img" src="rsrc/legacy.png" alt="旧版本" title="旧版本"><span>旧版本：</span></div><div class="tipbody"><p id="GUID-36901280-7127-4D7F-8F35-00E9A5B10795">在 10.2.1 或更低版本中，您需要在更新 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 的通信协议后重新配置 ArcGIS Web Adaptor。在 10.2.2 和更高版本中，无需再执行此操作。</p></div></div><p id="GUID-74F8EE7C-0DBB-4D56-9DCB-327E0B9F41D2">要了解有关 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 通信协议的详细信息，请参阅<a class="xref" target="_blank" rel="http://server.arcgis.com/zh-cn/server/latest/administer/windows/secure-arcgis-server-communication.htm" href="http://server.arcgis.com/zh-cn/server/latest/administer/windows/secure-arcgis-server-communication.htm">确保 ArcGIS Server 通信的安全性</a>。</p></div></div><div class="section1" id="GUID-81CE6E1D-6A9B-48B9-9586-2634B5CAB04C" purpose="section1"><h2>

</h2><p id="GUID-6136B5DD-D055-44DE-B970-0C98FF05D867">有关如何安装多个 Web Adaptor 的详细说明，请参阅<a class="xref" rel="01n1/01n100000016000000.htm" href="01n1/01n100000016000000.htm">安装多个 Web Adaptors</a>。</p></div>
<div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>