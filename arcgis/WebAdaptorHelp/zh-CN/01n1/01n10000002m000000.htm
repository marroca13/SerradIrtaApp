<html lang="zh-cn" xml:lang="zh-cn"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="HTTPS 协议是一项标准安全技术，用于在 Web 服务器与 Web 客户端之间建立加密连接。"><meta name="content-language" content="zh-cn"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - 
在 Web 服务器上启用 HTTPS</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-ACA8EEAB-293E-4892-8B7E-9397264A6014]--><body><div id="content"><div class="header"><h1>
在 Web 服务器上启用 HTTPS</h1><div id="breadcrumb"></div></div>
<p id="GUID-2BA75BF9-0150-4074-BB9D-F712637AABFF">HTTPS 协议是一项标准安全技术，用于在 Web 服务器与 Web 客户端之间建立加密连接。HTTPS 通过对服务器进行识别和验证以及确保所有传输数据的隐私和完整性来实现安全网络通信。由于 HTTPS 可防止窃听或篡改通过网络发送的信息，所以应对任何登录或身份验证机制以及任何包含保密信息或私有信息的网络通信应用 HTTPS。</p><p id="GUID-C75DB9CA-EF0E-4071-83A3-998511312AFC">使用 HTTPS 可确保名称、密码及其他敏感信息在 <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> 和服务器之间发送时不会被解密。使用 HTTPS 时，将使用 HTTPS 协议替代 HTTP 协议来连接 web 页面和资源。</p><p id="GUID-F679CE35-9EFA-44B1-AA21-1EC48266E69F">要使用 HTTPS，您需要获取服务器证书，并将其绑定到托管 <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> 的网站。每个 Web 服务器都有自己的程序用于加载证书并将其绑定到网站。</p><p id="GUID-8338655B-D368-4CCA-8E93-15FF33A2C7F5">此外，还要确保 web 服务器已设置为忽略客户端证书，以便通过 HTTPS 正确访问安全服务。</p><div class="section1" id="GUID-785B4C5F-085D-4297-9AEA-67983BC08354" purpose="section1"><h2>
创建服务器证书</h2><p id="GUID-9D19EEED-5546-4A34-8529-D79B67B47352">
要能够在 <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> 和服务器之间创建 HTTPS 连接，Web 服务器需要服务器证书。证书是一个数字文件，包含有关 Web 服务器标识的信息。它还包含建立 Web 服务器和 ArcGIS Server 之间的安全通道时要使用的加密方法。证书必须由网站和数字签名的所有者创建。下面将介绍三种类型的证书 - CA 签名证书、域证书以及自签名证书。</p><div class="section2" id="ESRI_SECTION2_B89E43031B974D188D07F92121765C41" purpose="section2"><h3>CA 签名证书</h3><p id="GUID-83FE3C84-5F63-4236-A1A7-7E187A4D0998">证书颁发机构 (CA) 签名证书可用于生产系统，特别是用于组织外的用户访问 ArcGIS Server 部署。例如，如果服务器未设置防火墙保护且可经由 Internet 对其进行访问，则使用 CA 签名证书可向来自组织外部的客户端确保网站身份已进行过安全验证。</p><p id="GUID-279CB780-6191-4422-8222-DAF7B3EB427E">除了由网站所有者签名以外，证书还可由独立的 CA 进行签名。CA 通常是一个受信任的第三方机构，可用于证实网站的真实性。如果网站值得信任，CA 会将其自己的数字签名添加到该网站的自签名证书。这可担保网站标识已经验证过的 Web 客户端。</p><p id="GUID-F3F43E4C-31EB-4044-97FA-51C81B87B59D">使用由著名 CA 颁发的证书时，服务器和 Web 客户端之间的安全通信将自动进行而无需用户执行任何特殊操作。由于网站已由 CA 进行安全验证，因此 Web 浏览器中不会显示任何异常行为或警告消息。</p></div><div class="section2" id="ESRI_SECTION2_687826F11C604E38BAE007786F342346" purpose="section2"><h3>域证书</h3><p id="GUID-C915BA02-ED9C-47E0-8DEC-09CC1C746515"> 如果服务器已设置防火墙保护且无法使用 CA 签名证书，则使用域证书为可行的解决方案。域证书是由组织的证书颁发机构签名的内部证书。使用域证书有助于降低颁发证书的成本以及简化证书部署，因为证书可在组织内针对受信任的内部使用快速生成。</p><p id="GUID-24E5A858-4657-496C-B107-C41DA4AD9042">域内用户通常不会收到与自签名证书相关的异常行为或警告消息，因为网站已由域证书进行过安全验证。但是，域证书并不是由外部 CA 进行验证，即访问站点的域外用户无法验证证书是否真的如所宣称那样代表某一方。外部用户将看到有关站点不受信任的浏览器警告，这可能导致用户认为正与恶意方进行通信从而退出您的站点。</p><div class="section3" id="ESRI_SECTION3_8DB486A77CA74D9CB4E95ECFC646FDBA" purpose="section3"><h4>在 IIS 中创建域证书</h4><p id="GUID-5C923A3E-0893-449B-B313-8423CD683FE4">在 IIS 管理器中，按照以下方法创建域证书：</p><div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_C7ECAB12725B49E2B285BB2212190EE2"><div class="step_title">步骤：</div><ol><li purpose="step" id="ESRI_STEP_29A4307BFCF8438D8E09C4F464EDA280"><span purpose="cmd" id="GUID-53C3E3B7-C9F5-4F1F-A37C-4AA18FD794A3">在<span class="wintitle">连接</span> 窗格中，于树视图中选择您的服务器，然后双击<span class="uicontrol">服务器证书</span>。</span><div class="info" purpose="info"><p id="GUID-4911C1FB-1F8D-485B-B4A2-21EB76BA114A"><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-CEB106EE-085F-487D-B723-330BC3388557-web.jpg" purpose="img" alt="IIS 管理器中的服务器证书图标" title="IIS 管理器中的服务器证书图标"></td></tr></table></div></p></div></li><li purpose="step" id="ESRI_STEP_90BD76AC7D8E4190A07DF4A1AB26BFE8"><span purpose="cmd" id="GUID-EDE18D50-44D2-4B1D-B071-7FEB7DEC0DC9">在<span class="wintitle">操作</span> 窗格中，单击<span class="uicontrol">创建域证书</span>。</span><div class="info" purpose="info"><p id="GUID-ABC07EE3-6A1B-45BD-8580-A3118AC1B0DC"><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-531FAB13-86B2-4E47-98B8-5094F47D34FB-web.png" purpose="img" alt="在 IIS 管理器中创建域证书链接" title="在 IIS 管理器中创建域证书链接"></td></tr></table></div></p></div></li><li purpose="step" id="ESRI_STEP_57EDFDEFBB6E46278F07C34A989F7B08"><span purpose="cmd" id="GUID-6E13C609-BE9A-446E-B3C6-20F928655191">在<span class="wintitle">可分辨名称属性</span> 对话框中，输入证书的所需信息:</span><div class="substeps" id="ESRI_SUBSTEPS_24A37F03FD4447FE82D9013AFE522905" purpose="substeps"><ol><li purpose="substep" id="ESRI_SUBSTEP_40D86F2C95AB4817AAA718319BA80BAA"><span purpose="cmd" id="GUID-12800908-08EB-4F46-AF27-0BB716CAD383">针对<span class="uicontrol">常用名称</span>，必须输入计算机的全限定域名称，如 <span class="usertext">gisserver.domain.com</span>。</span></li><li purpose="substep" id="ESRI_SUBSTEP_D8719BF9BD474DA3925A96FB6D253AFF"><span purpose="cmd" id="GUID-9F35022E-CC2F-48AA-9BC5-BE5735A2671E">对于其他属性，请输入组织和位置的具体信息。</span></li></ol></div></li><li purpose="step" id="ESRI_STEP_CA345F8E72334B7F8A14BF4DF6E9DD55"><span purpose="cmd" id="GUID-731CA486-E2A3-4BDC-90BB-E2DCDF9575FD">单击<span class="uicontrol">下一步</span>。</span></li><li purpose="step" id="ESRI_STEP_7EBB8F0C806F404CAD1C8FBB44A0F17E"><span purpose="cmd" id="GUID-A56E7C49-267C-42B7-92DB-231EA7F0CA00">在<span class="wintitle">在线证书颁发机构</span> 对话框中，单击<span class="uicontrol">选择</span>，并选中将在域内签发证书的证书颁发机构。如果此选项不可用，则请在<span class="uicontrol">指定在线证书颁发机构</span>字段中输入域证书颁发机构，如<span class="usertext">City Of Redlands Enterprise Root\REDCASRV.empty.local</span>。如需此步骤的帮助，请咨询系统管理员。</span><div class="info" purpose="info"><p id="GUID-6DACCDF3-AD85-48B8-B9F2-2DAE9D57F127"><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-86A49A2E-285F-4D31-9617-091016B3F6F3-web.png" purpose="img" alt="IIS 管理器中的“在线证书颁发机构”对话框" title="IIS 管理器中的“在线证书颁发机构”对话框"></td></tr></table></div></p></div></li><li purpose="step" id="ESRI_STEP_E53F897B748644B58F3E445DD1CF929E"><span purpose="cmd" id="GUID-21F1EF44-FC5A-4CF1-8F26-A2A762B99BD6">为域证书输入一个简明易懂的名称，然后单击<span class="uicontrol">完成</span>。</span></li></ol></div><div class="result" id="ESRI_RESULT_B14F099C32A04FF28F9BB92F478C84B5" purpose="result"><p id="GUID-F22639B5-6D45-4272-923C-807988F7A751">最后请将域证书绑定到 HTTPS 端口 443。有关此操作的详细说明，请参阅下面的<span class="uicontrol">将证书绑定到站点</span>。</p></div></div></div></div><div class="section2" id="ESRI_SECTION2_EE5D2BB7BDB844EB8B3F15A9774975DB" purpose="section2"><h3>自签名证书</h3><p id="GUID-A273BB9B-83F2-49B9-A79A-053BA864C975">仅由网站所有者签名的证书称为自签名证书。自签名证书通常用于仅对组织内部 (LAN) 网络上的用户可用的网站上。如果与外部网络中的使用自签名证书的网站进行通信，您将无法验证颁发证书的站点是否确实代表其声称代表的一方。您可能实际上正与恶意方进行通信，使您的信息处于危险之中。</p><div class="section3" id="ESRI_SECTION3_54C55BB5349146C28CBFA09AC0191C89" purpose="section3"><h4>在 IIS 中创建自签名证书</h4><p id="GUID-F3002672-B32C-4BCA-9427-D8F0A458A182">在 IIS 管理器中，按照以下方法创建自签名证书：</p><div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_C4E47853EFB54B3EBF307CBEA713CE01"><div class="step_title">步骤：</div><ol><li purpose="step" id="ESRI_STEP_78502F379BB14228918C11CA7FB2A7FF"><span purpose="cmd" id="GUID-056F26E2-9B5E-4921-802F-458161622AD7">在<span class="wintitle">连接</span> 窗格中，于树视图中选择您的服务器，然后双击<span class="uicontrol">服务器证书</span>。</span><div class="info" purpose="info"><p id="GUID-81A19C26-0BCE-4D91-B8F9-F7D0F26D384F"><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-CEB106EE-085F-487D-B723-330BC3388557-web.jpg" purpose="img" alt="IIS 管理器中的服务器证书图标" title="IIS 管理器中的服务器证书图标"></td></tr></table></div></p></div></li><li purpose="step" id="ESRI_STEP_91FDECCA3A5C4763909CEA682851854B"><span purpose="cmd" id="GUID-3CFF9A30-6C7E-49CF-86B4-CE2DA194235D">在<span class="wintitle">操作</span> 窗格中，单击<span class="uicontrol">创建自签名证书</span>。</span><div class="info" purpose="info"><p id="GUID-CD1BED4A-F800-43F0-BAEC-E197504B03BC"><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-E6517557-3953-408A-948C-56C223DF774F-web.jpg" purpose="img" alt="在 IIS 管理器中创建自签名证书链接" title="在 IIS 管理器中创建自签名证书链接"></td></tr></table></div></p></div></li><li purpose="step" id="ESRI_STEP_782899B3E3CC487A96E4F7D6A491EA16"><span purpose="cmd" id="GUID-ECFC2085-5DBF-4353-A85A-82A56C68B4DC">为新证书输入一个简明易懂的名称，然后单击<span class="uicontrol">确定</span>。</span></li></ol></div><div class="result" id="ESRI_RESULT_0A71E9F1487F40E381A9DA3E8CA4A295" purpose="result"><p id="GUID-A3E04ABF-0953-4897-9C10-3BEED876FAFD">最后请将自签名证书绑定到 HTTPS 端口 443。有关此操作的详细说明，请参阅下面的<span class="uicontrol">将证书绑定到站点</span>。</p></div></div></div></div></div>
<div class="section1" id="ESRI_SECTION1_BE7A330F475C4A38B5A54902F2302EE8" purpose="section1"><h2>将证书绑定到网站</h2><p id="GUID-E452DB07-F04B-40AD-931F-D8A1689762E2">在创建了证书后，需要将其绑定到托管 <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> 的网站。绑定可参考配置证书以在网站上使用端口 443 的过程。将证书与网站绑定的说明根据平台和 Web 服务器版本会有所不同。有关说明信息，请咨询系统管理员或参阅 Web 服务器的文档。<span purpose="ph" ishcondition="(srv_os=windows) or (srv_platform=dotnet)">例如，在 IIS 中绑定证书的步骤如下。</span></p><div class="section2" id="ESRI_SECTION2_95194E03F9484B4BA2B8A88DA26E88AA" purpose="section2"><h3>在 IIS 中将证书绑定至端口 443</h3><p id="GUID-FBEB7327-042A-435F-A520-1DD08B1EEF14">在 IIS 管理器中，按照以下方法将证书绑定至 HTTPS 端口 443:</p><div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_7A6F9ED814DD45B09FEC1A2A52788497"><div class="step_title">步骤：</div><ol><li purpose="step" id="ESRI_STEP_4750AC84882D499EB71144827F731488"><span purpose="cmd" id="GUID-19FD7BF0-15CF-4200-83AC-776B0933D658">在树视图和<span class="wintitle">操作</span> 窗格中选择您的站点，然后单击<span class="uicontrol">绑定</span>。</span><ul purpose="choices" id="ESRI_CHOICES_0F4ADDB79E594BF4A97600DCBE1DFB97"><li purpose="choice" id="ESRI_CHOICE_434E7F4762EA4D219AA63796CD73538E">如果绑定列表中的端口 443 不可用，请单击<span class="uicontrol">添加</span>。从<span class="uicontrol">类型</span>下拉列表中选择 <span class="uicontrol">https</span>。将端口设置为 443。<p id="GUID-66E4E4D8-F292-4441-98DF-B02DF02F6ED8"><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-D962B15F-5F12-4170-88BD-BBBDEBD36C87-web.jpg" purpose="img" alt="IIS 管理器中的站点绑定列表" title="IIS 管理器中的站点绑定列表"></td></tr></table></div></p></li><li purpose="choice" id="ESRI_CHOICE_0F336D7EB4364677B9CED96D0CE57A81">如果端口 443 已列出，请从该列表中选择此端口并单击<span class="uicontrol">编辑</span>。</li></ul></li><li purpose="step" id="ESRI_STEP_8C08EADA415E48D1B2A1928DB657F0C3"><span purpose="cmd" id="GUID-96540C5F-EA39-4297-A630-F18A522B60F5">从证书下拉列表中选择您的证书名称，然后单击<span class="uicontrol">确定</span>。</span><div class="info" purpose="info"><p id="GUID-18C60A7E-BFDD-4D29-84CA-2B6F03CEB214"><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-ACD6B980-2002-4708-8781-7F58B8E82CC7-web.jpg" purpose="img" alt="IIS 管理器中的新绑定" title="IIS 管理器中的新绑定"></td></tr></table></div></p></div></li></ol></div></div></div></div>
<div class="section1" id="ESRI_SECTION1_B238988DBBB14772B62FE651B2568ADE" purpose="section1"><h2>测试站点</h2><p id="GUID-7CA72D24-1215-4817-9E2D-AF1B2701D0F5">将证书绑定到网站后，可配置 Web Adaptor 以与服务器一同使用。您需要使用 HTTPS URL (如 <span class="usertext">https://webadaptorhost.domain.com/webadaptorname/webadaptor</span>) 访问 <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> 的配置页面。</p><p id="GUID-9CF112D4-885C-44F0-AFC5-7A1568F6FD87">配置 Web Adaptor 后，应通过向 ArcGIS Server Manager 发出 HTTPS 请求来测试 HTTPS 是否工作正常，如 <span class="usertext">https://webadaptorhost.domain.com/webadaptorname/manager</span>。</p></div><div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>