<html lang="fr" xml:lang="fr"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="Un site peut englober plusieurs machines ArcGIS Server pour gérer un trafic supplémentaire ou permettre une sauvegarde en cas de déconnexion d'une des machines ArcGIS Server."><meta name="content-language" content="fr"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - 
Déploiement sur plusieurs machines avec ArcGIS Web Adaptor</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-24EB1171-8DBB-4B71-8EB9-24D0AAE8D488]--><body><div id="content"><div class="header"><h1>
Déploiement sur plusieurs machines avec ArcGIS Web Adaptor</h1><div id="breadcrumb"></div></div>
<p id="GUID-5D4A77B3-8AB4-4C98-8563-2E46CDBAA8BB"> 
          
          <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> prend en charge la configuration de sites à plusieurs machines. Sur un site à plusieurs machines, il est possible d'administrer et d'utiliser au moins deux machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> en tant qu'unité logique unique. Les administrateurs d'<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> bénéficient alors d'une grande flexibilité pour ajuster aisément la puissance de calcul du site en ajoutant ou en supprimant des machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>. Les sites à plusieurs machines permettent également de simplifier la publication et la mise à jour de services sur plusieurs serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>.</p><p id="GUID-9BFAE792-E43E-421A-AE5A-359025AFC736">Dans le cadre d'un déploiement sur plusieurs machines, chaque serveur <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> doit présenter le même numéro de version pour que le site fonctionne correctement.  En outre, la même licence doit être appliquée à chaque serveur <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> du site.</p><p id="GUID-657D9CD2-9021-46BC-B0E0-5034765ACC43"> La configuration la plus simple d'un site à plusieurs machines implique celle d'un groupe d'au moins deux serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> pilotés par <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> qui est exécuté sur votre serveur d'applications Web.</p><p id="GUID-57F2C88A-E2E2-49E2-BD5E-67A66789C50A">
          <div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-79F9644A-D779-409B-9E1B-AF6CD5F50C4F-web.png" purpose="img" alt="Site avec plusieurs serveurs" title="Site avec plusieurs serveurs"></td></tr><tr><td><div class="caption" purpose="caption">Site avec plusieurs serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> où les données sont hébergées sur un serveur de données hautement disponible</div></td></tr></table></div></p><p id="GUID-67A0E652-13DF-47DE-88A9-6FE0F1F893DA">
           L'un des points clés des configurations à plusieurs machines est que tous les serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> partagent les mêmes emplacements de configuration et répertoires du serveur. Ainsi, un administrateur peut se connecter à tout serveur <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> à l'aide d'ArcGIS Server Manager et appliquer des modifications qui seront répercutées sur tous les ordinateurs du site. Ceci est utile lorsque vous souhaitez intégrer votre site via des méthodes d'authentification au niveau Web de votre organisation.</p><div class="section1" id="ESRI_SECTION1_02F47167CE3A4E078D4BDC4E4C638C9B" purpose="section1"><h2>
          Serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, répertoires du serveur et emplacement de configuration</h2><p id="GUID-0971E9A0-F3F1-46CB-8C9F-8605D4994F38">Puisque dans des configurations à plusieurs machines, tous les serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> partagent les mêmes emplacements de configuration et répertoires du serveur, vous devez sélectionner un emplacement réseau pour ces derniers.</p><p id="GUID-4DB61302-D4E6-46E6-808E-7164B2F4F834">Habituellement, un compte de domaine est choisi pour le compte <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> afin de simplifier la gestion des autorisations d'accès aux données des ressources réseau. Toutefois, selon vos stratégies de sécurité, vous pouvez choisir d'utiliser des comptes locaux. Le compte <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> (local ou de domaine) doit bénéficier d'un accès en écriture au partage réseau où se trouvent l'emplacement de configuration et les répertoires du serveur. Pour plus d'informations, reportez-vous à la rubrique <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/server/latest/administer/windows/accounts-used-by-arcgis-server.htm" href="http://server.arcgis.com/fr/server/latest/administer/windows/accounts-used-by-arcgis-server.htm">Comptes utilisés par ArcGIS Server</a>.</p><p id="GUID-93BA97C6-C3B8-40B1-B630-D7515B596705">Sur un site à plusieurs machines, toutes les machines
<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> appartiennent initialement à une seule <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/server/latest/administer/windows/about-gis-server-clusters.htm" href="http://server.arcgis.com/fr/server/latest/administer/windows/about-gis-server-clusters.htm">grappe</a> utilisant les ports 4004 et au-delà. Depuis la version 10.4, <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> utilise par défaut le <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/server/latest/administer/windows/about-single-cluster-mode.htm" href="http://server.arcgis.com/fr/server/latest/administer/windows/about-single-cluster-mode.htm">mode de grappe unique</a> pour les nouvelles installations. Ce mode n'inclut pas l'équilibrage de charge entre les machines de la grappe. Cela réduit le trafic réseau entre les machines du site et la charge sur le réseau, et cela aide à améliorer la surveillance des serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> sur votre site. Lors d'une mise à niveau vers la version 10.4, le mode sera activé pour les sites à une seule grappe qui n'utilisent pas le mode de grappe unique. Les paramètres des sites à une seule grappe qui utilisent déjà le mode de grappe unique et ceux des sites qui utilisent plusieurs grappes dans des versions antérieures seront conservés lors de la mise à niveau.</p><p id="GUID-C73E2845-3685-476F-89D4-ECAF4CD564BF"> Si votre site utilise plusieurs grappes, l'équilibrage de charge est géré parmi tous les serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> au sein de cette grappe. Pour l'essentiel, les grappes sont des groupes indépendants de serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> qui exécutent des ensembles dédiés de services.</p><p id="GUID-34659E5E-FAAD-4401-9537-A5F1AC6E06A5">Par exemple, une requête entrante est affectée à un serveur <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> disponible dans la grappe, même si la requête a été dirigée vers une machine spécifique à l'intérieur ou à l'extérieur de la grappe. <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> exécute ensuite l'affichage de la carte, en recherchant les coordonnées de l'adresse, en exécutant l'outil de géotraitement, etc., puis il renvoie le résultat au client. Si une machine est hors connexion ou si le service qui a été demandé s'exécute sur une autre grappe, la requête est transmise à la grappe qui contient le service. Les machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> dans cette grappe assurent l'équilibrage de charge et traitent la requête en conséquence.</p></div><div class="section1" id="ESRI_SECTION1_C7F80C1007D54987BF3840B98E882D73" purpose="section1"><h2>Données</h2><p id="GUID-94BC57DE-FF98-4D4A-9413-76864F40BAF0"> Comme cela est décrit dans les autres scénarios de déploiement, nous recommandons vivement d'utiliser les ressources locales vers la machine <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> lorsque vous utilisez des données de fichiers. L'inconvénient est que vous devez dupliquer les données sur tous les serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, mais cela vous permet de réduire le trafic réseau et d'accroître les performances de vos services. Envisagez cette option et utilisez-la, le cas échéant. Ce sont la taille des données et la fréquence des mises à jour qui déterminent s'il convient de conserver vos données en local sur toutes les machines.</p><p id="GUID-9A8C2A8C-9556-418C-82CF-50DE0DA17ABA"> Lorsque vous utilisez des bases de données dans ce type de déploiement, vous devez toujours utiliser du matériel dédié. Le niveau de la base de données doit être indépendant de celui d'<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>.</p></div><div class="section1" id="ESRI_SECTION1_A17AE34D1AE247CBA500E675632500D9" purpose="section1"><h2>Adaptateur Web</h2><p id="GUID-7B8EADD6-0069-4F41-8C1A-D6C307FADF84"> Avec cette configuration, les clients <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> ne se connectent jamais directement à vos serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>. En revanche, ils se connectent via un adaptateur Web qui propose des fonctions de sécurité et garantit une résistance accrue du site contre les défaillances.</p><p id="GUID-0CAB3CA5-A75E-46C9-A5A1-CB507DD730D9">
          Pour des raisons de sécurité, nous déconseillons l'utilisation et l'administration d'un site via un même canal. Habituellement, il n'est possible d'effectuer des tâches administratives que dans certaines sections du réseau ou sur des machines spécifiques ayant un accès direct aux serveurs
<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, par exemple sur le port 6080 ou 6443. Pour contourner cette limitation, vous pouvez préciser que seules certaines adresses IP peuvent accéder au serveur dans le répertoire administrateur. Ce paramètre est contrôlé par la propriété <span class="usertext">allowedAdminAccessIPs</span> de la <a class="xref" target="_blank" rel="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000001t9000000.htm" href="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000001t9000000.htm">configuration de sécurité du serveur</a>.  Pour savoir comment configurer cette propriété afin de limiter l'accès au serveur, consultez l'exemple proposé dans la rubrique <a class="xref" target="_blank" rel="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000001rw000000.htm" href="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000001rw000000.htm">Mettre à jour la configuration de sécurité</a>.</p><p id="GUID-601E6805-D64B-49FD-B341-95C745E65B85">Les requêtes émanant d'applications clientes sont toujours acheminées via <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> que vous pouvez configurer en vue d'empêcher l'utilisation des extrémités administratives.  Pour savoir comment procéder, reportez-vous à la rubrique <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/server/latest/administer/windows/configure-arcgis-web-adaptor-after-installation.htm" href="http://server.arcgis.com/fr/server/latest/administer/windows/configure-arcgis-web-adaptor-after-installation.htm">Configuration d'ArcGIS Web Adaptor après l'installation</a>.</p><p id="GUID-496C6DF8-01F3-4F5A-AD5E-E5738E2EC12A">
          <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> permet également d'intégrer <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> avec les méthodes d'authentification standard utilisées dans votre organisation. Il s'agit d'un petit composant que vous installez sur votre serveur Web et qui sert de proxy inversé à vos serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>. Pour connaître la liste des serveurs Web pris en charge, consultez la <a class="xref" rel="01n1/01n100000034000000.htm" href="01n1/01n100000034000000.htm">configuration système requise d'ArcGIS Web Adaptor</a>.   En configurant la sécurité d'<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> pour qu'elle utilise l'authentification au niveau du Web (au lieu de l'authentification au niveau du serveur SIG), <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> délègue l'authentification à votre serveur Web.</p><p id="GUID-9644EFAC-A720-430A-8030-A706250F81D9">Vous pouvez configurer plusieurs adaptateurs Web avec votre site pour permettre la prise en charge de plusieurs méthodes d'authentification. Pour plus d'informations, reportez-vous à la rubrique <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/server/latest/administer/windows/supporting-a-mix-of-public-and-private-services.htm" href="http://server.arcgis.com/fr/server/latest/administer/windows/supporting-a-mix-of-public-and-private-services.htm">Prise en charge de services publics et privés</a>.</p><p id="GUID-F33529F9-1C9D-44E5-A321-6B25D384E8BC">
          <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> sert également de système d'équilibrage de la charge pour le site. <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> transmet les requêtes à votre groupe de serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> selon un algorithme d'équilibrage de la charge en rotation. <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> détecte et transmet également automatiquement les requêtes aux nouveaux serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> qui sont ajoutés à votre site ou arrête la transmission des requêtes vers les machines qui ne sont pas disponibles ou qui ont été supprimées de votre site.</p></div><div class="section1" id="ESRI_SECTION1_343DCCE07E654E70A6E008C7ED2A06B9" purpose="section1"><h2>Points importants sur la haute disponibilité</h2><p id="GUID-998AC748-0092-4EEE-B685-03413A6E1872"> Le diagramme suivant illustre la variation haute disponibilité de ce scénario de déploiement qui implique l'ajout de redondance au niveau de l'adaptateur Web. Lorsque vous configurez plusieurs adaptateurs Web avec votre site, chacun d'entre eux transmet les requêtes en rotation à toutes les machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> de votre site.</p><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-EC903B01-4355-4D5E-B61E-A3E9F8C4680F-web.png" purpose="img" alt="Site à plusieurs machines avec redondance au niveau de l'adaptateur Web" title="Site à plusieurs machines avec redondance au niveau de l'adaptateur Web"></td></tr><tr><td><div class="caption" purpose="caption">Site à plusieurs machines avec redondance au niveau de l'adaptateur Web.  Chaque adaptateur Web transmet en rotation les requêtes aux machines du site.</div></td></tr></table></div><p id="GUID-3C9C0129-546C-4DFF-9E69-75768E29042B"> Il convient d'éliminer les points de défaillance uniques dans les répertoires de données, d'emplacement de configuration et du serveur.</p><p id="GUID-6E4A965E-EDA1-42FC-BE08-8072B3707092"> Il peut être utile de dupliquer les jeux de données basés sur des fichiers sur tous les serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, mais ce n'est pas toujours possible en raison de la fréquence de modification des fichiers ou de leur taille. Si vous utilisez un partage réseau pour vos jeux de données basés sur des fichiers, vérifiez que votre stockage est configuré pour prendre en charge la haute disponibilité.</p><p id="GUID-FBF7DE41-1102-4295-97A3-37E561C2979E"> Les bases de données prises en charge par ArcGIS prennent également en charge divers niveaux de configuration de la haute disponibilité. Reportez-vous à la configuration de la base de données pour agréger le niveau de votre base de données.</p><p id="GUID-1E454F1D-E20C-4422-9389-8E52D4856C6A"> Dans ce scénario de déploiement, votre emplacement de configuration et vos répertoires du serveur doivent toujours être stockés sur un partage réseau. Si vous avez besoin d'une configuration haute disponibilité, configurez ce niveau en conséquence.</p></div><div class="section1" id="ESRI_SECTION1_7D80FDD6984A4CB89673169EC202AE9B" purpose="section1"><h2>Avantages</h2><ul purpose="ul" id="UL_95A679B9F76D4BF689C7D662788FF04D"><li purpose="li" id="LI_282DE4C9AD6B4A4988654E435162F3EB">Un site <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> unique permet d'administrer <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> et ses services sur plusieurs machines.</li><li purpose="li" id="LI_27251CF49540483AB4F13EA8C01AE620"> Vous pouvez aisément ajuster la capacité de votre site en ajoutant et en supprimant des machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>.</li><li purpose="li" id="LI_771CF22F97D84BABBF6A2695DEBED2F2">L'équilibrage de la charge est géré par les serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>.</li><li purpose="li" id="LI_B221E6281A344C07B9F5EB30C145FBA4">L'intégration de l'authentification standard de l'organisation est assurée par l'authentification au niveau du Web à l'aide d'<span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span>.</li></ul></div>
<div class="section1" id="ESRI_SECTION1_41EFAD1B165B4AD7BB2360CACBFE3F46" purpose="section1"><h2>Inconvénients</h2><ul purpose="ul" id="UL_374A7525DA254583BD93C34CA24E3731"><li purpose="li" id="LI_D61CAD7C8A24463CAD02FB86848594B9">L'utilisation des répertoires du serveur et des données dans des emplacements réseau partagés peut réduire les performances des services s'ils sont extrêmement sollicités.</li></ul></div>
<div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>