<html lang="fr" xml:lang="fr"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="Pour éliminer un point de défaillance unique au niveau de votre
ArcGIS Server, vous pouvez configurer un site ArcGIS Server à une seule machine en mode de reprise en ajoutant un système tiers d'équilibrage de la charge."><meta name="content-language" content="fr"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - 
Déploiement sur une seule machine haute disponibilité (actif-passif)</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-5BAC2F6A-272F-46A1-B7C1-2051320339BA]--><body><div id="content"><div class="header"><h1>
Déploiement sur une seule machine haute disponibilité (actif-passif)</h1><div id="breadcrumb"></div></div>
<p id="GUID-36F9A1B2-A480-4256-8D70-EDA6F9381933"> Pour éliminer un point de défaillance unique au niveau de votre
<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, vous pouvez configurer un site <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> à une seule machine en mode de reprise en ajoutant un système tiers d'équilibrage de la charge.</p><p id="GUID-530A2A53-6D12-423C-A75F-A29D9D8EB644"> Le concept à l'origine de ce type de déploiement consiste à cloner un site à une seule machine et à en placer au moins deux instances indépendantes derrière un système d'équilibrage de la charge avec une configuration active-passive. Alors que tous les sites derrière le système d'équilibrage de la charge sont actifs et prêts à traiter des requêtes, le système d'équilibrage de la charge ne présentera des requêtes qu'à un des sites, désigné comme site principal. Si le système d'équilibrage de la charge détecte que le site principal est indisponible, les requêtes en entrée sont redirigées vers un site de reprise ou de secours.</p><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-5C90B73D-37F7-49B6-BA71-C78FE2A76D5D-web.png" purpose="img" alt="Déploiement sur une seule machine haute disponibilité avec un site de secours" title="Déploiement sur une seule machine haute disponibilité avec un site de secours"></td></tr><tr><td><div class="caption" purpose="caption">Déploiement sur une seule machine haute disponibilité avec un site de secours. Les administrateurs de connectent à chaque site séparément. Les deux sites possèdent un exemplaire identique des répertoires du serveur et de l'emplacement de configuration.</div></td></tr></table></div><p id="GUID-B2F53AB0-20AB-4A1A-87B9-2DE1B681002F"> Le processus de reprise est géré entièrement en dehors d'<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> et peut être habituellement configuré pour être déclenché lorsque la machine <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> est indisponible (défaillance réseau ou matérielle) ou, dans certains cas, lorsqu'une opération ou un service SIG spécifique est défaillant.</p><div class="notes" id="GUID-4AB84509-E900-4BAA-BF8A-1795C5996A5F"><div class="note"><img class="note_img" src="rsrc/note.png" alt="Remarque" title="Remarque"><span>Remarque :</span></div><div class="tipbody"><p id="GUID-E7204827-F79D-4C0A-BCB5-465EBCEC4760">Vous pouvez demander des fichiers de licence gratuits sur <span purpose="ph" varid="myesrilink"><a target="_blank" class="xref" href="https://my.esri.com/" rel="https://my.esri.com/">My Esri</a></span> pour vos sites de reprise ou de secours.</p></div></div><p id="GUID-582734D0-2474-450E-BA4C-513D2701FE6B"> Alors que plusieurs machines hébergent des serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> dans ce scénario de déploiement, cette configuration ne peut pas être assimilée, d'un point de vue technique, à un site à plusieurs machines, car les sites derrière le système d'équilibrage de la charge sont indépendants les uns des autres. Chaque site est composé d'une seule machine <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> et possède en local son emplacement de configuration et ses répertoires du serveur.</p>
<div class="section1" id="ESRI_SECTION1_6855783BE1014AAF8C9BAAA490966934" purpose="section1"><h2>Machine <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, répertoires du serveur et emplacement de configuration</h2><p id="GUID-14FA6DC6-BCD6-4225-ABE4-05DAC4AE0791"> Pour plus d'informations, reportez-vous à la rubrique <a class="xref" rel="01n1/01n10000002w000000.htm" href="01n1/01n10000002w000000.htm">Déploiement sur une seule machine</a>. Chaque serveur
<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> possède des répertoires du serveur et un emplacement de configuration en local. Les performances sont ainsi optimisées et les interdépendances minimisées.</p></div><div class="section1" id="ESRI_SECTION1_BF1EDC0004BA41DC802401E547D314D9" purpose="section1"><h2>Données</h2><p id="GUID-7FF07C0D-DB56-421E-AEF9-68C62417A2CA"> Si vous utilisez des sources de données basées sur des fichiers dans vos services SIG, nous vous conseillons de les stocker localement sur chaque machine
<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> plutôt que sur des partages réseau afin d'optimiser les performances de vos services. Dans certains cas, lorsque vous manipulez des volumes importants d'images par exemple, la seule option pratique consiste à partager vos fichiers sur le réseau. Si vous utilisez des fichiers de ressources partagées sur le réseau, vous devez choisir un périphérique de stockage configuré pour la haute disponibilité.</p><p id="GUID-FC892FD0-09B5-4A0E-AA48-03C3FF722C81">Si vous utilisez des bases de données, vous pouvez dédier une base de données à chaque site : une base de données pour votre site principal et une autre pour votre site de secours. Pour que les bases de données restent synchronisées, vous pouvez faire appel à des techniques de réplication de base de données, ou, le cas échéant, de géodatabase. Vous pouvez également utiliser d'autres techniques de haute disponibilité proposées par votre fournisseur de base de données.</p></div><div class="section1" id="ESRI_SECTION1_E28679F50AC74EA885D013361DC0F1E5" purpose="section1"><h2>serveur proxy inverse</h2><p id="GUID-9605B5A1-A4C5-4E7B-80F0-F58070FF4D82"> Dans cette configuration, un système d'équilibrage de la charge est requis. Ce composant servira au moins à gérer la charge sur tous les sites, et la reprise, le cas échéant. Habituellement, le système d'équilibrage de la charge assume également le rôle de serveur proxy inverse comme le décrit la rubrique <a class="xref" rel="01n1/01n10000002r000000.htm" href="01n1/01n10000002r000000.htm">Déploiement sur une seule machine avec un serveur proxy inverse</a>. Dans certains scénarios, vous pourrez avoir configuré un <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm" href="http://server.arcgis.com/fr/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm">serveur proxy inverse</a> indépendamment du système d'équilibrage de la charge.</p><p id="GUID-C09E8E7A-2E5A-4CA2-9C60-6AA77BD53977">Si votre système d'équilibrage de la charge réseau prend en charge une fonction de contrôle de l'intégrité, vous pouvez utiliser l'extrémité de contrôle de l'intégrité d'<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> pour déterminer si le site peut recevoir des requêtes.  Ceci est utile pour déterminer rapidement si le site rencontre une défaillance logicielle ou matérielle.  Pour plus d'informations, reportez-vous à <a class="xref" target="_blank" rel="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000002n7000000.htm" href="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000002n7000000.htm">Contrôle de l'intégrité</a> dans l'API REST d'ArcGIS.</p><p id="GUID-4F6CC4E8-8356-43C3-B384-011F5711C6D7"> L'utilisation d'ArcGIS Web Adaptor est facultative et habituellement nécessaire uniquement pour ce scénario si vous souhaitez utiliser l'authentification au niveau du Web. Pour plus de simplicité, vous pouvez le configurer sur la même machine que votre <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>.  Vous pouvez également le configurer sur une machine dédiée. Dans ce cas, si vous utilisez ArcGIS Web Adaptor, vous devez en configurer une instance distincte sur chaque site.</p></div><div class="section1" id="ESRI_SECTION1_196562782F0149D9A8D7862BA38841EB" purpose="section1"><h2>Autres remarques</h2><div class="section2" id="ESRI_SECTION2_C0955A61BFD348F68136E7289F25B83B" purpose="section2"><h3>Synchronisation des services de vos sites</h3><p id="GUID-236BE866-44C2-4547-A913-EFAC3C3B4888"> Contrairement à un site à plusieurs machines authentique, cette configuration exige que tous les sites derrière le système d'équilibrage de la charge hébergent exactement le même contenu et adoptent le même modèle de sécurité. Vous devez vous assurer que tous les sites semblent identiques au système d'équilibrage de la charge.</p><p id="GUID-8F3DE45D-6ADC-4E02-9070-DB09850AFCC8"> Plusieurs techniques permettent de synchroniser les services <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> sur les sites principaux et de reprise :</p><ul purpose="ul" id="UL_F4A876F72DBB46A397A69054C851CD96"><li purpose="li" id="LI_2402FD84A05D4D2695366E4E4B018FF4">Génération de scripts : <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> intègre une API d'administration RESTful qui permet de rédiger des tâches administratives, telles que la publication de services et la modification de leurs paramètres de sécurité. Vous pouvez créer vos scripts pour appliquer des modifications cohérentes à tous les serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> de votre déploiement. Les scripts sont très utiles lorsque vous devez procéder à des ajustements mineurs, tels que la modification des paramètres de sécurité d'un service ou le remplacement de ce dernier. Pour plus d'informations, reportez-vous à la rubrique <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/server/latest/administer/windows/scripting-arcgis-server-administration.htm" href="http://server.arcgis.com/fr/server/latest/administer/windows/scripting-arcgis-server-administration.htm">Ecriture de scripts d'administration ArcGIS Server</a>.</li><li purpose="li" id="LI_952B7B2D50774CF58097DC68DC7094F5"> Virtualisation : si votre environnement est virtuel, vous pouvez créer des modèles de machines virtuelles et les utiliser pour lancer de nouveaux sites. Chaque modèle disposera d'un exemplaire des données requises par les services SIG (à moins qu'une base de données ne soit utilisée). Le modèle permettra également de publier et de configurer tous les services. Si vous devez procéder à des modifications, telles que l'ajout ou la mise à jour de services, vous pouvez créer un nouveau modèle pour lancer ultérieurement de nouvelles machines virtuelles qui remplaceront le groupe de machines d'<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> utilisé par le système d'équilibrage de la charge. Les modèles de machines virtuelles permettent également de récupérer rapidement des machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> obsolètes.</li></ul><p id="GUID-34948C59-10A8-43D3-9F4B-0BA0299F63D9"> Voici la procédure recommandée pour appliquer des modifications à vos sites dans le cadre de ce scénario de déploiement :</p><div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_784E84BE74D5437E9707B1399BAF19EE"><div class="step_title">Etapes :</div><ol><li purpose="step" id="ESRI_STEP_B00B728FB6064C4E9681C58120712FBB"><span purpose="cmd" id="GUID-212C7A42-1687-4CCF-8C9C-07B0C4F1FB24"> Les modifications administratives sont tout d'abord apportées à un site en mode de secours. Par exemple, vous pourrez ajouter un nouveau service et modifier la sécurité d'un autre service sur un site qui ne traite pas les requêtes. Ainsi, les applications utilisant votre site principal ne seront pas affectées.</span></li><li purpose="step" id="ESRI_STEP_4EB66725C203433EAE03FF73D698F6EA"><span purpose="cmd" id="GUID-437B3239-C47C-4C38-B0B1-FCDD44E91446">Configurez manuellement votre système d'équilibrage de la charge pour transférer toutes les requêtes au site de secours sur lequel les modifications ont été apportées.</span></li><li purpose="step" id="ESRI_STEP_4D19A677A2694061AFDF1806C895BB3B"><span purpose="cmd" id="GUID-6350C413-0F06-4D6C-AE2D-8AE3C45F3423">Appliquez les mêmes modifications au site inactif.</span></li><li purpose="step" id="ESRI_STEP_18542AF42544419FA949DC39C30CDBD4"><span purpose="cmd" id="GUID-43995EA3-BF8D-431F-9636-94A578E0E428">Rétablissez le système d'équilibrage de la charge pour que les requêtes soient redirigées vers le site principal d'origine et quittent le site de secours en mode de secours.</span></li></ol></div></div><p id="GUID-87CCE021-1815-4423-8A82-75FB64408A6B"> Vous pouvez apporter manuellement les modifications susmentionnées à votre site via le gestionnaire <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, des scripts ou des images virtuelles.</p></div><div class="section2" id="ESRI_SECTION2_7A70BE1D4E11428099693C68837E9A51" purpose="section2"><h3>Géotraitement asynchrone et tâches de longue durée</h3><p id="GUID-63ABF49E-433F-4944-AAC1-5820842EE1EF"> Lorsque le système d'équilibrage de la charge passe au site de secours, toutes les requêtes actives du site primaire sont perdues. Par exemple, si une requête de longue durée, telle qu'une tâche de géotraitement est en cours d'exécution lorsqu'une défaillance se produit, elle devra être réinitialisée sur le site de secours par l'application cliente.</p></div><div class="section2" id="ESRI_SECTION2_AD2A918F0F5D4FF59EEDA3502C56B77A" purpose="section2"><h3>Utilisation de la sécurité à base de jetons</h3><p id="GUID-D8F944FD-F648-4A63-84EB-013DDE5EE2F1"> Si vous utilisez l'authentification à base de jetons, également appelée authentification au niveau du serveur SIG, tous les sites de cette configuration doivent utiliser exactement la même clé de jeton partagée. Sinon, les jetons générés sur le site principal ne seront pas valides si vous les utilisez sur un site de secours. Pour savoir comment dupliquer les clés de jetons partagées sur plusieurs sites, reportez-vous aux rubriques <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/server/latest/administer/windows/about-arcgis-tokens.htm" href="http://server.arcgis.com/fr/server/latest/administer/windows/about-arcgis-tokens.htm">A propos des jetons ArcGIS</a> et <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/server/latest/administer/windows/editing-token-settings-in-manager.htm" href="http://server.arcgis.com/fr/server/latest/administer/windows/editing-token-settings-in-manager.htm">Modification des paramètres de jeton dans le gestionnaire</a>.</p></div></div><div class="section1" id="ESRI_SECTION1_BF8390AFC33E4EE28CC8EFEA035E1177" purpose="section1"><h2>Avantages</h2><ul purpose="ul" id="UL_D574A80631724B608ABA0C3675CC3E59"><li purpose="li" id="LI_B0AE7ABEB5DE479E8502D99B03B1A1AB">La configuration de reprise active-passive vous permet de créer un niveau de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> redondant sans frais de licence supplémentaires. Vous pouvez obtenir gratuitement une licence pour les serveurs de secours.</li></ul></div><div class="section1" id="ESRI_SECTION1_9A6F1AE806F140AD80FB926FCF4A55CA" purpose="section1"><h2>Inconvénients</h2><ul purpose="ul" id="UL_2C134694CD7344C2B3B6E70AD1BDB471"><li purpose="li" id="LI_B00353D7F391425ABB1010D183B89649">Les sites derrière le système d'équilibrage de la charge sont indépendants les uns des autres. Chaque site doit être géré séparément et chacun possède en local son propre emplacement de configuration et ses répertoires du serveur. Si les données ou services du site sont souvent modifiés, ce scénario peut considérablement surcharger les tâches d'administration et de gestion.</li><li purpose="li" id="LI_F90D1CC466E14AA49D912E0C125EC2AC">Lorsque vous passez au site de secours, toutes les requêtes actives du site primaire sont perdues.</li></ul></div><div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>