<html lang="fr" xml:lang="fr"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="Un site peut englober plusieurs machines ArcGIS Server pour gérer un trafic supplémentaire ou permettre une sauvegarde en cas de déconnexion d'une des machines."><meta name="content-language" content="fr"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - 
Déploiement sur plusieurs machines avec un système tiers d'équilibrage de la charge</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-08196164-3CAB-4F08-9C3E-C5BC43FF8C23]--><body><div id="content"><div class="header"><h1>
Déploiement sur plusieurs machines avec un système tiers d'équilibrage de la charge</h1><div id="breadcrumb"></div></div>
<p id="GUID-7D1F5381-6018-4B2E-A173-E6FB8DB627C3"> <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> prend en charge la configuration de sites à plusieurs machines. Sur un site à plusieurs machines, il est possible d'administrer et d'utiliser au moins deux serveurs <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>  en tant qu'unité logique unique. Les administrateurs d' bénéficient alors d'une grande flexibilité pour ajuster aisément la puissance de calcul du site en ajoutant ou en supprimant des machines. Les sites à plusieurs machines permettent également de simplifier la publication et la mise à jour de services sur plusieurs machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>.</p><p id="GUID-FA3F35BB-BE81-4D99-8507-6ED393B11F72">Dans le cadre d'un déploiement sur plusieurs machines, chaque machine <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> doit présenter le même numéro de version pour que le site fonctionne correctement.  En outre, la même licence doit être appliquée à chaque machine du site.</p><p id="GUID-7AA1BAD4-6DA4-4960-BFE4-38FCDA2633B2"> Dans une configuration à plusieurs machines, un serveur proxy inverse tiers ou un système d'équilibrage de la charge réseau surveille un groupe de machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>.</p><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-D4C995D9-D217-43B5-8405-C6865551E641-web.png" purpose="img" alt="Site avec plusieurs machines" title="Site avec plusieurs machines"></td></tr><tr><td><div class="caption" purpose="caption">Site avec plusieurs machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> et un système d'équilibre de la charge</div></td></tr></table></div><p id="GUID-7813AE69-5DA1-4ABF-B26A-8430294C93FD"> L'un des points clés des configurations à plusieurs machines est que toutes les machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> partagent les mêmes emplacements de configuration et répertoires du serveur. Ainsi, un administrateur peut se connecter à toute machine à l'aide du gestionnaire d'<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>  appliquer des modifications qui seront répercutées sur tous les ordinateurs du site.</p><div class="section1" id="ESRI_SECTION1_14CC6AE269D74871B7D81EC84AB5DF75" purpose="section1"><h2>Machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, répertoires du serveur et emplacement de configuration</h2><p id="GUID-33B1D0C7-B9C5-44FB-A84C-3F395C5C1167">Puisque dans des configurations à plusieurs machines, toutes les machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> partagent les mêmes emplacements de configuration et répertoires du serveur, vous devez sélectionner une localisation réseau pour ces derniers.</p><p id="GUID-7AE3C15F-3E83-4E7A-B412-95BBB3274DE7"> Habituellement, un compte de domaine est choisi pour le compte <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>  afin de simplifier la gestion des autorisations d'accès aux données des ressources réseau. Toutefois, selon vos stratégies de sécurité, vous pouvez choisir d'utiliser des comptes locaux. Le compte <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> (local ou de domaine) doit bénéficier d'un accès en écriture au partage réseau où se trouvent l'emplacement de configuration et les répertoires du serveur. Pour plus d'informations, reportez-vous à la rubrique <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/server/latest/administer/windows/accounts-used-by-arcgis-server.htm" href="http://server.arcgis.com/fr/server/latest/administer/windows/accounts-used-by-arcgis-server.htm">Comptes utilisés par ArcGIS Server</a>.</p><p id="GUID-93BA97C6-C3B8-40B1-B630-D7515B596705">Sur un site à plusieurs machines, toutes les machines
<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> appartiennent initialement à une seule <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/server/latest/administer/windows/about-gis-server-clusters.htm" href="http://server.arcgis.com/fr/server/latest/administer/windows/about-gis-server-clusters.htm">grappe</a> utilisant les ports 4004 et au-delà. Depuis la version 10.4, <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> utilise par défaut le <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/server/latest/administer/windows/about-single-cluster-mode.htm" href="http://server.arcgis.com/fr/server/latest/administer/windows/about-single-cluster-mode.htm">mode de grappe unique</a> pour les nouvelles installations. Ce mode n'inclut pas l'équilibrage de charge entre les machines de la grappe. Cela réduit le trafic réseau entre les machines du site et la charge sur le réseau, et cela aide à améliorer la surveillance des machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> sur votre site. Lors d'une mise à niveau vers la version 10.4 ou ultérieure à partir de versions antérieures, le mode sera activé pour les sites à une seule grappe qui n'utilisent pas le mode de grappe unique. Les paramètres des sites à une seule grappe qui utilisent déjà le mode de grappe unique et ceux des sites qui utilisent plusieurs grappes dans des versions antérieures seront conservés lors de la mise à niveau.</p><p id="GUID-91E9E50C-6209-4D73-8EBD-86870C1C743A"> Si votre site utilise plusieurs grappes, l'équilibrage de charge est géré parmi toutes les machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> au sein de cette grappe. Pour l'essentiel, les grappes sont des groupes indépendants de machines qui exécutent des ensembles dédiés de services.</p><p id="GUID-34659E5E-FAAD-4401-9537-A5F1AC6E06A5">Par exemple, une requête entrante est affectée à une machine <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> disponible dans la grappe, même si la requête a été dirigée vers une machine spécifique à l'intérieur ou à l'extérieur de la grappe. Ce serveur exécute ensuite l'affichage de la carte, en recherchant les coordonnées de l'adresse, en exécutant l'outil de géotraitement, etc., puis il renvoie le résultat au client. Si une machine est hors connexion ou si le service qui a été demandé s'exécute sur une autre grappe, la requête est transmise à la grappe qui contient le service. Les machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> dans cette grappe assurent l'équilibrage de charge et traitent la requête en conséquence.</p></div><div class="section1" id="ESRI_SECTION1_68CB0DD2AAD84B5797E32AD99C6F8A19" purpose="section1"><h2>Données</h2><p id="GUID-683DCBD4-1E50-44E4-BE33-D0952AA667B5"> Comme cela est décrit dans les autres scénarios de déploiement, nous recommandons vivement d'utiliser les ressources locales vers la machine <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> lorsque vous utilisez des données de fichiers. L'inconvénient est que vous devez dupliquer les données sur toutes les machines, mais cela vous permet de réduire le trafic réseau et d'accroître les performances de vos services. Envisagez cette option et utilisez-la, le cas échéant. Ce sont la taille des données et la fréquence des mises à jour qui déterminent s'il convient de conserver vos données en local sur toutes les machines.</p><p id="GUID-C00F3955-D0D0-4E89-BF84-6AEFAC472A15"> Lorsque vous utilisez des bases de données dans ce type de déploiement, vous devez toujours utiliser du matériel dédié. Le niveau de la base de données doit être indépendant de celui d'<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>.</p></div><div class="section1" id="ESRI_SECTION1_C0B4AA3B947E494CAF38E2D06896D1C7" purpose="section1"><h2>Serveur proxy inverse tiers ou système d'équilibrage de la charge réseau</h2><p id="GUID-59009666-37AB-4677-8DA2-E984B444C86F"> Avec cette configuration, les clients <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> ne se connectent jamais directement à vos machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>. En revanche, ils se connectent via un niveau intermédiaire qui propose des fonctions de sécurité et garantit une résistance accrue du site contre les défaillances.</p><p id="GUID-0E9F0A14-AFE9-4891-9680-43EED7082B90">  Pour des raisons de sécurité, nous déconseillons l'utilisation et l'administration d'un site via un même canal. Habituellement, il n'est possible d'effectuer des tâches administratives que dans certaines sections du réseau ou sur des machines spécifiques ayant un accès direct aux machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, par exemple sur le port 6080 ou 6443. Pour contourner cette limitation, vous pouvez préciser que seules certaines adresses IP peuvent accéder au serveur dans le répertoire administrateur.  Ce paramètre est contrôlé par la propriété <span class="usertext">allowedAdminAccessIPs</span> de la <a class="xref" target="_blank" rel="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000001t9000000.htm" href="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000001t9000000.htm">configuration de sécurité du serveur</a>.  Pour savoir comment configurer cette propriété afin de limiter l'accès au serveur, consultez l'exemple proposé dans la rubrique <a class="xref" target="_blank" rel="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000001rw000000.htm" href="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000001rw000000.htm">Mettre à jour la configuration de sécurité</a>.</p><p id="GUID-4D28AF6E-A555-4822-8C1B-D7DF5D01FF34"> Les requêtes émanant des applications clientes sont toujours acheminées via le proxy inversé, ce qui empêche l'utilisation d'extrémités administratives. La plupart des proxys tiers vous permettent de filtrer les requêtes en entrée qui contiennent un type spécifique d'URL. En bloquant les requêtes en entrée qui utilisent des ressources du répertoire d'administrateur d'<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, (<span class="usertext">http://gisserver.domain.com:6080/arcgis/admin</span>) ou du gestionnaire d'<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>  (<span class="usertext">http://gisserver.domain.com:6080/arcgis/manager</span>), vous bloquez les tâches administratives passant par votre proxy inversé.</p><p id="GUID-6DC6A4F1-EF76-410B-A352-EBDFE31293F0"> Votre proxy inverse sert également de système d'équilibrage de la charge pour le site. Un algorithme d'équilibrage de charge, de rotation par exemple, est adapté à cette configuration.</p><p id="GUID-B9492F73-C386-4405-A524-9A134106B74D">Si votre système d'équilibrage de la charge réseau prend en charge une fonction de contrôle de l'intégrité, vous pouvez utiliser l'extrémité de contrôle de l'intégrité d'<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> pour déterminer si le site peut recevoir des requêtes.  Ceci est utile pour déterminer rapidement si le site rencontre une défaillance logicielle ou matérielle.  Pour plus d'informations, reportez-vous à <a class="xref" target="_blank" rel="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000002n7000000.htm" href="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000002n7000000.htm">Contrôle de l'intégrité</a> dans l'API REST d'ArcGIS.</p><p id="GUID-28E2F286-E703-4DAA-95BA-016946315B13">Pour savoir comment intégrer un serveur proxy inverse à <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, reportez-vous à la rubrique <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm" href="http://server.arcgis.com/fr/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm">Utilisation d'un serveur proxy inverse avec ArcGIS Server</a>.</p></div><div class="section1" id="ESRI_SECTION1_7D80FDD6984A4CB89673169EC202AE9B" purpose="section1"><h2>Avantages</h2><ul purpose="ul" id="UL_95A679B9F76D4BF689C7D662788FF04D"><li purpose="li" id="LI_282DE4C9AD6B4A4988654E435162F3EB">Un site <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> unique permet d'administrer <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> et ses services sur plusieurs machines.</li><li purpose="li" id="LI_27251CF49540483AB4F13EA8C01AE620"> Vous pouvez aisément ajuster la capacité de votre site en ajoutant et en supprimant des machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>.</li><li purpose="li" id="LI_771CF22F97D84BABBF6A2695DEBED2F2">L'équilibrage de la charge est géré par les machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>.</li></ul></div>
<div class="section1" id="ESRI_SECTION1_41EFAD1B165B4AD7BB2360CACBFE3F46" purpose="section1"><h2>Inconvénients</h2><ul purpose="ul" id="UL_990D447AD1774E3BB15F91EC33862342"><li purpose="li" id="LI_A1774AA02A234F6B99B66A5C3C260121">L'utilisation des répertoires <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>  et des données dans des emplacements réseau partagés peut réduire les performances des services s'ils sont extrêmement sollicités.</li><li purpose="li" id="LI_8E200906EA23425EAD7C18CEB73610F3">Connaissance requise des système tiers d'équilibrage de la charge.</li><li purpose="li" id="LI_6F2309574D9A4365BB40ED27E5601F24">Aucune prise en charge de l'authentification au niveau du Web. Reportez-vous à la section <a class="xref" rel="01n1/01n10000002t000000.htm" href="01n1/01n10000002t000000.htm">Déploiement sur plusieurs machines avec ArcGIS Web Adaptor</a> pour en savoir plus sur l'authentification au niveau du Web.</li></ul></div><div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>