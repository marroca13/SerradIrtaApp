<html lang="fr" xml:lang="fr"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="Un déploiement de type actif-actif permet d'obtenir une haute disponibilité dans un environnement de production grâce à l'utilisation d'une machine ArcGIS Server de reprise."><meta name="content-language" content="fr"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - Déploiement sur une seule machine haute disponibilité (actif-actif)</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-D05F2CE7-BB97-4B83-888E-8750E42C8234]--><body><div id="content"><div class="header"><h1>Déploiement sur une seule machine haute disponibilité (actif-actif)</h1><div id="breadcrumb"></div></div>
<p id="GUID-D10C0CE4-3E31-4EB5-9CF1-BB8000F12735"> Cette configuration représente une variation du <a class="xref" rel="01n1/01n10000002s000000.htm" href="01n1/01n10000002s000000.htm">déploiement sur une seule machine haute disponibilité (actif-passif)</a>, dans le cadre duquel le système d'équilibrage de la charge est configuré pour répartir constamment la charge sur tous les sites. Il n'existe aucun site de secours dans cette configuration.</p><p id="GUID-05D90C41-2896-4CA2-9E9B-BFB61C97EE67"> Cette architecture implique la configuration d'au moins deux sites derrière un système d'équilibre de la charge tiers afin d'augmenter la capacité de votre déploiement <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>. Vous pouvez utiliser cette technique pour compenser les limites en termes de haute disponibilité décrites dans les scénarios de <a class="xref" rel="01n1/01n10000002w000000.htm" href="01n1/01n10000002w000000.htm">déploiement sur une seule machine</a> et <a class="xref" rel="01n1/01n10000002r000000.htm" href="01n1/01n10000002r000000.htm">de déploiement sur une seule machine avec un serveur proxy inverse</a> ou pour ajouter des machines.</p><p id="GUID-58CAD460-A6FE-446A-A387-BB257F9FF7CF"> Alors que vous pouvez augmenter votre capacité et bénéficier d'une haute disponibilité en utilisant des sites à plusieurs machines, les déploiements de type actif-actif présentent des avantages et des inconvénients que nous allons exposer ci-dessous.</p><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-90564278-838E-4EBC-9623-219347F4CCCC-web.png" purpose="img" alt="Déploiement de type actif-actif avec deux sites" title="Déploiement de type actif-actif avec deux sites"></td></tr><tr><td><div class="caption" purpose="caption">Déploiement de type actif-actif avec deux sites. Les administrateurs de connectent à chaque site séparément. Les deux sites possèdent un exemplaire identique des répertoires du serveur et de l'emplacement de configuration.</div></td></tr></table></div><p id="GUID-0E95AE0A-1D33-4BA3-8939-8CD03DD6C47A"> Le concept à l'origine d'une architecture de type actif-actif à une seule machine consiste à cloner le site à une seule machine et à en placer des instances indépendantes derrière un système d'équilibrage de la charge. Techniquement parlant, cette configuration ne peut pas être assimilée à un site à plusieurs machines, car les sites sont indépendants les uns des autres, composés d'une seule machine <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, et ils possèdent chacun leur emplacement de configuration et leurs répertoires du serveur en local.</p><p id="GUID-3F39950B-CBC0-4F66-A3C8-C2EA3E97626A">Le déploiement d'un site  <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>  sur plusieurs machines simplifie considérablement l'administration du serveur.   Toutefois, l'architecture de type actif-actif peut être utilisée dans des scénarios où le nombre et les paramètres des services sont bien définis et restent statiques, ce qui représente un avantage considérable en termes de performances par rapport aux sites à plusieurs machines, et ceci particulièrement pour des services de cartes en cache.</p>
<div class="section1" id="ESRI_SECTION1_4F3569517C2B468A8E70D2523F654294" purpose="section1"><h2>Machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, répertoires du serveur et emplacement de configuration</h2><p id="GUID-DFD8B1CC-4625-4260-88FD-AECD77125A30">Chaque machine <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> doit posséder en local son propre emplacement de configuration et ses répertoires cache, de tâches et système.  Les performances sont ainsi optimisées et les interdépendances minimisées. A l'inverse, le ou les répertoire(s) en sortie doivent être partagés entre chaque site. Pour plus de détails, consultez les <a class="xref" rel="01n1/01n10000002z000000.htm#ESRI_SECTION2_18A9D985BCFE499E9519BC5084CCB1B3" href="01n1/01n10000002z000000.htm#ESRI_SECTION2_18A9D985BCFE499E9519BC5084CCB1B3">autres remarques</a> ci-dessous.</p></div><div class="section1" id="ESRI_SECTION1_D145A38FA7744A09BEF49F7BFFFBB5ED" purpose="section1"><h2>Données</h2><p id="GUID-3667FA67-0195-4578-BEE3-5D95D4A459BB"> Pour plus d'informations, reportez-vous à la rubrique <a class="xref" rel="01n1/01n10000002s000000.htm" href="01n1/01n10000002s000000.htm">Déploiement sur une seule machine haute disponibilité (actif-passif)</a>.</p></div><div class="section1" id="ESRI_SECTION1_8EF751A1A0674003B0A8AEE7DD7C0FAC" purpose="section1"><h2>  serveur proxy inverse</h2><p id="GUID-08D30EAA-3B15-4022-9815-F24432074696"> Dans cette configuration, un système d'équilibrage de la charge est requis. Au minimum, ce composant répartit la charge sur tous les sites. Les systèmes d'équilibrage de la charge présentent des configurations diverses pour répartir la charge, telles que la rotation et le nombre de connexions le moins élevé. Le choix de la distribution appropriée de la charge dépend des services Web en cours d’exécution sur les sites <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, et de leurs modes d'utilisation.  Les systèmes d'équilibrage de la charge utilisent habituellement plusieurs options de gestion des défaillances. Par exemple, vous pourriez définir des règles dans le système d'équilibrage de la charge pour l'empêcher de transférer des requêtes à une machine indisponible en raison d'une défaillance matérielle ou réseau ou à un service <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> spécifique qui n'est pas disponible. Si vous utilisez des sites à une seule machine comme l'indique ce scénario, les requêtes envoyées à une machine spécifique seront systématiquement traitées par cette machine.</p><p id="GUID-A0ECF165-A482-4351-963D-45E5266F6145"> Habituellement, le système d'équilibrage de la charge assume également le rôle de serveur proxy inverse comme le décrit la rubrique <a class="xref" rel="01n1/01n10000002r000000.htm" href="01n1/01n10000002r000000.htm">Déploiement sur une seule machine avec un serveur proxy inverse</a>. Dans certains scénarios, vous pourrez avoir configuré un <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm" href="http://server.arcgis.com/fr/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm">serveur proxy inverse</a> indépendamment du système d'équilibrage de la charge.</p><p id="GUID-F79D5977-06ED-4481-B6B3-074FFE7C8F1C">Si votre système d'équilibrage de la charge réseau prend en charge une fonction de contrôle de l'intégrité, vous pouvez utiliser l'extrémité de contrôle de l'intégrité d'<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> pour déterminer si le site peut recevoir des requêtes.  Ceci est utile pour déterminer rapidement si le site rencontre une défaillance logicielle ou matérielle.  Pour plus d'informations, reportez-vous à <a class="xref" target="_blank" rel="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000002n7000000.htm" href="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000002n7000000.htm">Contrôle de l'intégrité</a> dans l'API REST d'ArcGIS.</p><p id="GUID-10CCD4D6-1935-4717-9D69-BFC43BE1161C"> L'utilisation de <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> est facultative et habituellement nécessaire uniquement pour ce scénario si vous souhaitez utiliser l'authentification au niveau du Web. Vous pouvez le configurer sur la même machine que votre <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> ou sur une machine dédiée.   Dans ce cas, si vous utilisez <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span>, vous devez configurer une instance <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> distincte sur chaque site.</p></div><div class="section1" id="ESRI_SECTION1_196562782F0149D9A8D7862BA38841EB" purpose="section1"><h2>Autres remarques</h2><div class="section2" id="ESRI_SECTION2_C0955A61BFD348F68136E7289F25B83B" purpose="section2"><h3>Synchronisation des services de vos sites</h3><p id="GUID-236BE866-44C2-4547-A913-EFAC3C3B4888"> Contrairement à un site à plusieurs machines authentique, cette configuration exige que tous les sites derrière le système d'équilibrage de la charge hébergent exactement le même contenu et adoptent le même modèle de sécurité. Vous devez vous assurer que tous les sites semblent identiques au système d'équilibrage de la charge.</p><p id="GUID-8F3DE45D-6ADC-4E02-9070-DB09850AFCC8"> Plusieurs techniques permettent de synchroniser les services <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>  sur les sites principaux et de reprise :</p><ul purpose="ul" id="UL_F4A876F72DBB46A397A69054C851CD96"><li purpose="li" id="LI_2402FD84A05D4D2695366E4E4B018FF4">Génération de scripts : <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>  intègre une API d'administration RESTful qui permet de rédiger des tâches administratives, telles que la publication de services et la modification de leurs paramètres de sécurité. Vous pouvez créer vos scripts pour appliquer des modifications cohérentes à toutes les machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> de votre déploiement. Les scripts sont très utiles lorsque vous devez procéder à des ajustements mineurs, tels que la modification des paramètres de sécurité d'un service ou le remplacement de ce dernier. Pour plus d'informations, reportez-vous à la rubrique <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/server/latest/administer/windows/scripting-arcgis-server-administration.htm" href="http://server.arcgis.com/fr/server/latest/administer/windows/scripting-arcgis-server-administration.htm">Ecriture de scripts ArcGIS Server d'administration</a>.<div class="notes" id="GUID-5134A5DB-8BC5-4DF9-980C-118EA56D6B51"><div class="note"><img class="note_img" src="rsrc/note.png" alt="Remarque" title="Remarque"><span>Remarque :</span></div><div class="tipbody"><p id="GUID-B634C6CC-937A-49DA-8C98-CD7EAFA8A785">N’utilisez pas un script pour créer le site initial. Créer manuellement le premier site sur une image de machine virtuelle, puis écrivez un script sur la création de sites supplémentaires à partir de cette image de base. En créant toutes les machines à partir de la même image de machine virtuelle, vous garantissez que toutes les machines utilisent la même clé de chiffrement.</p></div></div></li><li purpose="li" id="LI_952B7B2D50774CF58097DC68DC7094F5"> Virtualisation : créez un modèle de machine virtuelle et utilisez-le pour lancer de nouveaux sites. Comme mentionné précédemment, ceci garantit que toutes les machines utilisent la même clé de chiffrement. En outre, chaque modèle disposera d'un exemplaire des données requises par les services SIG (à moins qu'une base de données ne soit utilisée) et tous les services publiés et configurés. Si vous devez procéder à des modifications, telles que l'ajout ou la mise à jour de services, créez un nouveau modèle pour lancer de nouvelles machines virtuelles qui remplaceront le groupe de machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> utilisé par le système d'équilibrage de la charge. Vous pouvez également utiliser les modèles de machines virtuelles pour récupérer rapidement des machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> obsolètes.</li></ul><p id="GUID-34948C59-10A8-43D3-9F4B-0BA0299F63D9"> Voici la procédure recommandée pour appliquer des modifications à vos sites dans le cadre de ce scénario de déploiement :</p><div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_784E84BE74D5437E9707B1399BAF19EE"><div class="step_title">Etapes :</div><ol><li purpose="step" id="ESRI_STEP_B00B728FB6064C4E9681C58120712FBB"><span purpose="cmd" id="GUID-212C7A42-1687-4CCF-8C9C-07B0C4F1FB24"> Apportez tout d’abord les modifications administratives à un site se trouvant en mode de secours. Par exemple, ajoutez un nouveau service et modifiez la sécurité d'un autre service sur un site qui ne traite pas les requêtes. Ceci garantit que les applications utilisant votre site principal ne sont pas affectées.</span></li><li purpose="step" id="ESRI_STEP_4EB66725C203433EAE03FF73D698F6EA"><span purpose="cmd" id="GUID-437B3239-C47C-4C38-B0B1-FCDD44E91446">Configurez manuellement votre système d'équilibrage de la charge pour transférer toutes les requêtes au site de secours sur lequel les modifications ont été apportées.</span></li><li purpose="step" id="ESRI_STEP_4D19A677A2694061AFDF1806C895BB3B"><span purpose="cmd" id="GUID-6350C413-0F06-4D6C-AE2D-8AE3C45F3423">Appliquez les mêmes modifications au site inactif.</span></li><li purpose="step" id="ESRI_STEP_18542AF42544419FA949DC39C30CDBD4"><span purpose="cmd" id="GUID-43995EA3-BF8D-431F-9636-94A578E0E428">Rétablissez le système d'équilibrage de la charge pour que les requêtes soient redirigées vers le site principal d'origine et quittent le site de secours en mode de secours.</span></li></ol></div></div><p id="GUID-87CCE021-1815-4423-8A82-75FB64408A6B"> Vous pouvez apporter manuellement les modifications susmentionnées à votre site via le gestionnaire <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, des scripts ou des images virtuelles.</p></div><div class="section2" id="ESRI_SECTION2_18A9D985BCFE499E9519BC5084CCB1B3" purpose="section2"><h3>Partage de répertoire en sortie</h3><p id="GUID-22758F5B-AC7B-46BA-8384-6B5C7A1127E7">Certaines opérations de service d'<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> référencent des ressources dans un ou plusieurs répertoires en sortie.  Par exemple, les services de carte peuvent écrire des images dans un répertoire en sortie et référencer ces images via une URL dans la réponse à la requête. Afin que les clients reçoivent correctement l'image, tous les sites de votre configuration active-active doivent référencer le même répertoire en sortie. Cela peut être réalisé en plaçant les répertoires en sortie sur une ressource du réseau et en les partageant avec vos sites.</p><p id="GUID-5228E005-D886-437A-A492-AD4B96BC5DCA">Voici une liste d'opérations de service qui utilisent les répertoires en sortie :</p><ul purpose="ul" id="UL_68A5033169114B18B7A572649B709AA8"><li purpose="li" id="LI_77ED29AD1C4A4D34B1F219D776C28968"><a class="xref" target="_blank" rel="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000000rp000000.htm" href="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000000rp000000.htm">Création d'un réplica de service d'entités</a> (service d'entités)</li><li purpose="li" id="LI_7AA237DE47F14F308CFD25D74BC00B5F"><a class="xref" target="_blank" rel="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000000s7000000.htm" href="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000000s7000000.htm">Téléchargement d'une image raster</a> (service d'imagerie)</li><li purpose="li" id="LI_3CC1979547874B5F8BDC59C3F9A1500D"><a class="xref" target="_blank" rel="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000000v7000000.htm" href="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000000v7000000.htm">Exportation d'une image de carte</a> (service de carte)</li><li purpose="li" id="LI_B37B3AF223C843B58948733888F8CA60"><a class="xref" target="_blank" rel="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000000wn000000.htm" href="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000000wn000000.htm">Exportation d'un diagramme schématique</a> (capacité schématique dans un service de carte)</li><li purpose="li" id="LI_F558A74F704344E8B6AAEAEB35878457"><a class="xref" target="_blank" rel="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000001m3000000.htm" href="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r3000001m3000000.htm">Exportation d'une carte web</a> (service de géotraitement)</li></ul></div><div class="section2" id="ESRI_SECTION2_7DDC0166EDAF43C494BD072E72CB2F86" purpose="section2"><h3>Exécution asynchrones de services de géotraitement</h3><p id="GUID-A4ED5B7B-049F-41E7-8788-A76539A4ABF4">Les services de géotraitement <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>  prennent en charge deux modes d'exécution : synchrones et asynchrones.  L'exécution synchrone suit un modèle requête-réponse passif et est entièrement prise en charge dans une configuration active-active. L'exécution asynchrone suit un modèle requête-réponse dynamique et est le mode par défaut. Afin d'utiliser l'exécution asynchrone dans une configuration active-active, vous devez prendre en compte les points suivants :</p><ul purpose="ul" id="UL_E514C178FA174602A1CA703EBFE88C60"><li purpose="li" id="LI_5A8AFCB46EDC489E843064159E5D4220"> Lorsque vous soumettez une tâche de géotraitement asynchrone, l'ID de tâche qui vous est renvoyé correspond à la tâche soumise et à ses sorties. Seul le site <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> qui reçoit la requête d’origine peut reconnaître cet ID. C'est la raison pour laquelle la configuration active-active exige que vous définissiez l'affinité dans votre équilibrage de charge (appelées également sessions rémanentes) si vous souhaitez utiliser l'exécution asynchrone. Cela permet de fournir une disponibilité élevée pour les résultats de géotraitement asynchrone et de services de carte. Reportez-vous à votre fournisseur d'équilibrage de charge pour comprendre les implications de l'activation des sessions rémanentes.</li><li purpose="li" id="LI_24BDF1995314447EAF7A8DA98409374D"> Si votre service de géotraitement n'utilise pas de services de carte pour rendre les sorties et les sans sortie du type "Fichier" définies, vous pouvez sélectionner l'exécution synchrone pour vos services de géotraitement. Aucune session rémanente dans votre équilibrage de charge n'est requise.</li></ul></div><div class="section2" id="ESRI_SECTION2_AD2A918F0F5D4FF59EEDA3502C56B77A" purpose="section2"><h3>Utilisation de la sécurité à base de jetons</h3><p id="GUID-D8F944FD-F648-4A63-84EB-013DDE5EE2F1"> Si vous utilisez l'authentification à base de jetons, également appelée authentification au niveau du serveur SIG, tous les sites de cette configuration doivent utiliser exactement la même clé de jeton partagée. Sinon, les jetons générés pour une machine ne seront pas valides s'ils sont utilisés pour l'autre machine. Pour savoir comment dupliquer les clés de jetons partagées sur plusieurs sites, reportez-vous aux rubriques <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/server/latest/administer/windows/about-arcgis-tokens.htm" href="http://server.arcgis.com/fr/server/latest/administer/windows/about-arcgis-tokens.htm">A propos des jetons ArcGIS</a> et <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/server/latest/administer/windows/editing-token-settings-in-manager.htm" href="http://server.arcgis.com/fr/server/latest/administer/windows/editing-token-settings-in-manager.htm">Modification des paramètres de jeton dans le gestionnaire</a>.</p></div></div><div class="section1" id="ESRI_SECTION1_7D80FDD6984A4CB89673169EC202AE9B" purpose="section1"><h2>Avantages</h2><ul purpose="ul" id="UL_29B1CEDBC9B64C93B3BF5A5F2B6DDED6"><li purpose="li" id="LI_31A26F5D270D4EE3889F95C9C604163E">Conception simple. Puisque les interdépendances sont minimes entre les machines <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, il est facile de remplacer des machines obsolètes ou défectueuses, d'appliquer des mises à niveau ou d'ajouter et de supprimer des machines du groupe <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> sans interrompre les services ou abandonner les requêtes.</li><li purpose="li" id="LI_720ED1C47951426CB6DBD4C224B2AA58">Si des tuiles de carte sont stockées en local sur chaque machine, cette configuration présente des avantages considérables en termes de performances par rapport aux sites à plusieurs machines. En fait, cette configuration est idéale si vous souhaitez augmenter la capacité des services de carte en cache.</li></ul></div>
<div class="section1" id="ESRI_SECTION1_41EFAD1B165B4AD7BB2360CACBFE3F46" purpose="section1"><h2>Inconvénients</h2><ul purpose="ul" id="UL_1AC3D6DF066C44FB855C935C830F5958"><li purpose="li" id="LI_F897D11D574943B4B765B6F5D3BA1B6A"> Vous êtes chargé de synchroniser tous les sites. Cette tâche administrative supplémentaire rend ce modèle de déploiement peu pratique en présence de nombreuses machines ou services/caches qui changent souvent.</li><li purpose="li" id="LI_0E941DCDF0974FE092B1E24E762CA34C">Connaissance requise des systèmes tiers d'équilibrage de la charge.</li></ul></div><div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>