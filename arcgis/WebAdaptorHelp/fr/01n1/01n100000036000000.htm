<html lang="fr" xml:lang="fr"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="Un serveur proxy inverse est un ordinateur déployé sur un réseau de périmètre (appelé également zone démilitarisée [DMZ] ou sous-réseau filtré) qui gère des requêtes provenant d'Internet et les transmet aux machines de votre réseau interne."><meta name="content-language" content="fr"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - 
Utiliser un serveur proxy inverse avec Portal for ArcGIS</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-E452FD74-CAA7-4871-BC78-990DC4D01E03]--><body><div id="content"><div class="header"><h1>
Utiliser un serveur proxy inverse avec Portal for ArcGIS</h1><div id="breadcrumb"></div></div>
<p id="GUID-E6059846-9BAC-4204-8CA5-AA40D26CE425">Un serveur proxy inverse est un ordinateur déployé sur un réseau de périmètre (appelé également zone démilitarisée [DMZ] ou sous-réseau filtré) qui gère des requêtes provenant d’Internet et les transmet aux machines de votre réseau interne. La transmission des requêtes via un serveur proxy inverse permet de masquer l’identité des machines derrière le pare-feu de votre organisation et ainsi de protéger les machines en interne contre toute attaque provenant des utilisateurs d’Internet. Vous pouvez intégrer des fonctions de sécurité supplémentaires au serveur proxy inverse pour protéger davantage votre réseau interne contre toute attaque provenant de l'extérieur.</p><p id="GUID-1275121D-C786-4A30-98F5-8F46E77A2F67"> Si votre serveur proxy inverse prend en charge une fonction de contrôle de l'intégrité, vous pouvez utiliser l'extrémité de contrôle de l'intégrité de <span purpose="ph" translate="no" varid="PortalForArcGIS">Portal for ArcGIS</span> pour déterminer si le portail peut recevoir des requêtes. Ceci est utile pour déterminer rapidement si le site rencontre une défaillance logicielle ou matérielle. Pour plus d'informations, reportez-vous à la rubrique <a class="xref" target="_blank" rel="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r300000306000000.htm" href="http://resources.arcgis.com/fr/help/arcgis-rest-api/02r3/02r300000306000000.htm">Contrôle de l'intégrité</a> du portail dans l'API REST d'ArcGIS.</p>
<div class="notes" id="GUID-B752AE0F-289C-4AD2-829B-7A439E7D7FCD"><div class="caution"><img class="note_img" src="rsrc/caution.png" alt="Attention" title="Attention"><span>Attention :</span></div><div class="tipbody"><p id="GUID-FB823391-E68A-4647-9728-6449BCA394C1"> Les instructions de configuration détaillées dans cette rubrique doivent  être exécutée avant de fédérer un site <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> avec votre <span purpose="ph" translate="no" varid="ArcGIS_Enterprise_long">ArcGIS Enterprise</span> portail. La suppression d’un site fédéré <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> a des répercussions importantes et il sera difficile de rétablir une configuration existante. Pour en savoir plus, reportez-vous à la rubrique <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/portal/latest/administer/windows/administer-a-federated-server.htm" href="http://server.arcgis.com/fr/portal/latest/administer/windows/administer-a-federated-server.htm">Administrer un serveur fédéré</a>.</p></div></div><div class="section1" id="ESRI_SECTION1_95330DD599D34B899A6AEF123440D24A" purpose="section1"><h2>Ajouter <span purpose="ph" translate="no" varid="PortalForArcGIS">Portal for ArcGIS</span> à votre serveur proxy inverse</h2><p id="GUID-57E96981-0F4F-4CCD-8575-3887DFF10792">Avant d'ajouter <span purpose="ph" translate="no" varid="PortalForArcGIS">Portal for ArcGIS</span> au serveur proxy inverse de votre organisation, vous devez effectuer les opérations suivantes :</p><ul purpose="ul" id="UL_F5978DE6A82346F08A10E966A8728ACE"><li purpose="li" id="LI_85752451301946C7818E4E5249B90325"> Configurez HTTPS (HTTP et HTTPS ou HTTPS uniquement) sur le serveur proxy inverse. <span purpose="ph" translate="no" varid="PortalForArcGIS">Portal for ArcGIS</span> requiert HTTPS pour certaines communications. Consultez la documentation de votre serveur proxy pour savoir comment configurer HTTPS.</li><li purpose="li" id="LI_F8E6F46E52544930BB282767356DEF21">Configurez <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> avec votre portail si ce dernier utilise <a class="xref" rel="01n1/01n100000029000000.htm" href="01n1/01n100000029000000.htm">l'authentification Windows intégrée</a>. <span purpose="ph" translate="no" varid="PortalForArcGIS">Portal for ArcGIS</span> requiert pour ce faire l'utilisation d'<span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span>, ce qui permet au serveur proxy inverse de communiquer directement avec votre portail.  Pour des instructions complètes, reportez-vous aux rubriques relatives à la configuration pour <a class="xref" rel="01n1/01n10000001p000000.htm" href="01n1/01n10000001p000000.htm">IIS</a>, <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/portal/latest/administer/windows/configure-arcgis-web-adaptor-portal.htm" href="http://server.arcgis.com/fr/portal/latest/administer/windows/configure-arcgis-web-adaptor-portal.htm">Java (Windows)</a> ou <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/portal/latest/administer/windows/configure-arcgis-web-adaptor-portal.htm" href="http://server.arcgis.com/fr/portal/latest/administer/windows/configure-arcgis-web-adaptor-portal.htm">Java (Linux)</a>.</li></ul><p id="GUID-37C824CC-8344-4847-B87E-A773A4917343"> Après avoir configuré <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> avec <span purpose="ph" translate="no" varid="PortalForArcGIS">Portal for ArcGIS</span>, vous pouvez utiliser <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> avec un serveur proxy inverse de votre réseau en ajoutant les composants directement aux directives de proxy. Par exemple, si vous utilisez Apache comme serveur proxy inverse, vous devez ajouter <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> aux directives ProxyPass du fichier de configuration du serveur Web Apache <span class="usertext">httpd.conf</span> :</p><div class="codeblock" purpose="codeblock"><div class="highlight"><pre><code>ProxyPass /arcgis https://webadaptorhost.domain.com/webadaptorname
ProxyPassReverse /arcgis https://webadaptorhost.domain.com/webadaptorname
</code></pre></div>
</div><p id="GUID-FE2EA9BF-35AA-4795-ADD1-53CD686B7D1C">Les directives ProxyPass doivent correspondre au nom désigné pour <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> (<span class="usertext">/webadaptorname</span> dans l'exemple ci-dessus). Si l'URL d'accès à votre site ne se termine pas par la chaîne par défaut <span class="usertext">/arcgis</span>, indiquez le nom autre que celui par défaut d'<span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> (par exemple, <span class="usertext">/myorg</span>).</p><p id="GUID-9F7B9781-DE8C-4648-BA8B-71B50B1AD252">Vérifiez que le serveur proxy prend en charge le codage gzip et qu'il est configuré pour autoriser l'en-tête <span class="usertext">Accept-Encoding</span>. Cet en-tête permet aux réponses HTTP 1.1 d’être compressées à l’aide du codage gzip. Ainsi, si l’en-tête est autorisé, une demande de chargement de <span purpose="ph" translate="no" varid="AGMapViewer">Map Viewer</span> (Visionneuse de carte) renvoie une réponse compressée d’environ 1,4 Mo au navigateur. Si l'en-tête n'est pas autorisé ou est ignoré, la demande renvoie une réponse non compressée d'environ 6,8 Mo au navigateur. Si le débit de votre réseau est lent, le chargement de <span purpose="ph" translate="no" varid="AGMapViewer">Map Viewer</span> (Visionneuse de carte) est lent lorsque les réponses ne sont pas compressées. Il est par conséquent vivement recommandé d'autoriser cet en-tête dans le cadre de la configuration de votre serveur proxy inverse.</p><p id="GUID-74EBEF4A-6086-41E1-B684-E34751FB0F74">Définissez la propriété <span class="usertext">WebContextURL</span> du portail. Cela permet à <span purpose="ph" translate="no" varid="PortalForArcGIS">Portal for ArcGIS</span> de créer les URL correctes sur toutes les ressources transmises à l'utilisateur final. Procédez comme suit pour modifier <span class="usertext">WebContextURL</span> :</p><div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="GUID-6E6E7C99-8AEA-46C9-8F20-020A8CFAB3DC"><div class="step_title">Etapes :</div><ol>
<li purpose="step" id="GUID-59FDE619-ABBD-4492-BFEE-28FF55DE3383">
<span purpose="cmd" id="GUID-9EA6CB2B-42D5-4CDB-B3F4-A6B7F812091D">Ouvrez un navigateur Web et connectez-vous au <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/portal/latest/administer/windows/about-the-arcgis-portal-directory.htm" href="http://server.arcgis.com/fr/portal/latest/administer/windows/about-the-arcgis-portal-directory.htm">répertoire Portal for ArcGIS</a> en tant que membre du rôle d'administrateur par défaut de l'organisation de votre portail. L'URL est au format <span class="usertext">https://portal.domain.com:7443/arcgis/portaladmin</span>.</span>
</li>
<li purpose="step" id="ESRI_STEP_4A71032028594FDFAE77EB6051A96881"><span purpose="cmd" id="GUID-A236D912-6825-4E73-B1DB-D8C814D49586">Cliquez sur <span class="uicontrol">Système <span class="greaterthan">&gt;</span> Propriétés <span class="greaterthan">&gt;</span> Mettre à jour les propriétés</span>.</span></li><li purpose="step" id="ESRI_STEP_0EF7E5092BE34404ABD96EE79938D1D4"><span purpose="cmd" id="GUID-063C0CE8-7348-4DDA-BB7E-7A4032491D28">Dans la boîte de dialogue <span class="uicontrol">Mettre à jour les propriétés du système</span>, insérez la notation JSON suivante en remplaçant l'URL de l'alias DNS ou de votre serveur proxy inverse, telle qu'elle apparaît aux utilisateurs en dehors du pare-feu de votre organisation.</span><div class="info" purpose="info"><div class="codeblock" purpose="codeblock"><div class="highlight"><pre><code>{
   &quot;WebContextURL&quot;: &quot;https://reverseproxy.domain.com/myorg&quot;
}
</code></pre></div>
</div></div></li><li purpose="step" id="ESRI_STEP_1457CC3BB07B4B71B9EC8B3D90E02C29"><span purpose="cmd" id="GUID-2D3DBC34-4358-4CC3-97A3-A368FAFB412E">Cliquez sur <span class="uicontrol">Mettre à jour les propriétés</span>.</span></li></ol></div><div class="result" id="ESRI_RESULT_E0467B285DAC41E8A139B7CE28B5FB8D" purpose="result"><p id="GUID-8C019229-BD7E-4ABB-B2A4-BB6F6254F952">  Une fois que vous avez configuré le serveur proxy inverse avec votre portail, vous pouvez accéder à votre portail via l'URL du serveur proxy inverse à la place de l'URL d'<span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span>. Tout ce à quoi vous accédez sur le site Web du portail ou dans le répertoire Portal for ArcGIS retournera l'URL du serveur proxy inverse.</p><p id="GUID-D24561C2-6370-4C50-A1B0-7BC7114463E1">Les tâches administratives suivantes doivent être réexécutées en utilisant l'URL du serveur proxy inverse :</p><ul purpose="ul" id="UL_41CD7E1BB59F467797051D32633B1739"><li purpose="li" id="LI_3CDA933062E64F718442AF43005DBC63"><a class="xref" target="_blank" rel="http://server.arcgis.com/fr/portal/latest/administer/windows/federate-an-arcgis-server-site-with-your-portal.htm" href="http://server.arcgis.com/fr/portal/latest/administer/windows/federate-an-arcgis-server-site-with-your-portal.htm">Fédérer un site ArcGIS Server avec votre portail</a>.</li><li purpose="li" id="LI_F3E155D55DBD47D1B5F99B32FC125622"><a class="xref" target="_blank" rel="http://server.arcgis.com/fr/portal/latest/administer/windows/configure-services.htm" href="http://server.arcgis.com/fr/portal/latest/administer/windows/configure-services.htm">Configurer des services utilitaires</a></li></ul><p id="GUID-59AEAE25-42E1-41C5-9348-2710B487DCC2">Si vous avez ajouté auparavant des services sécurisés en tant qu'éléments dans votre portail, vous devrez supprimer les éléments d'origine et les ajouter de nouveau. En effet, les éléments d'origine utilisent l'URL d'<span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> à la place de l'URL du serveur proxy inverse.  Pour obtenir des instructions, reportez-vous à la rubrique <a class="xref" target="_blank" rel="http://server.arcgis.com/fr/portal/latest/administer/windows/connect-secured-services.htm" href="http://server.arcgis.com/fr/portal/latest/administer/windows/connect-secured-services.htm">Se connecter à des services sécurisés</a>.</p></div></div></div><div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>