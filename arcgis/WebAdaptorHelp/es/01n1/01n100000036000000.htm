<html lang="es" xml:lang="es"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="Un servidor proxy inverso es un equipo implementado dentro de una red perimetral (también conocida como zona desmilitarizada [DMZ] o subred filtrada) que gestiona las solicitudes de Internet y las reenvía a los equipos de la red interna."><meta name="content-language" content="es"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - 
Utilizar un servidor proxy inverso con Portal for ArcGIS</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-E452FD74-CAA7-4871-BC78-990DC4D01E03]--><body><div id="content"><div class="header"><h1>
Utilizar un servidor proxy inverso con Portal for ArcGIS</h1><div id="breadcrumb"></div></div>
<p id="GUID-E6059846-9BAC-4204-8CA5-AA40D26CE425">Un servidor proxy inverso es un equipo implementado dentro de una red perimetral (también conocida como zona desmilitarizada [DMZ] o subred filtrada) que gestiona las solicitudes de Internet y las reenvía a los equipos de la red interna. El reenvío de solicitudes en nombre del servidor proxy inverso enmascara la identidad de los equipos detrás del firewall de la organización, protegiendo así los equipos internos del ataque directo de los usuarios de Internet. Se pueden implementar funciones de seguridad adicionales en el servidor proxy inverso para proteger aún más la red interna de los usuarios externos.</p><p id="GUID-1275121D-C786-4A30-98F5-8F46E77A2F67"> Si su servidor proxy inverso admite una función de verificación de estado, puede utilizar el extremo de verificación de estado de <span purpose="ph" translate="no" varid="PortalForArcGIS">Portal for ArcGIS</span> para determinar si el portal está disponible para recibir solicitudes. Esto resulta útil para determinar rápidamente si hay un fallo de software o hardware en el sitio.  Para obtener más información, consulte el tema <a class="xref" target="_blank" rel="http://resources.arcgis.com/es/help/arcgis-rest-api/02r3/02r300000306000000.htm" href="http://resources.arcgis.com/es/help/arcgis-rest-api/02r3/02r300000306000000.htm">Verificación de estado</a> del portal en la API REST de ArcGIS.</p>
<div class="notes" id="GUID-B752AE0F-289C-4AD2-829B-7A439E7D7FCD"><div class="caution"><img class="note_img" src="rsrc/caution.png" alt="Precaución" title="Precaución"><span>Precaución:</span></div><div class="tipbody"><p id="GUID-FB823391-E68A-4647-9728-6449BCA394C1"> La configuración que se detalla en este tema se debe realizar antes de federar cualquier sitio de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> en su portal de <span purpose="ph" translate="no" varid="ArcGIS_Enterprise_long">ArcGIS Enterprise</span>. Dejar sin federar un sitio de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> tiene varias consecuencias importantes y no se puede subsanar fácilmente. Para obtener más información, consulte <a class="xref" target="_blank" rel="http://server.arcgis.com/es/portal/latest/administer/windows/administer-a-federated-server.htm" href="http://server.arcgis.com/es/portal/latest/administer/windows/administer-a-federated-server.htm">Administrar un servidor federado</a>.</p></div></div><div class="section1" id="ESRI_SECTION1_95330DD599D34B899A6AEF123440D24A" purpose="section1"><h2>Agregar <span purpose="ph" translate="no" varid="PortalForArcGIS">Portal for ArcGIS</span> a su servidor proxy inverso</h2><p id="GUID-57E96981-0F4F-4CCD-8575-3887DFF10792">Antes de agregar <span purpose="ph" translate="no" varid="PortalForArcGIS">Portal for ArcGIS</span> al servidor proxy inverso de su organización, debe completar los siguientes pasos:</p><ul purpose="ul" id="UL_F5978DE6A82346F08A10E966A8728ACE"><li purpose="li" id="LI_85752451301946C7818E4E5249B90325"> Configure HTTPS (HTTP y HTTPS o HTTPS solo) en el servidor proxy inverso. <span purpose="ph" translate="no" varid="PortalForArcGIS">Portal for ArcGIS</span> requiere HTTPS para algunas comunicaciones. Consulte la documentación del producto de su servidor proxy para conocer el procedimiento de configuración de HTTPS.</li><li purpose="li" id="LI_F8E6F46E52544930BB282767356DEF21">Configure <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> con su portal si este último va a utilizar la <a class="xref" rel="01n1/01n100000029000000.htm" href="01n1/01n100000029000000.htm">autenticación de Windows integrada</a>.   <span purpose="ph" translate="no" varid="PortalForArcGIS">Portal for ArcGIS</span> requiere el uso de <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> y esto permitirá que el servidor proxy inverso se comunique correctamente con el portal.  Para obtener instrucciones completas, consulte los temas de configuración para <a class="xref" rel="01n1/01n10000001p000000.htm" href="01n1/01n10000001p000000.htm">IIS</a>, <a class="xref" target="_blank" rel="http://server.arcgis.com/es/portal/latest/administer/windows/configure-arcgis-web-adaptor-portal.htm" href="http://server.arcgis.com/es/portal/latest/administer/windows/configure-arcgis-web-adaptor-portal.htm">Java (Windows)</a> o <a class="xref" target="_blank" rel="http://server.arcgis.com/es/portal/latest/administer/windows/configure-arcgis-web-adaptor-portal.htm" href="http://server.arcgis.com/es/portal/latest/administer/windows/configure-arcgis-web-adaptor-portal.htm">Java (Linux)</a>.</li></ul><p id="GUID-37C824CC-8344-4847-B87E-A773A4917343"> Tras configurar <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> con <span purpose="ph" translate="no" varid="PortalForArcGIS">Portal for ArcGIS</span>, <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> puede utilizarse con el servidor proxy inverso de su organización agregando componentes directamente a las directivas del proxy. Por ejemplo, si utiliza Apache como servidor proxy inverso, deberá agregar <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> a las directivas ProxyPass del archivo de configuración del servidor web de Apache <span class="usertext">httpd.conf</span>:</p><div class="codeblock" purpose="codeblock"><div class="highlight"><pre><code>ProxyPass /arcgis https://webadaptorhost.domain.com/webadaptorname
ProxyPassReverse /arcgis https://webadaptorhost.domain.com/webadaptorname
</code></pre></div>
</div><p id="GUID-FE2EA9BF-35AA-4795-ADD1-53CD686B7D1C">Las directivas ProxyPass deben coincidir con el nombre designado para <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> (<span class="usertext">/webadaptorname</span> en la muestra anterior).  Si la dirección URL del sitio no termina con la cadena de caracteres predeterminada <span class="usertext">/arcgis</span>, especifique el nombre no predeterminado de <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> (por ejemplo, <span class="usertext">/myorg</span>).</p><p id="GUID-9F7B9781-DE8C-4648-BA8B-71B50B1AD252">Verifique que el servidor proxy admite la codificación de gzip y que está configurado para permitir el encabezado <span class="usertext">Accept-Encoding</span>. Este encabezado permite que se compriman las respuestas de HTTP 1.1 con la codificación de gzip.  Por ejemplo, si se permite el encabezado, una solicitud para cargar el <span purpose="ph" translate="no" varid="AGMapViewer">Map Viewer</span> devolverá una respuesta comprimida de alrededor de 1,4 MB al navegador. Si el encabezado se omite o no se permite, la solicitud devolverá una respuesta descomprimida de alrededor de 6,8 MB al navegador. Si la velocidad de su red es lenta, el <span purpose="ph" translate="no" varid="AGMapViewer">Map Viewer</span> puede tardar bastante en cargarse si las respuestas no se comprimen. Es muy recomendable permitir este encabezado como parte de la configuración de su servidor proxy inverso.</p><p id="GUID-74EBEF4A-6086-41E1-B684-E34751FB0F74">Establezca la propiedad <span class="usertext">WebContextURL</span> del portal. Esto ayuda a <span purpose="ph" translate="no" varid="PortalForArcGIS">Portal for ArcGIS</span> a construir las direcciones URL correctas de todos los recursos que envía al usuario final. Haga lo siguiente para cambiar la <span class="usertext">WebContextURL</span>:</p><div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="GUID-6E6E7C99-8AEA-46C9-8F20-020A8CFAB3DC"><div class="step_title">Pasos:</div><ol>
<li purpose="step" id="GUID-59FDE619-ABBD-4492-BFEE-28FF55DE3383">
<span purpose="cmd" id="GUID-9EA6CB2B-42D5-4CDB-B3F4-A6B7F812091D">Abra un navegador web e inicie sesión en el <a class="xref" target="_blank" rel="http://server.arcgis.com/es/portal/latest/administer/windows/about-the-arcgis-portal-directory.htm" href="http://server.arcgis.com/es/portal/latest/administer/windows/about-the-arcgis-portal-directory.htm">Directorio de Portal for ArcGIS</a> como miembro del rol de administrador predeterminado de la organización de su portal. La dirección URL tiene el formato <span class="usertext">https://portal.domain.com:7443/arcgis/portaladmin</span>.</span>
</li>
<li purpose="step" id="ESRI_STEP_4A71032028594FDFAE77EB6051A96881"><span purpose="cmd" id="GUID-A236D912-6825-4E73-B1DB-D8C814D49586">Haga clic en <span class="uicontrol">Sistema <span class="greaterthan">&gt;</span> Propiedades <span class="greaterthan">&gt;</span> Actualizar propiedades</span>.</span></li><li purpose="step" id="ESRI_STEP_0EF7E5092BE34404ABD96EE79938D1D4"><span purpose="cmd" id="GUID-063C0CE8-7348-4DDA-BB7E-7A4032491D28">En el cuadro de diálogo <span class="uicontrol">Update System Properties</span>, inserte el JSON siguiente, sustituyendo la dirección URL de alias DNS o de su propio servidor proxy inverso tal como la ven los usuarios de fuera del firewall de su organización.</span><div class="info" purpose="info"><div class="codeblock" purpose="codeblock"><div class="highlight"><pre><code>{
   &quot;WebContextURL&quot;: &quot;https://reverseproxy.domain.com/myorg&quot;
}
</code></pre></div>
</div></div></li><li purpose="step" id="ESRI_STEP_1457CC3BB07B4B71B9EC8B3D90E02C29"><span purpose="cmd" id="GUID-2D3DBC34-4358-4CC3-97A3-A368FAFB412E">Haga clic en <span class="uicontrol">Actualizar propiedades</span>.</span></li></ol></div><div class="result" id="ESRI_RESULT_E0467B285DAC41E8A139B7CE28B5FB8D" purpose="result"><p id="GUID-8C019229-BD7E-4ABB-B2A4-BB6F6254F952">  Una vez que haya configurado el servidor proxy inverso con el portal, podrá acceder al portal a través de la dirección URL del servidor proxy inverso en lugar de la dirección URL de <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span>. Todo aquello a lo que se acceda del sitio Web del portal o del directorio de Portal for ArcGIS devolverá la dirección URL del servidor proxy inverso.</p><p id="GUID-D24561C2-6370-4C50-A1B0-7BC7114463E1">Es necesario volver a completar las tareas administrativas siguientes usando la dirección URL del servidor proxy inverso:</p><ul purpose="ul" id="UL_41CD7E1BB59F467797051D32633B1739"><li purpose="li" id="LI_3CDA933062E64F718442AF43005DBC63"><a class="xref" target="_blank" rel="http://server.arcgis.com/es/portal/latest/administer/windows/federate-an-arcgis-server-site-with-your-portal.htm" href="http://server.arcgis.com/es/portal/latest/administer/windows/federate-an-arcgis-server-site-with-your-portal.htm">Federar un sitio de ArcGIS Server con su portal</a></li><li purpose="li" id="LI_F3E155D55DBD47D1B5F99B32FC125622"><a class="xref" target="_blank" rel="http://server.arcgis.com/es/portal/latest/administer/windows/configure-services.htm" href="http://server.arcgis.com/es/portal/latest/administer/windows/configure-services.htm">Configurar servicios de utilidades</a></li></ul><p id="GUID-59AEAE25-42E1-41C5-9348-2710B487DCC2">Si había agregado servicios protegidos como elementos del portal con anterioridad, deberá eliminar los elementos originales y volverlos a agregar. Esto se debe a que los elementos originales utilizan la dirección URL de <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> en lugar de la dirección URL del servidor del proxy inverso.  Consulte las instrucciones en <a class="xref" target="_blank" rel="http://server.arcgis.com/es/portal/latest/administer/windows/connect-secured-services.htm" href="http://server.arcgis.com/es/portal/latest/administer/windows/connect-secured-services.htm">Conectarse a servicios protegidos</a>.</p></div></div></div><div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>