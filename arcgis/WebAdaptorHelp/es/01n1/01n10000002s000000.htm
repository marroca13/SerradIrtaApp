<html lang="es" xml:lang="es"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="Para eliminar un punto único de fallo en el nivel de ArcGIS Server, se puede configurar un sitio de ArcGIS Server en un solo equipo en modo de conmutación por error que incluya un equilibrador de carga de terceros."><meta name="content-language" content="es"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - 
Implementación en un solo equipo de alta disponibilidad (activo-pasivo)</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-5BAC2F6A-272F-46A1-B7C1-2051320339BA]--><body><div id="content"><div class="header"><h1>
Implementación en un solo equipo de alta disponibilidad (activo-pasivo)</h1><div id="breadcrumb"></div></div>
<p id="GUID-36F9A1B2-A480-4256-8D70-EDA6F9381933"> Para eliminar un punto único de fallo en el nivel de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, se puede configurar un sitio de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> en un solo equipo en modo de conmutación por error que incluya un equilibrador de carga de terceros.</p><p id="GUID-530A2A53-6D12-423C-A75F-A29D9D8EB644"> En un nivel elevado, la idea de este patrón de implementación es clonar un sitio en un solo equipo y colocar dos o más instancias independientes del mismo detrás de un balanceador de carga con una configuración activo-pasivo. Aunque todos los sitios detrás del balanceador de carga se están ejecutando y están preparados para las solicitudes de servicio, el balanceador de carga solo pasará las solicitudes a uno de los sitios, el que se ha designado como sitio principal. Si el balanceador de carga detecta que el sitio principal no está disponible, las solicitudes entrantes se redirigen a un sitio de conmutación por error o en espera.</p><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-5C90B73D-37F7-49B6-BA71-C78FE2A76D5D-web.png" purpose="img" alt="Implementación en un solo equipo de alta disponibilidad un con sitio en espera" title="Implementación en un solo equipo de alta disponibilidad un con sitio en espera"></td></tr><tr><td><div class="caption" purpose="caption">Implementación en un solo equipo de alta disponibilidad un con sitio en espera. Los administradores conectan con cada sitio por separado. Ambos sitios tienen una copia idéntica de los directorios del servidor y del almacén de configuración.</div></td></tr></table></div><p id="GUID-B2F53AB0-20AB-4A1A-87B9-2DE1B681002F"> El proceso de conmutación por error se gestiona completamente fuera de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> y, generalmente, puede configurarse para que se desencadene cuando el equipo de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> no esté completamente disponible (fallo de red o de hardware) o, en algunos casos, cuando un servicio SIG o una operación específicos falle.</p><div class="notes" id="GUID-4AB84509-E900-4BAA-BF8A-1795C5996A5F"><div class="note"><img class="note_img" src="rsrc/note.png" alt="Nota" title="Nota"><span>Nota:</span></div><div class="tipbody"><p id="GUID-E7204827-F79D-4C0A-BCB5-465EBCEC4760">Puede solicitar archivos de licencia en <span purpose="ph" varid="myesrilink"><a target="_blank" class="xref" href="https://my.esri.com/" rel="https://my.esri.com/">My Esri</a></span> para los sitios en espera o de conmutación por error sin ningún coste adicional.</p></div></div><p id="GUID-582734D0-2474-450E-BA4C-513D2701FE6B"> Aunque en este patrón de implementación se utilizan varios equipos para alojar <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, esta configuración no se puede describir técnicamente como un sitio en varios equipos, ya que cada uno de los sitios detrás del equilibrador de carga es independiente de los demás. Cada sitio se compone de un solo equipo de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> y tiene su propio almacén de configuración y local y sus propios directorios de servidor locales.</p>
<div class="section1" id="ESRI_SECTION1_6855783BE1014AAF8C9BAAA490966934" purpose="section1"><h2>Equipo de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, directorios de servidor y almacén de configuración</h2><p id="GUID-14FA6DC6-BCD6-4225-ABE4-05DAC4AE0791"> Aplique aquí las mismas consideraciones que se han descrito en la <a class="xref" rel="01n1/01n10000002w000000.htm" href="01n1/01n10000002w000000.htm">implementación en un solo equipo</a>. Cada <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> tiene sus propios directorios de servidor y almacén de configuración locales. De este modo se garantiza el máximo rendimiento y se mantienen las interdependencias en el mínimo.</p></div><div class="section1" id="ESRI_SECTION1_BF1EDC0004BA41DC802401E547D314D9" purpose="section1"><h2>Datos</h2><p id="GUID-7FF07C0D-DB56-421E-AEF9-68C62417A2CA"> Si se utilizan fuentes de datos basadas en archivos en los servicios SIG, se recomienda que se almacenen localmente en cada equipo de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> en vez de almacenarse en ubicaciones compartidas de red para potenciar al máximo el rendimiento de los servicios. En algunos casos, como cuando se manejan grandes cantidades de imágenes, compartir los archivos en la red puede ser a única opción práctica. Si se utilizan archivos en recursos compartidos a través de la red, es muy importante elegir un dispositivo de almacenamiento configurado para alta disponibilidad.</p><p id="GUID-FC892FD0-09B5-4A0E-AA48-03C3FF722C81">Si se utilizan bases de datos, se puede dedicar una base de datos a cada uno de los sitios: una base de datos en el sitio primario y otra independiente en el sitio en espera. Para mantener las bases de datos en sincronía, se puede aprovechar la replicación de la base de datos o, en caso necesario, las técnicas de replicación de geodatabase. También se puede sacar partido de otras técnicas de alta disponibilidad del proveedor de la base de datos.</p></div><div class="section1" id="ESRI_SECTION1_E28679F50AC74EA885D013361DC0F1E5" purpose="section1"><h2>Servidor proxy inverso</h2><p id="GUID-9605B5A1-A4C5-4E7B-80F0-F58070FF4D82"> En esta configuración, se requiere un balanceador de carga de terceros. Como mínimo, este componente se utiliza para manejar la carga entre los sitios y la conmutación por error cuando sea necesario. Normalmente, el propio balanceador de carga también cumple el papel del servidor proxy inverso descrito en la <a class="xref" rel="01n1/01n10000002r000000.htm" href="01n1/01n10000002r000000.htm">Implementación en un solo equipo con un servidor proxy inverso</a>. En algunos escenarios, puede que ya tenga un <a class="xref" target="_blank" rel="http://server.arcgis.com/es/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm" href="http://server.arcgis.com/es/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm">servidor proxy inverso</a> configurado aparte del balanceador de carga.</p><p id="GUID-C09E8E7A-2E5A-4CA2-9C60-6AA77BD53977">Si su equilibrador de carga de red admite una función de verificación de estado, puede utilizar el extremo de verificación de estado de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> para determinar si el sitio está disponible para recibir solicitudes.  Esto resulta útil para determinar rápidamente si hay un fallo de software o hardware en el sitio.  Para obtener más información, consulte <a class="xref" target="_blank" rel="http://resources.arcgis.com/es/help/arcgis-rest-api/02r3/02r3000002n7000000.htm" href="http://resources.arcgis.com/es/help/arcgis-rest-api/02r3/02r3000002n7000000.htm">Verificación de estado</a> en la API REST de ArcGIS.</p><p id="GUID-4F6CC4E8-8356-43C3-B384-011F5711C6D7"> El uso de ArcGIS Web Adaptor es opcional y normalmente solo es necesario en este escenario si desea aprovechar la autenticación de nivel web. Para hacerlo más sencillo, puede optar por configurarlo en el mismo equipo que <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>.  También se puede configurar en un equipo dedicado. En cualquier caso, si utiliza ArcGIS Web Adaptor, debe configurar un ArcGIS Web Adaptor independiente para cada sitio.</p></div><div class="section1" id="ESRI_SECTION1_196562782F0149D9A8D7862BA38841EB" purpose="section1"><h2>Otras consideraciones</h2><div class="section2" id="ESRI_SECTION2_C0955A61BFD348F68136E7289F25B83B" purpose="section2"><h3>Mantener los servicios de los sitios en sincronía</h3><p id="GUID-236BE866-44C2-4547-A913-EFAC3C3B4888"> A diferencia de un verdadero sitio en varios equipos, esta configuración requiere que todos los sitios detrás del balanceador de carga alojen exactamente el mismo contenido y sigan el mismo modelo de seguridad. Es responsabilidad suya asegurarse de que todos los sitios parecen exactamente el mismo para el balanceador de carga.</p><p id="GUID-8F3DE45D-6ADC-4E02-9070-DB09850AFCC8"> Hay varias técnicas que pueden ayudarle a mantener los servicios de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> sincronizados entre los sitios principales y los de conmutación por error:</p><ul purpose="ul" id="UL_F4A876F72DBB46A397A69054C851CD96"><li purpose="li" id="LI_2402FD84A05D4D2695366E4E4B018FF4">Secuencia de comandos: <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> incluye una API RESTful administrativa que puede utilizar para programar tareas administrativas como, por ejemplo, publicar servicios y cambiar su configuración de seguridad. Puede crear sus propias secuencias de comandos para aplicar cambios a todos los <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> incluidos en su implementación de modo coherente. La secuencia de comando es especialmente útil cuando es necesario hacer pequeños ajustes, como cambiar la seguridad de un servicio o sobrescribirlo. Para obtener más información, consulte <a class="xref" target="_blank" rel="http://server.arcgis.com/es/server/latest/administer/windows/scripting-arcgis-server-administration.htm" href="http://server.arcgis.com/es/server/latest/administer/windows/scripting-arcgis-server-administration.htm">Administración de ArcGIS Server mediante secuencias de comandos</a>.</li><li purpose="li" id="LI_952B7B2D50774CF58097DC68DC7094F5"> Virtualización: si opera en un entorno virtual, puede crear plantillas de equipo virtual y utilizarlas para lanzar sitios nuevos. Cada plantilla tendrá una copia de los datos necesarios para los servicios SIG (a menos que se utilice una base de datos). La plantilla también debe tener todos los servicios publicados y configurados. Si es necesario hacer cambios como, por ejemplo, agregar o actualizar servicios existentes, se puede crear una nueva plantilla para lanzar posteriormente nuevos equipos virtuales que sustituirían el grupo de equipos de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> existente que utiliza el equilibrador de carga. Las plantillas de equipos virtuales también se pueden utilizar para recuperar rápidamente equipos de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> obsoletos.</li></ul><p id="GUID-34948C59-10A8-43D3-9F4B-0BA0299F63D9"> El procedimiento recomendado para aplicar cambios a los sitios en este patrón de implementación es el siguiente:</p><div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_784E84BE74D5437E9707B1399BAF19EE"><div class="step_title">Pasos:</div><ol><li purpose="step" id="ESRI_STEP_B00B728FB6064C4E9681C58120712FBB"><span purpose="cmd" id="GUID-212C7A42-1687-4CCF-8C9C-07B0C4F1FB24"> Los cambios administrativos se hacen primero en un sitio que está en modo de espera. Por ejemplo, debe añadir un nuevo servicio y cambiar la seguridad de otro en un sitio que no esté manejando solicitudes activamente. Con ello se garantiza que no se verán afectadas en absoluto las aplicaciones que utilizan el sitio principal.</span></li><li purpose="step" id="ESRI_STEP_4EB66725C203433EAE03FF73D698F6EA"><span purpose="cmd" id="GUID-437B3239-C47C-4C38-B0B1-FCDD44E91446">Configure manualmente el balanceador de carga para pasar todas las solicitudes al sitio en espera en el que se han realizado los cambios.</span></li><li purpose="step" id="ESRI_STEP_4D19A677A2694061AFDF1806C895BB3B"><span purpose="cmd" id="GUID-6350C413-0F06-4D6C-AE2D-8AE3C45F3423">Aplique los mismos cambios al sitio inactivo.</span></li><li purpose="step" id="ESRI_STEP_18542AF42544419FA949DC39C30CDBD4"><span purpose="cmd" id="GUID-43995EA3-BF8D-431F-9636-94A578E0E428">Revierta el balanceador de carga de modo que las solicitudes vuelvan a dirigirse al sitio principal original y deje el sitio en espera en modo de espera.</span></li></ol></div></div><p id="GUID-87CCE021-1815-4423-8A82-75FB64408A6B"> Los cambios del sitio que se han descrito en el procedimiento anterior pueden aplicarse manualmente mediante <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> Manager, secuencias de comandos o imágenes virtuales.</p></div><div class="section2" id="ESRI_SECTION2_7A70BE1D4E11428099693C68837E9A51" purpose="section2"><h3>Geoprocesamiento asíncrono y tareas de larga duración</h3><p id="GUID-63ABF49E-433F-4944-AAC1-5820842EE1EF"> Cuando el balanceador de carga cambia al sitio en espera, se pierden las solicitudes activas en el sitio principal. Por ejemplo, si una solicitud de larga duración como una tarea de geoprocesamiento se está ejecutando cuando se produce la conmutación por error, será necesario que la aplicación cliente reinicie la tarea en el sitio en espera.</p></div><div class="section2" id="ESRI_SECTION2_AD2A918F0F5D4FF59EEDA3502C56B77A" purpose="section2"><h3>Utilizar la seguridad basada en token</h3><p id="GUID-D8F944FD-F648-4A63-84EB-013DDE5EE2F1"> Si se utiliza la autenticación basada en token, también denominada autenticación de nivel de SIG, es importante que todos los sitios de esta configuración utilicen exactamente la misma clave de token compartida. De lo contrario, los tokens generados en el sitio principal no serán válidos cuando se utilicen en un sitio en espera. Para obtener información sobre cómo duplicar las claves de token compartidas en varios sitios, consulte <a class="xref" target="_blank" rel="http://server.arcgis.com/es/server/latest/administer/windows/about-arcgis-tokens.htm" href="http://server.arcgis.com/es/server/latest/administer/windows/about-arcgis-tokens.htm">Acerca de los tokens de ArcGIS</a> y <a class="xref" target="_blank" rel="http://server.arcgis.com/es/server/latest/administer/windows/editing-token-settings-in-manager.htm" href="http://server.arcgis.com/es/server/latest/administer/windows/editing-token-settings-in-manager.htm">Editar la configuración de token en el Administrador</a>.</p></div></div><div class="section1" id="ESRI_SECTION1_BF8390AFC33E4EE28CC8EFEA035E1177" purpose="section1"><h2>Ventajas</h2><ul purpose="ul" id="UL_D574A80631724B608ABA0C3675CC3E59"><li purpose="li" id="LI_B0AE7ABEB5DE479E8502D99B03B1A1AB">La configuración de conmutación por error activo-pasivo le permite crear un nivel de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> redundante sin incurrir en cargos de licencia. Los servidores en espera pueden obtener licencia sin coste adicional.</li></ul></div><div class="section1" id="ESRI_SECTION1_9A6F1AE806F140AD80FB926FCF4A55CA" purpose="section1"><h2>Desventajas</h2><ul purpose="ul" id="UL_2C134694CD7344C2B3B6E70AD1BDB471"><li purpose="li" id="LI_B00353D7F391425ABB1010D183B89649">Cada sitio detrás del balanceador de carga es independiente del resto. Cada sitio debe gestionarse por separado; los sitios tienen su propio almacén de configuración local y sus propios directorios de servidor locales. Esto podría añadir una carga de administración y gestión importante si los servicios o los datos del sitio cambian frecuentemente.</li><li purpose="li" id="LI_F90D1CC466E14AA49D912E0C125EC2AC">Cuando se cambia al sitio en espera, se pierden las solicitudes activas en el sitio principal.</li></ul></div><div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>