<html lang="es" xml:lang="es"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="La implementación activo-activo es una forma de lograr alta disponibilidad en un entorno de producción mediante el uso de un equipo de ArcGIS Server de conmutación por error."><meta name="content-language" content="es"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - Implementación en un solo equipo de alta disponibilidad (activo-activo)</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-D05F2CE7-BB97-4B83-888E-8750E42C8234]--><body><div id="content"><div class="header"><h1>Implementación en un solo equipo de alta disponibilidad (activo-activo)</h1><div id="breadcrumb"></div></div>
<p id="GUID-D10C0CE4-3E31-4EB5-9CF1-BB8000F12735"> Esta configuración es una variación de la <a class="xref" rel="01n1/01n10000002s000000.htm" href="01n1/01n10000002s000000.htm">implementación en un solo equipo de alta disponibilidad (activo-pasivo)</a>, donde el equilibrador de carga está configurado para repartir la carga en todos los sitios en todo momento. En esta configuración, no hay sitios en espera.</p><p id="GUID-05D90C41-2896-4CA2-9E9B-BFB61C97EE67"> En esta arquitectura, se configuran dos o más sitios detrás de un equilibrador de carga de terceros para incrementar la capacidad de la implementación de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>. Puede utilizar esta técnica para ajustar algunas de las limitaciones de alta disponibilidad descritas en la <a class="xref" rel="01n1/01n10000002w000000.htm" href="01n1/01n10000002w000000.htm">implementación en un solo equipo</a> y en los escenarios de <a class="xref" rel="01n1/01n10000002r000000.htm" href="01n1/01n10000002r000000.htm">implementación en un solo equipo con un servidor proxy inverso</a> o ampliar agregando más equipos.</p><p id="GUID-58CAD460-A6FE-446A-A387-BB257F9FF7CF"> Aunque se puede ampliar y conseguir una alta disponibilidad utilizando sitios con varios equipos, hay desventajas y limitaciones en las implementaciones activo-activo que se abordan en este tema.</p><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-90564278-838E-4EBC-9623-219347F4CCCC-web.png" purpose="img" alt="Implementación activo-activo con dos sitios" title="Implementación activo-activo con dos sitios"></td></tr><tr><td><div class="caption" purpose="caption">Implementación activo-activo con dos sitios. Los administradores conectan con cada sitio por separado. Ambos sitios tienen una copia idéntica de los directorios del servidor y del almacén de configuración.</div></td></tr></table></div><p id="GUID-0E95AE0A-1D33-4BA3-8939-8CD03DD6C47A"> En un nivel alto, la idea que subyace a la arquitectura activo-activo en un solo equipo es clonar un sitio en un solo equipo y colocar instancias independientes del mismo detrás de un equilibrador de carga. Técnicamente, esta configuración no se puede describir como un sitio de varios equipos, ya que cada uno de los sitios es independiente del otro, está compuesto por un solo equipo de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> y tiene su almacén de configuración local y sus directorios de servidor propios.</p><p id="GUID-3F39950B-CBC0-4F66-A3C8-C2EA3E97626A">Las implementaciones de un sitio de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> en varios equipos simplifica enormemente la administración del servidor.   Sin embargo, la arquitectura activo-activo puede utilizarse en escenarios donde el número de ajustes de servicios está bien definido, se mantiene estático y puede ofrecer importantes ventajas de rendimiento con respecto a los sitios en varios equipos, especialmente en los servicios de mapas almacenados en caché.</p>
<div class="section1" id="ESRI_SECTION1_4F3569517C2B468A8E70D2523F654294" purpose="section1"><h2>Equipos de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>, directorios de servidor y almacén de configuración</h2><p id="GUID-DFD8B1CC-4625-4260-88FD-AECD77125A30">Cada equipo de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> debe tener su propio almacén de configuraciones local y directorios de caché, de trabajos y de sistema.  De este modo se garantiza el máximo rendimiento y se mantienen las interdependencias en el mínimo. Por el contrario, el directorio (o directorios) de salida debe compartirse entre los sitios.   Para obtener más información, consulte <a class="xref" rel="01n1/01n10000002z000000.htm#ESRI_SECTION2_18A9D985BCFE499E9519BC5084CCB1B3" href="01n1/01n10000002z000000.htm#ESRI_SECTION2_18A9D985BCFE499E9519BC5084CCB1B3">Otras consideraciones</a> a continuación.</p></div><div class="section1" id="ESRI_SECTION1_D145A38FA7744A09BEF49F7BFFFBB5ED" purpose="section1"><h2>Datos</h2><p id="GUID-3667FA67-0195-4578-BEE3-5D95D4A459BB"> Aplique aquí las mismas consideraciones que se han descrito en la <a class="xref" rel="01n1/01n10000002s000000.htm" href="01n1/01n10000002s000000.htm">implementación en un solo equipo de alta disponibilidad (activo-pasivo)</a>.</p></div><div class="section1" id="ESRI_SECTION1_8EF751A1A0674003B0A8AEE7DD7C0FAC" purpose="section1"><h2>  Servidor proxy inverso</h2><p id="GUID-08D30EAA-3B15-4022-9815-F24432074696"> En esta configuración, se requiere un equilibrador de carga de terceros. Como mínimo, este componente distribuye la carga entre todos los sitios. Los equilibradores de carga tienen distintas configuraciones para distribuir la carga, como la operación por turnos y las conexiones mínimas. La selección de la distribución de carga adecuada depende de los servicios web que esté ejecutando en los sitios de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> y de sus patrones de uso.  Los equilibradores de carga también aprovechan normalmente distintas opciones para manejar los fallos. Por ejemplo, puede aplicar reglas en el equilibrador de carga para evitar que este reenvíe solicitudes a un equipo que no está disponible debido a un fallo de hardware o de red o a un determinado servicio de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> que no está disponible.   Si utiliza sitios en un solo equipo como se propone en este patrón, se garantiza que las solicitudes enviadas a un equipo concreto las manejará ese equipo.</p><p id="GUID-A0ECF165-A482-4351-963D-45E5266F6145"> Normalmente, el propio equilibrador de carga también cumple la función de servidor proxy inverso descrita en <a class="xref" rel="01n1/01n10000002r000000.htm" href="01n1/01n10000002r000000.htm">Implementación en un solo equipo con un servidor proxy inverso</a>. En algunos escenarios, puede que ya tenga configurado un <a class="xref" target="_blank" rel="http://server.arcgis.com/es/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm" href="http://server.arcgis.com/es/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm">servidor proxy inverso</a> aparte del equilibrador de carga.</p><p id="GUID-F79D5977-06ED-4481-B6B3-074FFE7C8F1C">Si su equilibrador de carga de red admite una función de verificación de estado, puede utilizar el extremo de verificación de estado de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> para determinar si el sitio está disponible para recibir solicitudes.  Esto resulta útil para determinar rápidamente si hay un fallo de software o hardware en el sitio.  Para obtener más información, consulte <a class="xref" target="_blank" rel="http://resources.arcgis.com/es/help/arcgis-rest-api/02r3/02r3000002n7000000.htm" href="http://resources.arcgis.com/es/help/arcgis-rest-api/02r3/02r3000002n7000000.htm">Verificación de estado</a> en la API REST de ArcGIS.</p><p id="GUID-10CCD4D6-1935-4717-9D69-BFC43BE1161C"> El uso de <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> es opcional y normalmente solo es necesario en este escenario si desea aprovechar la autenticación de nivel web. Puede optar por configurarlo en el mismo equipo que <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> o puede configurarlo en un equipo dedicado.   En cualquier caso, si utiliza <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span>, debe configurar un <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> independiente para cada sitio.</p></div><div class="section1" id="ESRI_SECTION1_196562782F0149D9A8D7862BA38841EB" purpose="section1"><h2>Otras consideraciones</h2><div class="section2" id="ESRI_SECTION2_C0955A61BFD348F68136E7289F25B83B" purpose="section2"><h3>Mantener los servicios de los sitios en sincronía</h3><p id="GUID-236BE866-44C2-4547-A913-EFAC3C3B4888"> A diferencia de un verdadero sitio en varios equipos, esta configuración requiere que todos los sitios detrás del equilibrador de carga alojen exactamente el mismo contenido y sigan el mismo modelo de seguridad. Es responsabilidad suya asegurarse de que todos los sitios parecen exactamente el mismo para el equilibrador de carga.</p><p id="GUID-8F3DE45D-6ADC-4E02-9070-DB09850AFCC8"> Hay varias técnicas que pueden ayudarle a mantener los servicios de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> sincronizados entre los sitios principales y los de conmutación por error:</p><ul purpose="ul" id="UL_F4A876F72DBB46A397A69054C851CD96"><li purpose="li" id="LI_2402FD84A05D4D2695366E4E4B018FF4">Secuencia de comandos: <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> incluye una API RESTful administrativa que puede utilizar para programar tareas administrativas como, por ejemplo, publicar servicios y cambiar su configuración de seguridad. Puede crear sus propios scripts para aplicar cambios a todos los equipos de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> incluidos en su implementación de modo coherente. La secuencia de comando es especialmente útil cuando es necesario hacer pequeños ajustes, como cambiar la seguridad de un servicio o sobrescribirlo. Para obtener más información, consulte <a class="xref" target="_blank" rel="http://server.arcgis.com/es/server/latest/administer/windows/scripting-arcgis-server-administration.htm" href="http://server.arcgis.com/es/server/latest/administer/windows/scripting-arcgis-server-administration.htm">Administración de ArcGIS Server mediante secuencias de comandos</a>.<div class="notes" id="GUID-5134A5DB-8BC5-4DF9-980C-118EA56D6B51"><div class="note"><img class="note_img" src="rsrc/note.png" alt="Nota" title="Nota"><span>Nota:</span></div><div class="tipbody"><p id="GUID-B634C6CC-937A-49DA-8C98-CD7EAFA8A785">No utilice un script para crear el sitio inicial. Cree manualmente el primer sitio en una imagen de máquina virtual y escriba un script para la creación de sitios adicionales a partir de esta imagen base. Crear todas las máquinas a partir de la misma imagen de máquina virtual garantiza que todas las máquinas utilicen la misma clave de cifrado.</p></div></div></li><li purpose="li" id="LI_952B7B2D50774CF58097DC68DC7094F5"> Virtualización: cree una plantilla de máquina virtual y úsela para lanzar nuevos sitios. Como ya se ha mencionado, de esta forma se garantiza que todas las máquinas utilicen la misma clave de cifrado. Además, cada plantilla tendrá una copia de los datos necesarios para los servicios SIG (a menos que se utilice una base de datos) y todos los servicios publicados y configurados. Si es necesario hacer cambios, por ejemplo, agregar o actualizar servicios existentes, cree una nueva plantilla para lanzar otras máquinas virtuales que sustituirían al grupo de equipos de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> existente que utiliza el equilibrador de carga. También puede utilizar plantillas de máquina virtual para recuperar equipos de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> obsoletos.</li></ul><p id="GUID-34948C59-10A8-43D3-9F4B-0BA0299F63D9"> El procedimiento recomendado para aplicar cambios a los sitios en este patrón de implementación es el siguiente:</p><div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_784E84BE74D5437E9707B1399BAF19EE"><div class="step_title">Pasos:</div><ol><li purpose="step" id="ESRI_STEP_B00B728FB6064C4E9681C58120712FBB"><span purpose="cmd" id="GUID-212C7A42-1687-4CCF-8C9C-07B0C4F1FB24"> Realice cambios administrativos primero en un sitio que esté en modo de espera. Por ejemplo, agregue un nuevo servicio y cambie la seguridad de otro en un sitio que no esté gestionando solicitudes activamente. Con ello se garantiza que las aplicaciones que utilizan el sitio principal no se vean afectadas.</span></li><li purpose="step" id="ESRI_STEP_4EB66725C203433EAE03FF73D698F6EA"><span purpose="cmd" id="GUID-437B3239-C47C-4C38-B0B1-FCDD44E91446">Configure manualmente el equilibrador de carga para pasar todas las solicitudes al sitio en espera en el que se han realizado los cambios.</span></li><li purpose="step" id="ESRI_STEP_4D19A677A2694061AFDF1806C895BB3B"><span purpose="cmd" id="GUID-6350C413-0F06-4D6C-AE2D-8AE3C45F3423">Aplique los mismos cambios al sitio inactivo.</span></li><li purpose="step" id="ESRI_STEP_18542AF42544419FA949DC39C30CDBD4"><span purpose="cmd" id="GUID-43995EA3-BF8D-431F-9636-94A578E0E428">Revierta el equilibrador de carga de modo que las solicitudes vuelvan a dirigirse al sitio principal original y deje el sitio en espera en modo de espera.</span></li></ol></div></div><p id="GUID-87CCE021-1815-4423-8A82-75FB64408A6B"> Los cambios del sitio que se han descrito en el procedimiento anterior pueden aplicarse manualmente mediante <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> Manager, scripts o imágenes virtuales.</p></div><div class="section2" id="ESRI_SECTION2_18A9D985BCFE499E9519BC5084CCB1B3" purpose="section2"><h3>Compartir el directorio de salida</h3><p id="GUID-22758F5B-AC7B-46BA-8384-6B5C7A1127E7">Algunas operaciones de servicios de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> utilizan como referencia los recursos de uno o varios directorios de salida.  Por ejemplo, los servicios de mapas pueden escribir imágenes en un directorio de salida y hacer referencia a ellas a través de una URL en la respuesta a la solicitud.  Para que los clientes obtengan correctamente la imagen, todos los sitios de su configuración activo-activo deben hacer referencia al mismo directorio de salida.  Esto se consigue colocando los directorios de salida en un recurso de red y compartiéndolos con los sitios.</p><p id="GUID-5228E005-D886-437A-A492-AD4B96BC5DCA">A continuación, se proporciona una lista de las operaciones de servicio que utilizan directorios de salida:</p><ul purpose="ul" id="UL_68A5033169114B18B7A572649B709AA8"><li purpose="li" id="LI_77ED29AD1C4A4D34B1F219D776C28968"><a class="xref" target="_blank" rel="http://resources.arcgis.com/es/help/arcgis-rest-api/02r3/02r3000000rp000000.htm" href="http://resources.arcgis.com/es/help/arcgis-rest-api/02r3/02r3000000rp000000.htm">Crear una réplica del servicio de entidades</a> (servicio de entidades)</li><li purpose="li" id="LI_7AA237DE47F14F308CFD25D74BC00B5F"><a class="xref" target="_blank" rel="http://resources.arcgis.com/es/help/arcgis-rest-api/02r3/02r3000000s7000000.htm" href="http://resources.arcgis.com/es/help/arcgis-rest-api/02r3/02r3000000s7000000.htm">Descargar una imagen ráster</a> (servicio de imágenes)</li><li purpose="li" id="LI_3CC1979547874B5F8BDC59C3F9A1500D"><a class="xref" target="_blank" rel="http://resources.arcgis.com/es/help/arcgis-rest-api/02r3/02r3000000v7000000.htm" href="http://resources.arcgis.com/es/help/arcgis-rest-api/02r3/02r3000000v7000000.htm">Exportar una imagen de mapa</a> (servicio de mapas)</li><li purpose="li" id="LI_B37B3AF223C843B58948733888F8CA60"><a class="xref" target="_blank" rel="http://resources.arcgis.com/es/help/arcgis-rest-api/02r3/02r3000000wn000000.htm" href="http://resources.arcgis.com/es/help/arcgis-rest-api/02r3/02r3000000wn000000.htm">Exportar un diagrama esquemático</a> (recursos esquemáticos en un servicio de mapas)</li><li purpose="li" id="LI_F558A74F704344E8B6AAEAEB35878457"><a class="xref" target="_blank" rel="http://resources.arcgis.com/es/help/arcgis-rest-api/02r3/02r3000001m3000000.htm" href="http://resources.arcgis.com/es/help/arcgis-rest-api/02r3/02r3000001m3000000.htm">Exportar un mapa web</a> (servicio de geoprocesamiento)</li></ul></div><div class="section2" id="ESRI_SECTION2_7DDC0166EDAF43C494BD072E72CB2F86" purpose="section2"><h3>Ejecución asíncrona de los servicios de geoprocesamiento</h3><p id="GUID-A4ED5B7B-049F-41E7-8788-A76539A4ABF4">Los servicios de geoprocesamiento de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> admiten dos modos de ejecución: síncrona y asíncrona.  La ejecución síncrona sigue un patrón de solicitud-respuesta sin estado y es totalmente compatible con una configuración activo-activo.  La ejecución asíncrona sigue un patrón de solicitud-respuesta con estado y es la opción predeterminada.  Para utilizar una ejecución asíncrona en una configuración activo-activo, debe tener en cuenta lo siguiente:</p><ul purpose="ul" id="UL_E514C178FA174602A1CA703EBFE88C60"><li purpose="li" id="LI_5A8AFCB46EDC489E843064159E5D4220"> Al enviar un trabajo de geoprocesamiento asíncrono, se le devuelve un Id. de trabajo que utiliza como referencia el trabajo enviado y sus resultados. Solo el sitio de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> que recibe el original puede reconocer este Id. Por este motivo, la configuración activo-activo le exige definir la afinidad del equilibrador de carga (también conocido como sesiones permanentes) si va a utilizar la ejecución asíncrona. Esto ayuda a proporcionar una alta disponibilidad para las salidas de servicio de mapas y el geoprocesamiento asíncrono. Consulte la información del proveedor del equilibrador de carga para conocer las consecuencias de habilitar sesiones permanentes.</li><li purpose="li" id="LI_24BDF1995314447EAF7A8DA98409374D"> Si su servicio de geoprocesamiento no utiliza servicios de mapas para generar salidas y no se han definido salidas del tipo "Archivo", puede seleccionar la ejecución síncrona para sus servicios de geoprocesamiento. No se necesitan sesiones permanentes en el equilibrador de carga.</li></ul></div><div class="section2" id="ESRI_SECTION2_AD2A918F0F5D4FF59EEDA3502C56B77A" purpose="section2"><h3>Utilizar la seguridad basada en token</h3><p id="GUID-D8F944FD-F648-4A63-84EB-013DDE5EE2F1"> Si se utiliza la autenticación basada en token, también denominada autenticación de nivel de SIG, es importante que todos los sitios de esta configuración utilicen exactamente la misma clave de token compartida. De lo contrario, los token generados para un equipo no son válidos cuando se utilizan en otro equipo. Para obtener información sobre cómo duplicar las claves de token compartidas en varios sitios, consulte <a class="xref" target="_blank" rel="http://server.arcgis.com/es/server/latest/administer/windows/about-arcgis-tokens.htm" href="http://server.arcgis.com/es/server/latest/administer/windows/about-arcgis-tokens.htm">Acerca de los tokens de ArcGIS</a> y <a class="xref" target="_blank" rel="http://server.arcgis.com/es/server/latest/administer/windows/editing-token-settings-in-manager.htm" href="http://server.arcgis.com/es/server/latest/administer/windows/editing-token-settings-in-manager.htm">Editar la configuración de token en el Administrador</a>.</p></div></div><div class="section1" id="ESRI_SECTION1_7D80FDD6984A4CB89673169EC202AE9B" purpose="section1"><h2>Ventajas</h2><ul purpose="ul" id="UL_29B1CEDBC9B64C93B3BF5A5F2B6DDED6"><li purpose="li" id="LI_31A26F5D270D4EE3889F95C9C604163E">Conceptualmente sencillo. Las interdependencias mínimas entre los equipos de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> hacen que sea fácil sustituir equipos defectuosos u obsoletos, aplicar actualizaciones o agregar y quitar equipos del grupo de <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> según sea necesario sin interrumpir los servicios ni anular solicitudes.</li><li purpose="li" id="LI_720ED1C47951426CB6DBD4C224B2AA58">Si las teselas de mapa están almacenadas localmente en cada equipo, esta configuración ofrece importantes ventajas de rendimiento en comparación con los sitios en varios equipos. De hecho, esta configuración es ideal si su objetivo es incrementar la capacidad de servicios de mapas almacenados en caché.</li></ul></div>
<div class="section1" id="ESRI_SECTION1_41EFAD1B165B4AD7BB2360CACBFE3F46" purpose="section1"><h2>Desventajas</h2><ul purpose="ul" id="UL_1AC3D6DF066C44FB855C935C830F5958"><li purpose="li" id="LI_F897D11D574943B4B765B6F5D3BA1B6A"> Es responsabilidad suya mantener todos los sitios en sincronía. Esto añade una carga administrativa que puede hacer que este patrón de implementación no sea práctico en los casos en los que hay muchos equipos o servicios/cachés que cambian frecuentemente.</li><li purpose="li" id="LI_0E941DCDF0974FE092B1E24E762CA34C">Requiere conocimiento de los equilibradores de carga de terceros.</li></ul></div><div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>