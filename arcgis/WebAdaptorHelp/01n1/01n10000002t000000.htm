<html lang="en" xml:lang="en"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="A site can include multiple ArcGIS Server machines to handle increased traffic or provide a backup in case one of the ArcGIS Servers goes offline."><meta name="content-language" content="en"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - 
Multiple-machine deployment with ArcGIS Web Adaptor</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-24EB1171-8DBB-4B71-8EB9-24D0AAE8D488]--><body><div id="content"><div class="header"><h1>
Multiple-machine deployment with ArcGIS Web Adaptor</h1><div id="breadcrumb"></div></div>
<p id="GUID-5D4A77B3-8AB4-4C98-8563-2E46CDBAA8BB"> <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> supports the configuration of multiple-machine sites. In a multiple-machine site, two or more <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> machines can be administered and used as a single logical unit, providing <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> administrators with great flexibility to easily adjust the computing power of the site by adding or removing <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> machines. Multiple-machine sites also simplify the process of publishing and updating services across multiple <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span>s.</p><p id="GUID-9BFAE792-E43E-421A-AE5A-359025AFC736">In a multiple-machine deployment, each <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> must be at the same version number for the site to function correctly.  Additionally, the exact same license must be applied to each <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> that participates in  the site.</p><p id="GUID-657D9CD2-9021-46BC-B0E0-5034765ACC43"> In its simplest configuration, a multiple-machine site is configured by setting up a pool of two or more <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span>s fronted by <span purpose="ph" varid="WebAdaptorforArcGIS" translate="no">ArcGIS Web Adaptor</span> running on your own web application server.</p><p id="GUID-57F2C88A-E2E2-49E2-BD5E-67A66789C50A"><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-79F9644A-D779-409B-9E1B-AF6CD5F50C4F-web.png" purpose="img" alt="Site with multiple" title="Site with multiple"></td></tr><tr><td><div class="caption" purpose="caption">Site with multiple <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span>s where the data resides on a highly available data server</div></td></tr></table></div></p><p id="GUID-67A0E652-13DF-47DE-88A9-6FE0F1F893DA"> A key aspect of multiple-machine configurations is that all <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span>s share the same configuration store and server directories. In this manner, an administrator can log in to any <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> using ArcGIS Server Manager and apply changes that will affect all machines within the site. This pattern is also ideal in cases where you want to integrate your site with authentication methods in your organization's web tier.</p><div class="section1" id="ESRI_SECTION1_02F47167CE3A4E078D4BDC4E4C638C9B" purpose="section1"><h2><span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span>s, server directories, and configuration store</h2><p id="GUID-0971E9A0-F3F1-46CB-8C9F-8605D4994F38">Because all <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span>s in multiple-machine configurations share the same configuration store and server directories, you must select a network location for your server directories and configuration store.</p><p id="GUID-4DB61302-D4E6-46E6-808E-7164B2F4F834">Typically, a domain account is chosen for the <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> account, because this simplifies the management of data access permissions to network resources. However, depending on your own security policies, you may choose to use local accounts. The <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> account (local or domain) needs to have write access to the network share where the configuration store and server directories are located. For more information, see <a class="xref" target="_blank" rel="http://server.arcgis.com/en/server/latest/administer/windows/accounts-used-by-arcgis-server.htm" href="http://server.arcgis.com/en/server/latest/administer/windows/accounts-used-by-arcgis-server.htm">Accounts used by ArcGIS Server</a>.</p><p id="GUID-93BA97C6-C3B8-40B1-B630-D7515B596705">In a multiple-machine site, all
<span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> machines initially belong to a single <a class="xref" target="_blank" rel="http://server.arcgis.com/en/server/latest/administer/windows/about-gis-server-clusters.htm" href="http://server.arcgis.com/en/server/latest/administer/windows/about-gis-server-clusters.htm">cluster</a> using ports 4004 and above. As of 10.4, <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> defaults to <a class="xref" target="_blank" rel="http://server.arcgis.com/en/server/latest/administer/windows/about-single-cluster-mode.htm" href="http://server.arcgis.com/en/server/latest/administer/windows/about-single-cluster-mode.htm">single cluster mode</a> for new installations. This mode does not include load balancing between machines in the cluster. This reduces network traffic between machines in the site, reduces load on your network, and helps improve  monitoring of <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span>s in your site. When upgrading to 10.4, the mode will be enabled for sites with a single cluster that are not currently using single cluster mode. Single cluster sites already using single cluster mode and sites with multiple clusters at earlier releases will have their settings preserved when upgrading.</p><p id="GUID-C73E2845-3685-476F-89D4-ECAF4CD564BF"> If your site uses more than one cluster,
load-balancing is handled among all <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span>s within each
cluster. Essentially, clusters are independent groups of <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span>s that run dedicated sets of services.</p><p id="GUID-34659E5E-FAAD-4401-9537-A5F1AC6E06A5">For example, an
incoming request is assigned to an available <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> in the
cluster, even if the request was directed to a specific machine
within or outside of the cluster. That <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> then does the
work of drawing the map, finding the address coordinate, running
the geoprocessing tool, and so on, and returns the result to the
client. If a machine is offline or the service that was requested
is running in a different cluster, the request is forwarded to the
cluster containing the service. The <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> machines in that
cluster load-balance and process the request accordingly.</p></div><div class="section1" id="ESRI_SECTION1_C7F80C1007D54987BF3840B98E882D73" purpose="section1"><h2>Data</h2><p id="GUID-94BC57DE-FF98-4D4A-9413-76864F40BAF0"> As described in other deployment scenarios, when using file-based data, it is highly recommended to use local resources to the <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> machine. This has the disadvantage of forcing you to duplicate your data across all <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span>s, but reduces network traffic and results in higher performance for your services. You should consider this option and use it when applicable. The size of your data and the frequency of updates often dictate if keeping your data local across all machines is practical.</p><p id="GUID-9A8C2A8C-9556-418C-82CF-50DE0DA17ABA"> When using databases in this deployment pattern, it is important that you always use dedicated hardware. Keep the database tier independent from the <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> tier.</p></div><div class="section1" id="ESRI_SECTION1_A17AE34D1AE247CBA500E675632500D9" purpose="section1"><h2>Web Adaptor</h2><p id="GUID-7B8EADD6-0069-4F41-8C1A-D6C307FADF84"> In this configuration, <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> clients never connect directly to your <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span>s. Instead, they connect  through a Web Adaptor that provides security features and makes your overall site more resilient to failures.</p><p id="GUID-0CAB3CA5-A75E-46C9-A5A1-CB507DD730D9">From a security perspective, it's not a
recommended practice to access the same channel to use and administer
your site. Typically, administrative tasks are only enabled through
sections of your network or specific machines that can access your
<span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span>s directly, for example, over port 6080 or 6443. You can
overcome this by specifying that only certain IP addresses can
access the server in the Administrator Directory. This is
controlled by the  <span class="usertext">allowedAdminAccessIPs</span> property in the server's <a class="xref" target="_blank" rel="http://resources.arcgis.com/en/help/arcgis-rest-api/02r3/02r3000001t9000000.htm" href="http://resources.arcgis.com/en/help/arcgis-rest-api/02r3/02r3000001t9000000.htm">security configuration</a>.  To learn how to configure this property to limit access to the server, see the example in   <a class="xref" target="_blank" rel="http://resources.arcgis.com/en/help/arcgis-rest-api/02r3/02r3000001rw000000.htm" href="http://resources.arcgis.com/en/help/arcgis-rest-api/02r3/02r3000001rw000000.htm">Update security configuration</a>.</p><p id="GUID-601E6805-D64B-49FD-B341-95C745E65B85">Requests from client applications are always funneled through <span purpose="ph" varid="WebAdaptorforArcGIS" translate="no">ArcGIS Web Adaptor</span>, which can be configured to block the use of any administrative end points.  To learn how to do this, see <a class="xref" target="_blank" rel="http://server.arcgis.com/en/server/latest/administer/windows/configure-arcgis-web-adaptor-after-installation.htm" href="http://server.arcgis.com/en/server/latest/administer/windows/configure-arcgis-web-adaptor-after-installation.htm">Configuring ArcGIS Web Adaptor after installation</a>.</p><p id="GUID-496C6DF8-01F3-4F5A-AD5E-E5738E2EC12A"><span purpose="ph" varid="WebAdaptorforArcGIS" translate="no">ArcGIS Web Adaptor</span> also provides the means to integrate <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> with standard authentication methods used in your organization. It is a small component that you can install in your own web server acting as a reverse proxy to your <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span>s. For a list of supported web servers, see <a class="xref" rel="01n1/01n100000034000000.htm" href="01n1/01n100000034000000.htm">ArcGIS Web Adaptor system requirements</a>.   By configuring <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> security to use web-tier authentication (as opposed to GIS-tier authentication), <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> will delegate authentication into your web server.</p><p id="GUID-9644EFAC-A720-430A-8030-A706250F81D9">Multiple web adaptors
can be configured with your site to support multiple authentication
methods.  To learn more, see <a class="xref" target="_blank" rel="http://server.arcgis.com/en/server/latest/administer/windows/supporting-a-mix-of-public-and-private-services.htm" href="http://server.arcgis.com/en/server/latest/administer/windows/supporting-a-mix-of-public-and-private-services.htm">Supporting a mix of public and private services</a>.</p><p id="GUID-F33529F9-1C9D-44E5-A321-6B25D384E8BC"><span purpose="ph" varid="WebAdaptorforArcGIS" translate="no">ArcGIS Web Adaptor</span> also serves as a load-balancer for the site. <span purpose="ph" varid="WebAdaptorforArcGIS" translate="no">ArcGIS Web Adaptor</span> will forward requests to your pool of <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span>s following a round-robin, load-balancing algorithm. <span purpose="ph" varid="WebAdaptorforArcGIS" translate="no">ArcGIS Web Adaptor</span> will also automatically detect and forward requests to any new <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> that is added to your site, or it will stop forwarding requests to machines that are unavailable or dropped from your site.</p></div><div class="section1" id="ESRI_SECTION1_343DCCE07E654E70A6E008C7ED2A06B9" purpose="section1"><h2>High availability considerations</h2><p id="GUID-998AC748-0092-4EEE-B685-03413A6E1872"> A highly available variation of this deployment scenario would add redundancy at the Web Adaptor tier as shown in the following diagram. When configuring multiple Web Adaptors with your site, each Web Adaptor will round-robin requests to all the <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> machines in your site.</p><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-EC903B01-4355-4D5E-B61E-A3E9F8C4680F-web.png" purpose="img" alt="Multiple-machine site with redundancy at the Web Adaptor tier" title="Multiple-machine site with redundancy at the Web Adaptor tier"></td></tr><tr><td><div class="caption" purpose="caption">Multiple-machine site with redundancy at the Web Adaptor tier.  Each Web Adaptor will round-robin requests to the machines in the site.</div></td></tr></table></div><p id="GUID-3C9C0129-546C-4DFF-9E69-75768E29042B"> Consideration should be taken to also eliminate single points of failure at the data, configuration store, and server directories.</p><p id="GUID-6E4A965E-EDA1-42FC-BE08-8072B3707092"> Duplicating your file-based datasets across all <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span>s can help you, although it may not always be possible due to the frequency of changes in your files or their size. If using a network share for your file-based datasets, ensure that your storage is configured for high availability.</p><p id="GUID-FBF7DE41-1102-4295-97A3-37E561C2979E"> Databases supported by ArcGIS also
support different levels of high availability configuration. Refer
to the database configuration to cluster your database
tier.</p><p id="GUID-1E454F1D-E20C-4422-9389-8E52D4856C6A"> In this deployment scenario, your configuration store and server
directories must always be stored on a network
share. If requiring a high availability configuration, ensure that
this tier is set up accordingly.</p></div><div class="section1" id="ESRI_SECTION1_7D80FDD6984A4CB89673169EC202AE9B" purpose="section1"><h2>Advantages</h2><ul purpose="ul" id="UL_95A679B9F76D4BF689C7D662788FF04D"><li purpose="li" id="LI_282DE4C9AD6B4A4988654E435162F3EB">A single <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> site provides the means to easily administer <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> and its services across a number of machines.</li><li purpose="li" id="LI_27251CF49540483AB4F13EA8C01AE620"> Easy to adjust the capacity of your site by adding and removing <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> machines.</li><li purpose="li" id="LI_771CF22F97D84BABBF6A2695DEBED2F2">Load-balancing is handled among <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span>s.</li><li purpose="li" id="LI_B221E6281A344C07B9F5EB30C145FBA4">Integrate standard organization authentication by using web-tier authentication through <span purpose="ph" varid="WebAdaptorforArcGIS" translate="no">ArcGIS Web Adaptor</span>.</li></ul></div>
<div class="section1" id="ESRI_SECTION1_41EFAD1B165B4AD7BB2360CACBFE3F46" purpose="section1"><h2>Disadvantages</h2><ul purpose="ul" id="UL_374A7525DA254583BD93C34CA24E3731"><li purpose="li" id="LI_D61CAD7C8A24463CAD02FB86848594B9">Use of server directories and data in shared network locations can negatively affect performance of services under heavy load.</li></ul></div>


<div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>