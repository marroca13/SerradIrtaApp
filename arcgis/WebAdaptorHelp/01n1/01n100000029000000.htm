<html lang="en" xml:lang="en"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="You can secure access to your portal using Integrated Windows Authentication (IWA). When you use IWA, logins are managed through Microsoft Windows Active Directory. Users do not sign in and out of the portal website; instead, when they open the website, they are signed in using the same accounts they used to log in to Windows."><meta name="content-language" content="en"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - Use Integrated Windows Authentication with your portal</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-4DF90B15-E22D-4B5C-B1C2-2E2AD7299576]--><body><div id="content"><div class="header"><h1>Use Integrated Windows Authentication with your portal</h1><div id="breadcrumb"></div></div>
<p id="GUID-D10892F6-5964-41A5-B160-74550AA06784">You can secure access to your portal using Integrated Windows Authentication (IWA). When you use IWA, logins are managed through Microsoft Windows Active Directory. Users do not sign in and out of the portal website; instead, when they open the website, they are signed in using the same accounts they used to log in to Windows.</p><p id="GUID-6A78F926-64CF-4D39-B5BF-5F03A38650E7">To use Integrated Windows Authentication, you must use ArcGIS Web
Adaptor (IIS) deployed to Microsoft's IIS web server. You cannot
use ArcGIS Web Adaptor (Java Platform) to perform Integrated
Windows Authentication.  If you haven't done so already, <a class="xref" rel="01n1/01n100000019000000.htm" href="01n1/01n100000019000000.htm">install</a> and <a class="xref" rel="01n1/01n10000001p000000.htm" href="01n1/01n10000001p000000.htm">configure</a> ArcGIS Web Adaptor (IIS) with your portal.</p><div class="notes" id="GUID-6B8E1503-85C4-4367-9DF6-2931651476EB"><div class="note"><img class="note_img" src="rsrc/note.png" alt="Note" title="Note"><span>Note:</span></div><div class="tipbody"><p id="GUID-5353424E-0487-486A-BC14-D109B79E0BA8">If you'll be adding an <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> site to your portal and want
to use web-tier authentication with the site, you'll need to
disable web-tier authentication (basic or digest) and enable
anonymous access on the <span purpose="ph" varid="WebAdaptorforArcGIS" translate="no">ArcGIS Web Adaptor</span> configured with your
site before adding it to the portal.
 Although it may sound counterintuitive, this is necessary so that your site is free to federate with the portal and read the portal's users and roles.  If your <span purpose="ph" varid="ArcGISforServer" translate="no">ArcGIS Server</span> site is not already using web-tier authentication, no action is required on your part.  For instructions on how to add a server to your portal, see <a class="xref" target="_blank" rel="http://server.arcgis.com/en/portal/latest/administer/windows/federate-an-arcgis-server-site-with-your-portal.htm" href="http://server.arcgis.com/en/portal/latest/administer/windows/federate-an-arcgis-server-site-with-your-portal.htm">Federate an ArcGIS Server site with your portal</a>.</p></div></div><div class="section1" id="GUID-C0ADC23D-5584-451E-9C29-30E9BAF8B934" purpose="section1"><h2>
Configure
your portal to use Windows Active Directory</h2><p id="GUID-D2FA1395-9A29-4C5E-8B08-7A706B8632B7">First, configure the portal to use HTTPS for all communication.  Then update your portal's identity store to use Active Directory users and groups.</p><div class="section2" id="ESRI_SECTION2_3AAAFED3A07D4D44BEB558AD4436C4AB" purpose="section2"><h3>Configure the portal to use HTTPS for all communication</h3><div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_229C1545BD9145CFB0D06C5BE30300FE"><div class="step_title">Steps:</div><ol><li purpose="step" id="ESRI_STEP_D741BAF64E69494298D73A60D666257A"><span purpose="cmd" id="GUID-5FEF1BC7-2AB6-441B-B4E6-85FF58F96676">Sign in to the portal website as an Administrator of your organization. The URL is in the format <span class="usertext">https://webadaptorhost.domain.com/webadaptorname/home</span>.</span></li><li purpose="step" id="ESRI_STEP_D4BC68DFB9C545C79957E97640804759"><span purpose="cmd" id="GUID-1D2BEE83-93DD-43D6-BC54-6F19E6FCC249">On the <span class="uicontrol">Organization</span> page, click <span class="uicontrol">Edit Settings</span> &gt; <span class="uicontrol">Security</span>.</span></li><li purpose="step" id="ESRI_STEP_3BA66D03DF4B43B285E9D6300381B487"><span purpose="cmd" id="GUID-B904C2F9-C7DE-4EFF-A53A-14D28F216BAE">Check <span class="uicontrol">Allow access to the portal through HTTPS only</span>.</span></li><li purpose="step" id="ESRI_STEP_2A900B3D04154322A0C2A15C158648F9"><span purpose="cmd" id="GUID-9506BE76-C380-4DCF-919A-BD5D965B934C">Click <span class="uicontrol">Save</span> to apply your changes.</span></li></ol></div></div></div><div class="section2" id="ESRI_SECTION2_3F9DA6DAFD0D4E7FB63C83F7E18B6939" purpose="section2"><h3>Update your portal's identity store</h3><div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_AABE97D2823D4D9B9F5DEDA1AEAF5C9B"><div class="step_title">Steps:</div><ol><li purpose="step" id="ESRI_STEP_5E56A1154E6C423A9712616722B08B1E">
<span purpose="cmd" id="GUID-A837A868-62BE-42D2-BDBF-51CAA1E10F7A">
Sign in to the ArcGIS Portal Directory as an Administrator of your organization.    The URL is in the format <span class="usertext">https://webadaptorhost.domain.com/webadaptorname/portaladmin</span>.</span>
</li><li purpose="step" id="ESRI_STEP_1E86E64409224EF2AE9B7442CFF04EBD">
<span purpose="cmd" id="GUID-3F96A811-3FFF-4971-BBAF-AC5FA7809D9B">
Click <span class="uicontrol">Security</span> &gt; <span class="uicontrol">Config</span> &gt; <span class="uicontrol">Update Identity Store</span>.</span>
</li><li purpose="step" id="ESRI_STEP_E61445A0397B470292B529793ACD6928"><span purpose="cmd" id="GUID-3809F5CE-A011-4FBE-9BAE-CA449E4AC89F">In the <span class="uicontrol">User store configuration (in JSON format)</span> text box, paste your organization's  Windows Active Directory user configuration information (in JSON format).  Alternatively, you can update the following sample with user information specific to your organization.</span><div class="info" purpose="info"><p id="GUID-6AFE6495-B740-4167-8DA6-5035D8D43D2A"><pre purpose="pre" id="GUID-91A7214D-C850-419C-ABB2-7791CE1BF5AF">{
  "type": "WINDOWS",
  "properties": {
    "userPassword": "secret",
    "isPasswordEncrypted": "false",
    "user": "mydomain\\winaccount",
    "userFullnameAttribute": "cn",
    "userEmailAttribute": "mail",
    "caseSensitive": "false"
  }
}</pre></p></div><div class="info" purpose="info"><p id="GUID-F5665A49-7838-459A-88C2-5CC6C013CBB5">In most cases, you'll only need to alter values for the <span class="usertext">userPassword</span> and <span class="usertext">user</span> parameters. Although you type the password in clear text, it will be encrypted when you click <span class="uicontrol">Update Configuration</span> (below).    The account you specify for the user parameter only needs permissions to look up the email address and full name of Windows accounts on the network. If possible, specify an account whose password does not expire.</p><p id="GUID-96F91AFC-2C23-4B86-AFAE-59F90E399385">In     the rare case where your Windows Active Directory is configured to be case sensitive, set the <span class="usertext">caseSensitive</span> parameter to <span class="usertext">true</span>.</p></div></li><li purpose="step" id="ESRI_STEP_EC581E9FFCC54831B72AB60EE7F432FE"><span purpose="cmd" id="GUID-C715E37B-127F-4159-8CF1-581E696000EB">If you want to <a class="xref" target="_blank" rel="http://server.arcgis.com/en/portal/latest/administer/windows/create-groups.htm" href="http://server.arcgis.com/en/portal/latest/administer/windows/create-groups.htm">create groups</a> in the portal that leverage the existing enterprise groups in your identity store, paste your organization's  Windows Active Directory group configuration information (in JSON format) in the <span class="uicontrol">Group store configuration (in JSON format)</span> text box as shown below.  Alternatively, you can update the following sample with group information specific to your organization.  If you only want to use portal's built-in groups, delete any information in the text box and skip this step.</span><div class="stepexample" purpose="stepexample"><p id="GUID-C9FF99D0-02BE-47F3-A87D-94C22C2E30F3"><pre purpose="pre" id="GUID-791F3FC9-4E73-4E2E-ABB1-2D017B48767D">{
  "type": "WINDOWS",
  "properties": {
    "isPasswordEncrypted": "false",
    "userPassword": "secret",
    "user": "mydomain\\winaccount"
  }
}</pre></p></div><div class="info" purpose="info"><p id="GUID-FE9073CB-6182-4074-A1A8-6302B389F038">In most cases, you'll only need to alter values for the <span class="usertext">userPassword</span> and <span class="usertext">user</span> parameters. Although you type the password in clear text, it will be encrypted when you click <span class="uicontrol">Update Configuration</span> (below).   The account you specify for the user parameter only needs permissions to look up the names of Windows groups on the network. If possible, specify an account whose password does not expire.</p></div></li><li purpose="step" id="ESRI_STEP_98FFC9ED5DEF4D1EA9D91DA74DBB2E2A"><span purpose="cmd" id="GUID-E0563151-F92D-4ED6-84DE-B395D4A680A0">Click <span class="uicontrol">Update Configuration</span> to save your changes.</span></li><li purpose="step" id="ESRI_STEP_A52B573C9C4D48EAABE72D565AD866F6"><span purpose="cmd" id="GUID-3BA49413-1E68-4F64-8078-52D0E0D4681F">If you've <a class="xref" target="_blank" rel="http://server.arcgis.com/en/portal/latest/administer/windows/configuring-a-highly-available-portal.htm" href="http://server.arcgis.com/en/portal/latest/administer/windows/configuring-a-highly-available-portal.htm">configured a highly available portal</a>, restart each portal machine. See <a class="xref" target="_blank" rel="http://server.arcgis.com/en/portal/latest/administer/windows/stopping-and-starting-the-portal.htm" href="http://server.arcgis.com/en/portal/latest/administer/windows/stopping-and-starting-the-portal.htm">Stopping and starting the portal</a> for full instructions.</span></li></ol></div></div></div><div class="section2" id="ESRI_SECTION2_0B89E5358DB64704B011D78AB9FDDB40" purpose="section2"><h3>Optionally configure additional identity store parameters</h3><p id="GUID-4A275662-4D2B-4E7F-A0EE-FA7955313EB0">There are additional identity store configuration parameters that can be modified using the ArcGIS Portal Directory administration API. These parameters include options such as  restricting whether groups are refreshed automatically when an enterprise user signs into the portal, setting the membership refresh interval, and defining whether to check for multiple user name formats. See <a target="_blank" class="xref" href="http://resources.arcgis.com/en/help/arcgis-rest-api/index.html#/Update_Identity_Store/02r300000249000000/" rel="http://resources.arcgis.com/en/help/arcgis-rest-api/index.html#/Update_Identity_Store/02r300000249000000/">Update Identity Store</a> for details.</p></div></div>

<div class="section1" id="ESRI_SECTION1_65AC88E72E2B4CFBBBC061311F9B4EA4" purpose="section1"><h2>Add enterprise accounts to your portal</h2><p id="GUID-42FC0409-585C-44B5-8763-ECB7FEA2EBDB">By default, enterprise users can access the portal website.  However, they can only view items that have been shared with everyone in the organization.  This is because the enterprise accounts have not been added to the portal and granted access privileges.</p><p id="GUID-2DE231B0-B5BB-4528-A75F-6908711CEEE6">Add accounts to your portal using one of the following methods:</p><ul purpose="ul" id="UL_BAB11D35736B4CF6A2ED6C5342961C9E"><li purpose="li" id="LI_A96C9F0C5FB84518823C85F1E41ADEB8"><a class="xref" target="_blank" rel="http://server.arcgis.com/en/portal/latest/administer/windows/add-members-to-your-portal.htm#ESRI_SECTION2_8D9E0CE8A7A7444F8D6E93D56C949FEC" href="http://server.arcgis.com/en/portal/latest/administer/windows/add-members-to-your-portal.htm#ESRI_SECTION2_8D9E0CE8A7A7444F8D6E93D56C949FEC">Portal for ArcGIS website</a> (one at a time, in bulk from a CSV file, or from existing enterprise groups)</li><li purpose="li" id="LI_FDB78957705B41B39CB7CC50659BF7A7"><a class="xref" target="_blank" rel="http://server.arcgis.com/en/portal/latest/administer/windows/example-add-members-to-the-portal.htm" href="http://server.arcgis.com/en/portal/latest/administer/windows/example-add-members-to-the-portal.htm">Python script</a></li><li purpose="li" id="LI_CABBF7E85CBF46A2B960A51654B4FCC3"><a class="xref" target="_blank" rel="http://server.arcgis.com/en/portal/latest/administer/windows/add-members-to-your-portal.htm#ESRI_SECTION1_29AF645AF75140698CA9879C3E059D39" href="http://server.arcgis.com/en/portal/latest/administer/windows/add-members-to-your-portal.htm#ESRI_SECTION1_29AF645AF75140698CA9879C3E059D39">Command line utility</a></li><li purpose="li" id="LI_B0F677D7FC204892BE7C41B4A610EF68"><a class="xref" target="_blank" rel="http://server.arcgis.com/en/portal/latest/administer/windows/automatic-registration-of-enterprise-accounts.htm" href="http://server.arcgis.com/en/portal/latest/administer/windows/automatic-registration-of-enterprise-accounts.htm">Automatically</a></li></ul><p id="GUID-277D6BB4-21BE-42AB-9D03-93654CBDA803">It's recommended  you designate at least one enterprise account as an Administrator of your portal.  You can do this by choosing  the <span class="uicontrol">Administrator</span> role when adding the account.  When you have an alternate portal administrator account, you can assign the initial administrator account to the User role or delete the account. See <a class="xref" target="_blank" rel="http://server.arcgis.com/en/portal/latest/administer/windows/about-the-initial-administrator-account.htm" href="http://server.arcgis.com/en/portal/latest/administer/windows/about-the-initial-administrator-account.htm">About the initial administrator account</a>  for more information.</p><p id="GUID-A9F5835B-5C7C-4E08-A934-A86BC7DD2D3C">Once the accounts have been added and you complete the steps below, users will be able to sign in to the organization and access content.</p></div><div class="section1" id="ESRI_SECTION1_95AEF455D151412C8D6BCA39ABFD5D0C" purpose="section1"><h2>Configure ArcGIS Web Adaptor to use IWA</h2><div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_82ACCC6BC7BB42A7970747BA9A0E3027"><div class="step_title">Steps:</div><ol><li purpose="step" id="ESRI_STEP_7A952BF7248647C2BF5032D42B5D0C37"><span purpose="cmd" id="GUID-0B3284F6-1DDE-47AB-AF07-B3E937C02A64">Open Internet Information Services (IIS) Manager.</span></li><li purpose="step" id="ESRI_STEP_D28051510A6A4892B4732EEE0D4980DA"><span purpose="cmd" id="GUID-C01CE922-3E65-4883-B01A-C2715086F951">In the <span class="uicontrol">Connections</span> panel, locate and expand the website hosting ArcGIS Web Adaptor.</span></li><li purpose="step" id="ESRI_STEP_2222C45F7DAD48C89FEC736B93179284"><span purpose="cmd" id="GUID-D7D2FBC5-31A5-4390-A3C3-2F475A06C944">Click the name of ArcGIS Web Adaptor.  The default is <span class="usertext">arcgis</span>.</span></li><li purpose="step" id="ESRI_STEP_7FB61EC449D44EE99BF5CDD480FC02E6"><span purpose="cmd" id="GUID-0D77B6C5-5895-47F1-8763-29D22DCCC8B3">In the <span class="uicontrol">Home</span> panel, double-click <span class="uicontrol">Authentication</span>.</span></li><li purpose="step" id="ESRI_STEP_A10D4A07E2E548C6AFD4A2AE618D4BCD"><span purpose="cmd" id="GUID-919EDA16-5F69-41FC-A556-433F2855F519">Select <span class="uicontrol">Anonymous Authentication</span> and click <span class="uicontrol">Disable</span>.</span></li><li purpose="step" id="ESRI_STEP_1623B4D86C2C4D8B937FE27E65EF9F0D"><span purpose="cmd" id="GUID-0A3852A4-2ED0-46FF-ADF3-B23DF7627D3E">Select <span class="uicontrol">Windows Authentication</span> and click <span class="uicontrol">Enable</span>.</span></li><li purpose="step" id="ESRI_STEP_A0DB7F491EE943068065B73A533A5FBD"><span purpose="cmd" id="GUID-9BBD61FE-95DC-48CA-82A2-91000AF41397">Close Internet Information Services (IIS) Manager.</span></li></ol></div></div></div>
<div class="section1" id="ESRI_SECTION1_47271E5059F1404C9C6C9B559AEA13B7" purpose="section1"><h2>Verify you can access the portal using IWA</h2><div class="wfsteps" purpose="wfsteps"><h4></h4><div class="steps" id="ESRI_STEPS_7F050EB93C97411E99C9F0CA951647BE"><div class="step_title">Steps:</div><ol><li purpose="step" id="ESRI_STEP_82F8DE0621354C45991AB4C99DD07CC6"><span purpose="cmd" id="GUID-D29085F5-6420-4DEB-B751-6E66ED1EEC0C">Open the portal website.    The URL is in the format <span class="usertext">https://webadaptorhost.domain.com/webadaptorname/home</span>.</span></li><li purpose="step" id="ESRI_STEP_1373A5CED3A340189D210C5B913E5E36"><span purpose="cmd" id="GUID-1EBDC6FD-DDEF-4D86-AF86-A30BDE9DAC2E">Verify that you are prompted for your enterprise account credentials or automatically signed in using your enterprise account.  If you do not see this behavior, verify the Windows account you used to log in to the machine was added to the portal.</span></li></ol></div></div></div><div class="section1" id="ESRI_SECTION1_3D97D2FCA96B431D83F810DBA064CA9E" purpose="section1"><h2>Prevent users from creating their own built-in accounts</h2><p id="GUID-472E0ED2-89A9-4322-A195-EF33FF73AFB2">To prevent people from creating their own built-in accounts, disable the <span class="uicontrol">Create an account</span> button and sign-up page (<span class="usertext">signup.html</span>) in the portal website.    This means all members sign in to the portal with their enterprise credentials   and unnecessary member accounts cannot be created. See <a class="xref" target="_blank" rel="http://server.arcgis.com/en/portal/latest/administer/windows/disabling-users-ability-to-create-builtin-portal-accounts.htm" href="http://server.arcgis.com/en/portal/latest/administer/windows/disabling-users-ability-to-create-builtin-portal-accounts.htm">Disabling users ability to create built-in portal accounts</a> for full instructions.</p></div><div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>