<html lang="ja" xml:lang="ja"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="本番環境サイトに適切で最も単純な構成は、サード パーティ製リバース プロキシ サーバーや ArcGIS Web Adaptor などのリバース プロキシを通じて 1 台の ArcGIS Server コンピューターを公開するものです。"><meta name="content-language" content="ja"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - 
リバース プロキシ サーバーを使用した単一コンピューターの配置</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-D32FA68C-96A1-47D7-BC5D-1812D88B121A]--><body><div id="content"><div class="header"><h1>
リバース プロキシ サーバーを使用した単一コンピューターの配置</h1><div id="breadcrumb"></div></div>
<p id="GUID-212D5C48-1B85-45B9-8749-AB2B8C3D9139">この配置は、<a class="xref" rel="01n1/01n10000002w000000.htm" href="01n1/01n10000002w000000.htm">単一コンピューターの配置</a>のバリエーションで、<a class="xref" target="_blank" rel="http://server.arcgis.com/ja/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm" href="http://server.arcgis.com/ja/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm">リバース プロキシ サーバー</a>がこのサイトに追加されます。リバース プロキシ サーバーは、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> サイトにリソースを求めるクライアントのリクエストを仲介する役割を果たし、サイトの配置のセキュリティ機能を強化します。</p><p id="GUID-9711BB40-A27F-42D2-80D9-180E626B5928"> ArcGIS Web Adaptor には、<a class="xref" rel="01n1/01n100000034000000.htm" href="01n1/01n100000034000000.htm">ほとんどの一般的な Web アプリケーション サーバー</a>で構成できるリバース プロキシが Esri によって実装されています。または、他のサードパーティ製リバース プロキシ Web サーバーを利用することもできます。</p><p id="GUID-AC4D049B-1DD3-4257-9736-771062A802BF">下の図に示すように、ArcGIS Web Adaptor またはサード パーティ製リバース プロキシ サーバーは、一般に、別の Web サーバー コンピューター上に構成されますが、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> と同じ場所に配置することもできます。</p><p id="GUID-CC17478D-83F4-4241-81EC-F204FC1AD30C"> クライアント アプリケーションにとっては、GIS サービスへの直接アクセスとプロキシ経由のアクセスの間に違いはありません。しかし、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 管理者は、以下に示すような理由でリバース プロキシ サーバーの使用を必要とする場合があります。</p><p id="GUID-D9F6D7D8-602E-46FD-991F-56DEEAD7EEDD"><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-B0DCED81-BA6B-4103-AB6D-521F1939A100-web.png" purpose="img" alt="専用の Web サーバーにリバース プロキシがインストールされた単一コンピューターのサイト" title="専用の Web サーバーにリバース プロキシがインストールされた単一コンピューターのサイト"></td></tr><tr><td><div class="caption" purpose="caption">専用の Web サーバーにサードパーティ製リバース プロキシがインストールされた単一コンピューターのサイト</div></td></tr></table></div></p>
<div class="section1" id="ESRI_SECTION1_5365D260725C42CDB33EDCBA245ADA65" purpose="section1"><h2>標準のポートを介した GIS サービスへのアクセス</h2><p id="GUID-4B4B437F-DC4B-4CC8-BCA3-C7909471C220">リバース プロキシ サーバーを使用しない場合、クライアントは <span class="usertext">http://gisserver.domain.com:6080</span> または <span class="usertext">https://gisserver.domain.com:6443</span> を使用して直接 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> に接続します (HTTPS が構成されている場合)。<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> で使用される<a class="xref" target="_blank" rel="http://server.arcgis.com/ja/server/latest/administer/windows/ports-used-by-arcgis-server.htm" href="http://server.arcgis.com/ja/server/latest/administer/windows/ports-used-by-arcgis-server.htm">デフォルト ポート</a>を変更することはできません。クライアント アプリケーションで 80 (HTTP) や 443 (HTTPS) などの標準のポートを使用する場合は、リバース プロキシを構成してから、そのプロキシ経由でサービスにアクセスするようクライアントに命令する必要があります。たとえば、<span class="usertext">http://proxy.domain.com/arcgis</span> または <span class="usertext">http://proxy.domain.com/myGIS</span> でリバース プロキシを構成できます。</p></div><div class="section1" id="ESRI_SECTION1_017A251D747244C9B665F99FFC6258F5" purpose="section1"><h2>組織のファイアウォールの内側への <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> の隔離</h2><p id="GUID-89B1F282-13EC-49A9-AF1E-E0AFA6C989A0">サービスおよびアプリケーションをインターネット上で一般に公開する場合は、リバース プロキシ Web サーバー構成を使用して、組織のファイアウォールの内側に <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> を隔離することをお勧めします。この構成では、インターネットから受信されたリクエストが、80 (HTTP) と 443 (HTTPS) を除くすべてのポートをブロックするファイアウォールを通過します。リバース プロキシ Web サーバーは、受信リクエストを受信したら、ポート 6080 (HTTP) または 6443 (HTTPS) 経由で別のファイアウォールを介してそのリクエストを <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> に渡し、レスポンスをクライアントに返します。次の図は、どのようにリバース プロキシ サーバーが境界ネットワーク内に存在するかを示しており、セキュリティ保護された内部ネットワークへのアクセスを管理する際に役立ちます。</p><p id="GUID-04B40C7C-AFA1-4AF8-AC23-4CE146F8DA79"><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-DBC9A501-BD3B-4E76-B8A2-BCB29535D578-web.png" purpose="img" alt="に接続している既存のリバース プロキシ" title="に接続している既存のリバース プロキシ"></td></tr></table></div></p><p id="GUID-0DA19151-9A7D-4108-959A-A70DDB40BEF1">リバース プロキシ サーバーを <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> と統合する方法については、「<a class="xref" target="_blank" rel="http://server.arcgis.com/ja/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm" href="http://server.arcgis.com/ja/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm">ArcGIS Server でのリバース プロキシ サーバーの使用</a>」をご参照ください。</p></div><div class="section1" id="ESRI_SECTION1_B47C8B7AFC7449CE8E0CC52A2F06C39D" purpose="section1"><h2>サイトへの管理アクセスのブロック</h2><p id="GUID-06620085-D4F3-415A-9CEB-13B3167A544F">リバース プロキシ サーバーを使って、サイト内の特定のリソースへのアクセスをブロックできます。たとえば、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> Manager および <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> Administrator Directory へのアクセスをブロックするようリバース プロキシを構成できます。この構成は、特に <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> サービスをインターネットに公開する場合に推奨されます。</p><p id="GUID-10EA474B-87D5-441E-95BF-2F26AFA42BA5"> ArcGIS Web Adaptor を使用している場合は、「<a class="xref" target="_blank" rel="http://server.arcgis.com/ja/server/latest/administer/windows/configure-arcgis-web-adaptor-after-installation.htm" href="http://server.arcgis.com/ja/server/latest/administer/windows/configure-arcgis-web-adaptor-after-installation.htm">ArcGIS Web Adaptor のインストール後の構成</a>」の手順に従って、サイトへの管理アクセスを無効にします。サードパーティ製リバース プロキシ サーバーを使用している場合は、そのプロキシ サーバー固有のマニュアルを参照して、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> Manager (<span class="usertext">proxy.domain.com/arcgis/manager/</span>) または <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> Administrator Directory (<span class="usertext">proxy.domain.com/arcgis/admin/</span>) へのアクセスを試行するすべてのリクエストへのアクセスをブロックします。</p><p id="GUID-6B020F3C-E34A-4DB4-B713-92B31168ABF3"> 管理アクセスは、リバース プロキシを経由してサイトにアクセスするときにブロックされますが、これに対して、デフォルト ポート (6080 または 6443) 経由で <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> に直接アクセスするときは管理アクセスを引き続き利用できます。ファイアウォールを適切に使用して、これらのポートにアクセスできる場所を制御する必要があります。</p></div><div class="section1" id="ESRI_SECTION1_6B937290F52246A7B49DC5FF5E286234" purpose="section1"><h2>独自の Web サーバーの機能の利用</h2><p id="GUID-DEF4E7ED-B69C-4622-B638-D19C211C7E54">Web サーバーは、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> の配置の一部として利用できる多数の機能を備えています。リバース プロキシ サーバーを介して GIS サービスを共有することで、Web サーバーのログ、キャッシュ、セキュリティの各機能を利用することができます。</p><ul purpose="ul" id="UL_430746EA18DB422A9648B28D66CE4FF3"><li purpose="li" id="LI_F1F3D98C03C148C9B04A4D8162B27B46">Web 層認証: デフォルトでは、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> は<a class="xref" target="_blank" rel="http://server.arcgis.com/ja/server/latest/administer/windows/about-arcgis-tokens.htm" href="http://server.arcgis.com/ja/server/latest/administer/windows/about-arcgis-tokens.htm">トークンベースの認証</a> (ArcGIS トークンベース認証または GIS 層認証とも呼ばれる) を使用します。または、Web 層認証を使用して <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> を構成することもできます。この方式では、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> がユーザー独自の Web サーバーに認証を委任できます。 Web 層認証が必要な場合は、ArcGIS Web Adaptor を使用する必要があります。Web 層認証はサードパーティ製リバース プロキシ Web サーバーを通じて利用することはできません。</li><li purpose="li" id="LI_33B4C34B5ACA4314BE2E611EB7731897">ログ: <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> ログには、呼び出された操作や <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 呼び出しの実行時間などの <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> サービスに固有の情報だけでなく、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> で発生した警告とエラーも含まれています。これらの情報は、ユーザー独自の Web サーバーからのログを使用して補完できます。このログは、リクエストの発行元の IP アドレス、ユーザー エージェント、リファラーなど、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> ログには存在しない可能性がある詳細情報を提供します。</li><li purpose="li" id="LI_8C344324013E47E39DA236FC3623A0DD">その他の機能: ほとんどの Web サーバーは、リクエストと応答を厳密に制御するためのオプションを用意しています。たとえば、フィルタリング ルールを受信リクエストに適用したり、特定の IP アドレスやドメイン名からのアクセスをブロックしたりできます。</li></ul></div><div class="section1" id="ESRI_SECTION1_5399D2DD35D44DB99F451A0F3461CA30" purpose="section1"><h2>まとめ</h2><p id="GUID-F521195F-BD24-43A2-BA5C-D629E74C568D">ArcGIS Web Adaptor またはサード パーティ製リバース プロキシ サーバーは、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> の単一コンピューターの配置を補完する優れたコンポーネントです。いずれもセキュリティ機能を向上させます。GIS サービスをインターネット上に公開する予定がある場合は、いずれかのコンポーネントを使用することを強くお勧めします。また、ユーザーのセキュリティ要件によっては、イントラネットの配置でもこれらの使用が必要になる場合があります。</p><div class="section2" id="ESRI_SECTION2_695C10EAEC2D4353ACABE9696729B025" purpose="section2"><h3>メリット</h3><ul purpose="ul" id="UL_CA5E2EE4C2974ADAB89F432BA07AC466"><li purpose="li" id="LI_9CA6DA2321EB493ABC9EF36821FD6422"><a class="xref" rel="01n1/01n10000002w000000.htm" href="01n1/01n10000002w000000.htm">単一コンピューターの配置</a>のセキュリティ水準をさらに高めることができます。</li></ul></div><div class="section2" id="ESRI_SECTION2_09FC933129414631A3B1CE0DE247FC72" purpose="section2"><h3>デメリット</h3><ul purpose="ul" id="UL_B6E043DE0B6543EA98F315A66435F59A"><li purpose="li" id="LI_135DE9A1D0794D329FB78EE89DED36B5">リバース プロキシ サーバーを使用すると、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> サービスに対するリクエストのオーバーヘッドが増加する可能性があります。これは、特に、大規模で複雑な (グループがネストされている、またはフェデレートされている) エンタープライズ アイデンティティ ストア用に Web 層認証を利用する場合に当てはまります。</li><li purpose="li" id="LI_26C494BD8FF94668A36D8C513C66A2CD">可用性には優れていません。<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターとリバース プロキシ サーバーは、どちらか一方がオフラインになった場合、単一障害点になります。詳細については、「<a class="xref" rel="01n1/01n10000002s000000.htm" href="01n1/01n10000002s000000.htm">単一コンピューターによる高可用性 (アクティブ/パッシブ)</a> の配置」をご参照ください。</li></ul></div></div>
<div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>