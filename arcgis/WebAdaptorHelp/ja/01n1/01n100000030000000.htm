<html lang="ja" xml:lang="ja"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="1 つのサイトに複数の ArcGIS Server コンピューターを導入して、トラフィック量の増加に対処したり、いずれかのコンピューターがオフラインになった場合のバックアップを提供したりすることができます。"><meta name="content-language" content="ja"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - 
サード パーティ製ロード バランサーを使用した複数コンピューターの配置</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-08196164-3CAB-4F08-9C3E-C5BC43FF8C23]--><body><div id="content"><div class="header"><h1>
サード パーティ製ロード バランサーを使用した複数コンピューターの配置</h1><div id="breadcrumb"></div></div>
<p id="GUID-7D1F5381-6018-4B2E-A173-E6FB8DB627C3"> <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> は、複数コンピューターのサイトの構成をサポートしています。複数コンピューターのサイトでは、2 台以上のサーバーを 1 つの論理単位として管理および使用できるため、コンピューターを追加/削除することでサイトの処理能力を簡単に調整できる高い柔軟性が <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 管理者にもたらされます。また、複数コンピューターのサイトでは、複数台の <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターにわたるサービスの公開および更新プロセスを簡素化できます。</p><p id="GUID-FA3F35BB-BE81-4D99-8507-6ED393B11F72">複数コンピューターの配置でサイトを正常に機能させるには、各 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターのバージョン番号を同じにする必要があります。さらに、サイトに参加する各コンピューターにも同じライセンスを適用する必要があります。</p><p id="GUID-7AA1BAD4-6DA4-4960-BFE4-38FCDA2633B2"> 一般的な複数コンピューター構成では、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターのプールの前にサード パーティ製リバース プロキシ サーバーまたはネットワーク ロード バランサーを配置する必要があります。</p><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-D4C995D9-D217-43B5-8405-C6865551E641-web.png" purpose="img" alt="複数の" title="複数の"></td></tr><tr><td><div class="caption" purpose="caption">複数の <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターと 1 つのロード バランサーで構成されるサイト</div></td></tr></table></div><p id="GUID-7813AE69-5DA1-4ABF-B26A-8430294C93FD"> 複数コンピューター構成の主な特徴として、すべての <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターは同じ構成ストアとサーバー ディレクトリを共有します。この方式では、管理者は <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> Manager を使用して任意のコンピューターにログインし、サイト内のすべてのコンピューターに影響を及ぼす変更を適用することができます。</p><div class="section1" id="ESRI_SECTION1_14CC6AE269D74871B7D81EC84AB5DF75" purpose="section1"><h2><span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューター、サーバー ディレクトリ、および構成ストア</h2><p id="GUID-33B1D0C7-B9C5-44FB-A84C-3F395C5C1167">複数コンピューター構成に含まれるすべての <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターは同じ構成ストアとサーバー ディレクトリを共有するため、構成ストアとサーバー ディレクトリ用のネットワーク上の場所を選択する必要があります。</p><p id="GUID-7AE3C15F-3E83-4E7A-B412-95BBB3274DE7"> 通常は、ドメイン アカウントが <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> アカウントとして選択されます。この理由は、ネットワーク リソースへのデータ アクセス権限の管理が簡素化されるからです。ただし、ユーザー独自のセキュリティ ポリシーによっては、ローカル アカウントを使用することもできます。<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> アカウント (ローカルまたはドメイン) は、構成ストアとサーバー ディレクトリが配置されているネットワーク共有への書き込みアクセス権限を備えている必要があります。詳細については、「<a class="xref" target="_blank" rel="http://server.arcgis.com/ja/server/latest/administer/windows/accounts-used-by-arcgis-server.htm" href="http://server.arcgis.com/ja/server/latest/administer/windows/accounts-used-by-arcgis-server.htm">ArcGIS Server で使用するアカウント</a>」をご参照ください。</p><p id="GUID-93BA97C6-C3B8-40B1-B630-D7515B596705">複数コンピューターのサイトでは、すべての <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターは最初、ポート 4004 以上を使用する単一<a class="xref" target="_blank" rel="http://server.arcgis.com/ja/server/latest/administer/windows/about-gis-server-clusters.htm" href="http://server.arcgis.com/ja/server/latest/administer/windows/about-gis-server-clusters.htm">クラスター</a>に属します。10.4 の <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> では、新規インストールにおいて、デフォルトで<a class="xref" target="_blank" rel="http://server.arcgis.com/ja/server/latest/administer/windows/about-single-cluster-mode.htm" href="http://server.arcgis.com/ja/server/latest/administer/windows/about-single-cluster-mode.htm">単一クラスター モード</a>に設定されます。このモードには、クラスター内にあるコンピューター間の負荷分散機能は含まれていません。これにより、サイト内のコンピューター間のネットワーク トラフィックが減少し、ネットワーク上の負荷が軽減されて、サイト内の <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターの監視が改善されます。以前のリリースから 10.4 以降にアップグレードすると、現在単一クラスター モードを使用していない単一クラスターを使用して、このモードがサイトで有効化されます。すでに単一クラスター モードを使用している単一クラスター サイトと、以前のリリースのクラスターが複数あるサイトは、アップグレード時に設定が維持されます。</p><p id="GUID-91E9E50C-6209-4D73-8EBD-86870C1C743A"> サイトが複数のクラスターを使用している場合、各クラスター内のすべての <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューター間で負荷分散に対処します。基本的に、クラスターは、専用のサービス セットを実行するコンピューターの独立したグループです。</p><p id="GUID-34659E5E-FAAD-4401-9537-A5F1AC6E06A5">たとえば、受信リクエストがクラスター内外の特定のコンピューターに対する要求であっても、そのリクエストはクラスター内で利用可能な <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターに割り当てられます。リクエストを割り当てられたコンピューターはマップの描画、住所座標の検索、ジオプロセシング ツールの実行などを行い、処理結果をクライアントに返します。コンピューターがオフラインの場合や、要求されたサービスが別のクラスター内で実行されている場合、リクエストはそのサービスを含むクラスターに転送されます。そのクラスター内にある <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターは、それに応じてリクエストを負荷分散および処理します。</p></div><div class="section1" id="ESRI_SECTION1_68CB0DD2AAD84B5797E32AD99C6F8A19" purpose="section1"><h2>データ</h2><p id="GUID-683DCBD4-1E50-44E4-BE33-D0952AA667B5"> 他の配置シナリオでも述べているように、ファイルベースのデータを使用するときは、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターのローカル リソースを使用することを強くお勧めします。これには、すべてのコンピューター間でデータを複製しなければならないというデメリットがありますが、ネットワーク トラフィックが軽減され、結果としてサービスのパフォーマンスが向上します。該当する場合は、このオプションを検討して使用する必要があります。すべてのコンピューターでデータをローカルに保存することが現実的なアプローチであるかどうかは、多くの場合、データのサイズと更新の頻度によって決まります。</p><p id="GUID-C00F3955-D0D0-4E89-BF84-6AEFAC472A15"> この配置状況でデータベースを使用する場合は、常に専用のハードウェアを使用することが重要です。データベース層を <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 層から独立させておいてください。</p></div><div class="section1" id="ESRI_SECTION1_C0B4AA3B947E494CAF38E2D06896D1C7" purpose="section1"><h2>サード パーティ製リバース プロキシ サーバーまたはネットワーク ロード バランサー</h2><p id="GUID-59009666-37AB-4677-8DA2-E984B444C86F"> この構成では、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> クライアントが直接 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターに接続することはありません。代わりに、ArcGIS Server クライアントは、セキュリティ機能を備え、サイト全体の耐障害性を高める中間層を介して接続します。</p><p id="GUID-0E9F0A14-AFE9-4891-9680-43EED7082B90"> セキュリティの観点から、サイトの使用と管理のために同じチャンネルにアクセスすることは推奨されません。一般的に、管理タスクは、ポート 6080 や 6443 などを介して <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターに直接アクセスできるネットワークのセクションまたは特定のコンピューターのみを通して有効になります。このような制限を解決するには、特定の IP アドレスのみが Administrator Directory のサーバーにアクセスできるように指定します。この設定は、サーバーの<a class="xref" target="_blank" rel="http://resources.arcgis.com/ja/help/arcgis-rest-api/02r3/02r3000001t9000000.htm" href="http://resources.arcgis.com/ja/help/arcgis-rest-api/02r3/02r3000001t9000000.htm">セキュリティ構成</a>の <span class="usertext">allowedAdminAccessIPs</span> プロパティで制御されます。サーバーへのアクセスを制限するためのこのプロパティの構成方法については、「<a class="xref" target="_blank" rel="http://resources.arcgis.com/ja/help/arcgis-rest-api/02r3/02r3000001rw000000.htm" href="http://resources.arcgis.com/ja/help/arcgis-rest-api/02r3/02r3000001rw000000.htm">セキュリティ構成の更新</a>」の例をご参照ください。</p><p id="GUID-4D28AF6E-A555-4822-8C1B-D7DF5D01FF34"> クライアント アプリケーションからのリクエストは、常にリバース プロキシを経由するため、管理エンド ポイントは一切使用されません。大部分のサード パーティ製プロキシでは、特定の URL パターンを含む受信リクエストをフィルタリングできるようになっています。<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> Administrator Directory (<span class="usertext">http://gisserver.domain.com:6080/arcgis/admin</span>) または <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> Manager (<span class="usertext">http://gisserver.domain.com:6080/arcgis/manager</span>) にあるリソースを使用する受信リクエストをブロックすると、リバース プロキシを経由するすべての管理タスクを効果的にブロックできます。</p><p id="GUID-6DC6A4F1-EF76-410B-A352-EBDFE31293F0"> リバース プロキシは、サイトのロード バランサーとしても機能します。この構成には、ラウンドロビン方式などの単純な負荷分散アルゴリズムが適しています。</p><p id="GUID-B9492F73-C386-4405-A524-9A134106B74D">ネットワーク ロード バランサーが状態チェック機能に対応している場合は、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> の状態チェック エンドポイントを使用して、サイトがリクエストを受け取れるかどうかを確認できます。これは、サイトでソフトウェアまたはハードウェアの障害があるかどうかを迅速に確認する場合に便利です。詳細については、ArcGIS REST API の「<a class="xref" target="_blank" rel="http://resources.arcgis.com/ja/help/arcgis-rest-api/02r3/02r3000002n7000000.htm" href="http://resources.arcgis.com/ja/help/arcgis-rest-api/02r3/02r3000002n7000000.htm">状態チェック</a>」をご参照ください。</p><p id="GUID-28E2F286-E703-4DAA-95BA-016946315B13">リバース プロキシ サーバーを <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> と統合する方法については、「<a class="xref" target="_blank" rel="http://server.arcgis.com/ja/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm" href="http://server.arcgis.com/ja/server/latest/administer/windows/using-a-reverse-proxy-server-with-arcgis-server.htm">ArcGIS Server でのリバース プロキシ サーバーの使用</a>」をご参照ください。</p></div><div class="section1" id="ESRI_SECTION1_7D80FDD6984A4CB89673169EC202AE9B" purpose="section1"><h2>メリット</h2><ul purpose="ul" id="UL_95A679B9F76D4BF689C7D662788FF04D"><li purpose="li" id="LI_282DE4C9AD6B4A4988654E435162F3EB">単一の <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> サイトで、多数のコンピューターの <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> とそのサービスを簡単に管理することができます。</li><li purpose="li" id="LI_27251CF49540483AB4F13EA8C01AE620"> <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターの追加および削除によって、サイトの容量を容易に調整できます。</li><li purpose="li" id="LI_771CF22F97D84BABBF6A2695DEBED2F2"><span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューター間で負荷分散に対処します。</li></ul></div>
<div class="section1" id="ESRI_SECTION1_41EFAD1B165B4AD7BB2360CACBFE3F46" purpose="section1"><h2>デメリット</h2><ul purpose="ul" id="UL_990D447AD1774E3BB15F91EC33862342"><li purpose="li" id="LI_A1774AA02A234F6B99B66A5C3C260121">共有されたネットワークの場所で <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> のディレクトリとデータを使用すると、負荷が高い場合にサービスのパフォーマンスに悪影響を及ぼす可能性があります。</li><li purpose="li" id="LI_8E200906EA23425EAD7C18CEB73610F3">サード パーティ製ロード バランサーについて理解する必要があります。</li><li purpose="li" id="LI_6F2309574D9A4365BB40ED27E5601F24">Web 層認証をサポートしていません。Web 層認証を利用するには、「<a class="xref" rel="01n1/01n10000002t000000.htm" href="01n1/01n10000002t000000.htm">ArcGIS Web Adaptor を使用した複数コンピューターの配置</a>」をご参照ください。</li></ul></div><div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>