<html lang="ja" xml:lang="ja"><head>
<META http-equiv="Content-Type" content="text/html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"><META name="description" content="1 つのサイトに複数の ArcGIS Server コンピューターを導入して、トラフィック量の増加に対処したり、いずれかの ArcGIS Server がオフラインになった場合のバックアップを提供したりすることができます。"><meta name="content-language" content="ja"><link href="rsrc/htmlhelp.css" rel="stylesheet" type="text/css"><title>ArcGIS - 
ArcGIS Web Adaptor を使用した複数コンピューターの配置</title>
                <script type="text/javascript" language="JavaScript">
                    var pathL  = self.location.pathname.split ("/");
                    var fname = pathL[pathL.length-1];
                    var i = fname.lastIndexOf (".htm");
                    if (i>=0) {
                    fname = fname.substring (0, i)
                    } else {
                    //??
                    }
                    if (self.location.hash) {
				    		      fname = fname + self.location.hash;
						        }
                    self.location.replace ("../index.html#//" + fname);
                </script>
                </head><!--Publication GUID: [GUID-FB5257BE-DC53-48C6-82F8-1DA075B0A617]--><!--Topic GUID: [GUID-24EB1171-8DBB-4B71-8EB9-24D0AAE8D488]--><body><div id="content"><div class="header"><h1>
ArcGIS Web Adaptor を使用した複数コンピューターの配置</h1><div id="breadcrumb"></div></div>
<p id="GUID-5D4A77B3-8AB4-4C98-8563-2E46CDBAA8BB"> <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> は、複数コンピューターのサイトの構成をサポートしています。複数コンピューターのサイトでは、2 台以上の <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターを 1 つの論理単位として管理および使用できるため、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> を追加/削除することでサイトの処理能力を簡単に調整できる高い柔軟性が <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 管理者にもたらされます。また、複数コンピューターのサイトでは、複数台の <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> にわたるサービスの公開および更新プロセスを簡素化できます。</p><p id="GUID-9BFAE792-E43E-421A-AE5A-359025AFC736">複数コンピューターの配置でサイトを正常に機能させるには、各 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> のバージョン番号を同じにする必要があります。さらに、サイトに参加する各 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> にも同じライセンスを適用する必要があります。</p><p id="GUID-657D9CD2-9021-46BC-B0E0-5034765ACC43"> 最も単純な構成では、ユーザー独自の Web アプリケーション サーバー上で実行されている <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> を 2 台以上の <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> のプールの前に配置して複数コンピューターのサイトを構成します。</p><p id="GUID-57F2C88A-E2E2-49E2-BD5E-67A66789C50A"><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-79F9644A-D779-409B-9E1B-AF6CD5F50C4F-web.png" purpose="img" alt="可用性の高いデータ サーバーにデータを配置した複数台の" title="可用性の高いデータ サーバーにデータを配置した複数台の"></td></tr><tr><td><div class="caption" purpose="caption">可用性の高いデータ サーバーにデータを配置した複数台の <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> で構成されるサイト</div></td></tr></table></div></p><p id="GUID-67A0E652-13DF-47DE-88A9-6FE0F1F893DA">複数コンピューター構成の主な特徴として、すべての <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> は同じ構成ストアとサーバー ディレクトリを共有します。この方式では、管理者は ArcGIS Server Manager を使用して任意の <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> にログインし、サイト内のすべてのコンピューターに影響を及ぼす変更を適用することができます。この状況は、組織の Web 層での認証方式とサイトを統合する場合にも最適です。</p><div class="section1" id="ESRI_SECTION1_02F47167CE3A4E078D4BDC4E4C638C9B" purpose="section1"><h2><span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span>、サーバー、ディレクトリ、および構成ストア</h2><p id="GUID-0971E9A0-F3F1-46CB-8C9F-8605D4994F38">複数コンピューター構成に含まれるすべての <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> は同じ構成ストアとサーバー ディレクトリを共有するため、構成ストアとサーバー ディレクトリ用のネットワーク上の場所を選択する必要があります。</p><p id="GUID-4DB61302-D4E6-46E6-808E-7164B2F4F834">通常は、ドメイン アカウントが <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> アカウントとして選択されます。この理由は、ネットワーク リソースへのデータ アクセス権限の管理が簡素化されるからです。ただし、ユーザー独自のセキュリティ ポリシーによっては、ローカル アカウントを使用することもできます。<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> アカウント (ローカルまたはドメイン) は、構成ストアとサーバー ディレクトリが配置されているネットワーク共有への書き込みアクセス権限を備えている必要があります。詳細については、「<a class="xref" target="_blank" rel="http://server.arcgis.com/ja/server/latest/administer/windows/accounts-used-by-arcgis-server.htm" href="http://server.arcgis.com/ja/server/latest/administer/windows/accounts-used-by-arcgis-server.htm">ArcGIS Server で使用するアカウント</a>」をご参照ください。</p><p id="GUID-93BA97C6-C3B8-40B1-B630-D7515B596705">複数コンピューターのサイトでは、すべての <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターは最初、ポート 4004 以上を使用する単一<a class="xref" target="_blank" rel="http://server.arcgis.com/ja/server/latest/administer/windows/about-gis-server-clusters.htm" href="http://server.arcgis.com/ja/server/latest/administer/windows/about-gis-server-clusters.htm">クラスター</a>に属します。10.4 の <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> では、新規インストールにおいて、デフォルトで<a class="xref" target="_blank" rel="http://server.arcgis.com/ja/server/latest/administer/windows/about-single-cluster-mode.htm" href="http://server.arcgis.com/ja/server/latest/administer/windows/about-single-cluster-mode.htm">単一クラスター モード</a>に設定されます。このモードには、クラスター内にあるコンピューター間の負荷分散機能は含まれていません。これにより、サイト内のコンピューター間のネットワーク トラフィックが減少し、ネットワーク上の負荷が軽減されて、サイト内の <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> の監視が改善されます。10.4 にアップグレードすると、現在単一クラスター モードを使用していない単一クラスターを使用して、このモードがサイトで有効化されます。すでに単一クラスター モードを使用している単一クラスター サイトと、以前のリリースのクラスターが複数あるサイトは、アップグレード時に設定が維持されます。</p><p id="GUID-C73E2845-3685-476F-89D4-ECAF4CD564BF"> サイトが複数のクラスターを使用している場合、各クラスター内のすべての <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 間で負荷分散に対処します。基本的に、クラスターは、専用のサービス セットを実行する <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> の独立したグループです。</p><p id="GUID-34659E5E-FAAD-4401-9537-A5F1AC6E06A5">たとえば、受信リクエストがクラスター内外の特定のコンピューターに対する要求であっても、そのリクエストはクラスター内で利用可能な <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> に割り当てられます。リクエストを割り当てられた <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> は、マップの描画、住所座標の検索、ジオプロセシング ツールの実行などを行い、処理結果をクライアントに返します。コンピューターがオフラインの場合や、要求されたサービスが別のクラスター内で実行されている場合、リクエストはそのサービスを含むクラスターに転送されます。そのクラスター内にある <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターは、それに応じてリクエストを負荷分散および処理します。</p></div><div class="section1" id="ESRI_SECTION1_C7F80C1007D54987BF3840B98E882D73" purpose="section1"><h2>データ</h2><p id="GUID-94BC57DE-FF98-4D4A-9413-76864F40BAF0"> 他の配置シナリオでも述べているように、ファイルベースのデータを使用するときは、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターのローカル リソースを使用することを強くお勧めします。これには、すべての <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 間でデータを複製しなければならないというデメリットがありますが、ネットワーク トラフィックが軽減され、結果としてサービスのパフォーマンスが向上します。該当する場合は、このオプションを検討して使用する必要があります。すべてのコンピューターでデータをローカルに保存することが現実的であるかどうかは、多くの場合、データのサイズと更新の頻度によって決まります。</p><p id="GUID-9A8C2A8C-9556-418C-82CF-50DE0DA17ABA"> この配置状況でデータベースを使用する場合は、常に専用のハードウェアを使用することが重要です。データベース層を <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 層から独立させておいてください。</p></div><div class="section1" id="ESRI_SECTION1_A17AE34D1AE247CBA500E675632500D9" purpose="section1"><h2>ArcGIS Web Adaptor</h2><p id="GUID-7B8EADD6-0069-4F41-8C1A-D6C307FADF84"> この構成では、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> クライアントが直接 <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> に接続することはありません。代わりに、ArcGIS Server クライアントは、セキュリティ機能を備え、サイト全体の耐障害性を高める ArcGIS Web Adaptor を介して接続します。</p><p id="GUID-0CAB3CA5-A75E-46C9-A5A1-CB507DD730D9">セキュリティの観点から、サイトの使用と管理のために同じチャンネルにアクセスすることは推奨されません。一般的に、管理タスクは、ポート 6080 や 6443 などを介して <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> に直接アクセスできるネットワークのセクションまたは特定のコンピューターのみを通して有効になります。このような制限を解決するには、特定の IP アドレスのみが Administrator Directory のサーバーにアクセスできるように指定します。この設定は、サーバーの<a class="xref" target="_blank" rel="http://resources.arcgis.com/ja/help/arcgis-rest-api/02r3/02r3000001t9000000.htm" href="http://resources.arcgis.com/ja/help/arcgis-rest-api/02r3/02r3000001t9000000.htm">セキュリティ構成</a>の <span class="usertext">allowedAdminAccessIPs</span> プロパティで制御されます。サーバーへのアクセスを制限するためのこのプロパティの構成方法については、「<a class="xref" target="_blank" rel="http://resources.arcgis.com/ja/help/arcgis-rest-api/02r3/02r3000001rw000000.htm" href="http://resources.arcgis.com/ja/help/arcgis-rest-api/02r3/02r3000001rw000000.htm">セキュリティ構成の更新</a>」の例をご参照ください。</p><p id="GUID-601E6805-D64B-49FD-B341-95C745E65B85">クライアント アプリケーションからのリクエストは、管理エンド ポイントの使用をブロックするように構成できる <span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> を常に経由します。この構成方法については、「<a class="xref" target="_blank" rel="http://server.arcgis.com/ja/server/latest/administer/windows/configure-arcgis-web-adaptor-after-installation.htm" href="http://server.arcgis.com/ja/server/latest/administer/windows/configure-arcgis-web-adaptor-after-installation.htm">インストール後の ArcGIS Web Adaptor の構成</a>」をご参照ください。</p><p id="GUID-496C6DF8-01F3-4F5A-AD5E-E5738E2EC12A">また、<span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> では、組織サイト内で使用されている標準の認証方式と <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> を統合することもできます。ArcGIS Web Adaptor は、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> に対するリバース プロキシとして機能しているユーザー独自の Web サーバーにインストールできる小さなコンポーネントです。サポートされている Web サーバーのリストは、「<a class="xref" rel="01n1/01n100000034000000.htm" href="01n1/01n100000034000000.htm">ArcGIS Web Adaptor のシステム要件</a>」をご参照ください。(GIS 層認証ではなく) Web 層認証を使用するよう <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> セキュリティを構成すると、<span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> は認証をユーザーの Web サーバーに委任します。</p><p id="GUID-9644EFAC-A720-430A-8030-A706250F81D9">複数の認証方式をサポートするように、複数の ArcGIS Web Adaptor をサイトに構成できます。詳細については、「<a class="xref" target="_blank" rel="http://server.arcgis.com/ja/server/latest/administer/windows/supporting-a-mix-of-public-and-private-services.htm" href="http://server.arcgis.com/ja/server/latest/administer/windows/supporting-a-mix-of-public-and-private-services.htm">パブリック サービスとプライベート サービスが混在する場合のサポート</a>」をご参照ください。</p><p id="GUID-F33529F9-1C9D-44E5-A321-6B25D384E8BC"><span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> は、サイトのロード バランサーとしても機能します。<span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> は、ラウンドロビン負荷分散アルゴリズムに従って <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> のプールにリクエストを転送します。また、<span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> は、サイトに新しく追加された <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> を自動的に検出してリクエストを転送するか、使用できない状態のコンピューターまたはサイトから削除されたコンピューターにリクエストが転送されないようにします。</p></div><div class="section1" id="ESRI_SECTION1_343DCCE07E654E70A6E008C7ED2A06B9" purpose="section1"><h2>高可用性に関する考慮事項</h2><p id="GUID-998AC748-0092-4EEE-B685-03413A6E1872"> 高可用性に対応したこの配置シナリオは、次の図に示すように、ArcGIS Web Adaptor 層に冗長性が追加されます。サイトに複数の ArcGIS Web Adaptor を構成する場合は、それぞれの ArcGIS Web Adaptor がサイト内のすべての <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターにリクエストをラウンドロビン方式で転送します。</p><div class="image" purpose="image"><table><tr><td><img class="break" src="01n1/GUID-EC903B01-4355-4D5E-B61E-A3E9F8C4680F-web.png" purpose="img" alt="ArcGIS Web Adaptor 層で冗長性を確保している複数コンピューターのサイト" title="ArcGIS Web Adaptor 層で冗長性を確保している複数コンピューターのサイト"></td></tr><tr><td><div class="caption" purpose="caption">ArcGIS Web Adaptor 層で冗長性を確保している複数コンピューターのサイト  それぞれの ArcGIS Web Adaptor がサイト内のコンピューターにリクエストをラウンドロビン方式で転送します。</div></td></tr></table></div><p id="GUID-3C9C0129-546C-4DFF-9E69-75768E29042B"> さらに、データ、構成ストア、およびサーバー ディレクトリにおける単一障害点をなくすことも検討する必要があります。</p><p id="GUID-6E4A965E-EDA1-42FC-BE08-8072B3707092"> すべての <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 間でファイルベースのデータセットを複製しておくと役立つことがあります。ただし、ファイルへの変更頻度またはファイル サイズの理由から、複製が常に可能であるとは限りません。ファイルベースのデータセットにネットワーク共有を使用する場合は、記憶領域が高可用性向けに構成されていることを確認してください。</p><p id="GUID-FBF7DE41-1102-4295-97A3-37E561C2979E"> ArcGIS でサポートされているデータベースもまた、さまざまなレベルの高可用性構成をサポートしています。データベース層をクラスター化するためのデータベース構成をご参照ください。</p><p id="GUID-1E454F1D-E20C-4422-9389-8E52D4856C6A"> この配置シナリオでは、構成ストアとサーバー ディレクトリは常にネットワーク共有によって格納されている必要があります。高可用性構成が必要な場合は、それに応じてこのデータベース層が設定されていることを確認してください。</p></div><div class="section1" id="ESRI_SECTION1_7D80FDD6984A4CB89673169EC202AE9B" purpose="section1"><h2>メリット</h2><ul purpose="ul" id="UL_95A679B9F76D4BF689C7D662788FF04D"><li purpose="li" id="LI_282DE4C9AD6B4A4988654E435162F3EB">単一の <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> サイトで、多数のコンピューターの <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> とそのサービスを簡単に管理することができます。</li><li purpose="li" id="LI_27251CF49540483AB4F13EA8C01AE620"> <span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> コンピューターの追加および削除によって、サイトの容量を容易に調整できます。</li><li purpose="li" id="LI_771CF22F97D84BABBF6A2695DEBED2F2"><span purpose="ph" translate="no" varid="ArcGISforServer">ArcGIS Server</span> 間の負荷分散が処理されます。</li><li purpose="li" id="LI_B221E6281A344C07B9F5EB30C145FBA4"><span purpose="ph" translate="no" varid="WebAdaptorforArcGIS">ArcGIS Web Adaptor</span> 経由で Web 層認証を使用して、標準の組織認証を統合します。</li></ul></div>
<div class="section1" id="ESRI_SECTION1_41EFAD1B165B4AD7BB2360CACBFE3F46" purpose="section1"><h2>デメリット</h2><ul purpose="ul" id="UL_374A7525DA254583BD93C34CA24E3731"><li purpose="li" id="LI_D61CAD7C8A24463CAD02FB86848594B9">共有されたネットワークの場所でサーバー ディレクトリとデータを使用すると、負荷が高い場合にサービスのパフォーマンスに悪影響を及ぼす可能性があります。</li></ul></div>
<div class="footer"> Copyright © 1995-2017 Esri. All rights reserved. </div></div></body></html>